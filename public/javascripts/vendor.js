(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o,t)}},u=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,o(e),r),r.exports},a=function(e,s){var o=i(e,".");s==null&&(s="/");if(r(n,o))return n[o].exports;if(r(t,o))return u(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a].exports;if(r(t,a))return u(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+s+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n},l=function(){var e=[];for(var n in t)r(t,n)&&e.push(n);return e};e.require=a,e.require.define=f,e.require.register=f,e.require.list=l,e.require.brunch=!0})(),function(e){var t,n=function(){},r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");while(t=r.pop())e[t]=e[t]||n}(window.console=window.console||{}),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){function n(e){return H.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}function r(e){if(!yn[e]){var t=_.body,n=H("<"+e+">").appendTo(t),r=n.css("display");n.remove();if(r==="none"||r===""){bn||(bn=_.createElement("iframe"),bn.frameBorder=bn.width=bn.height=0),t.appendChild(bn);if(!wn||!bn.createElement)wn=(bn.contentWindow||bn.contentDocument).document,wn.write((_.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),wn.close();n=wn.createElement(e),wn.body.appendChild(n),r=H.css(n,"display"),t.removeChild(bn)}yn[e]=r}return yn[e]}function i(e,t){var n={};return H.each(Tn.concat.apply([],Tn.slice(0,t)),function(){n[this]=e}),n}function s(){Nn=t}function o(){return setTimeout(s,0),Nn=H.now()}function u(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function a(){try{return new e.XMLHttpRequest}catch(t){}}function f(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},s,o,u=r.length,a,f=r[0],l,c,h,p,d;for(s=1;s<u;s++){if(s===1)for(o in e.converters)typeof o=="string"&&(i[o.toLowerCase()]=e.converters[o]);l=f,f=r[s];if(f==="*")f=l;else if(l!=="*"&&l!==f){c=l+" "+f,h=i[c]||i["* "+f];if(!h){d=t;for(p in i){a=p.split(" ");if(a[0]===l||a[0]==="*"){d=i[a[1]+" "+f];if(d){p=i[p],p===!0?h=d:d===!0&&(h=p);break}}}}!h&&!d&&H.error("No conversion from "+c.replace(" "," to ")),h!==!0&&(n=h?h(n):d(p(n)))}}return n}function l(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function c(e,t,n,r){if(H.isArray(t))H.each(t,function(t,i){n||Xt.test(e)?r(e,i):c(e+"["+(typeof i=="object"||H.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)c(e+"["+i+"]",t[i],n,r);else r(e,t)}function h(e,n){var r,i,s=H.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&H.extend(!0,e,i)}function p(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===un,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=p(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=p(e,n,r,i,"*",o)),c}function d(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(H.isFunction(n)){var r=t.toLowerCase().split(nn),i=0,s=r.length,o,u,a;for(;i<s;i++)o=r[i],a=/^\+/.test(o),a&&(o=o.substr(1)||"*"),u=e[o]=e[o]||[],u[a?"unshift":"push"](n)}}}function v(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?It:qt;if(r>0)return n!=="border"&&H.each(i,function(){n||(r-=parseFloat(H.css(e,"padding"+this))||0),n==="margin"?r+=parseFloat(H.css(e,n+this))||0:r-=parseFloat(H.css(e,"border"+this+"Width"))||0}),r+"px";r=Rt(e,t,t);if(r<0||r==null)r=e.style[t]||0;return r=parseFloat(r)||0,n&&H.each(i,function(){r+=parseFloat(H.css(e,"padding"+this))||0,n!=="padding"&&(r+=parseFloat(H.css(e,"border"+this+"Width"))||0),n==="margin"&&(r+=parseFloat(H.css(e,n+this))||0)}),r+"px"}function m(e,t){t.src?H.ajax({url:t.src,async:!1,dataType:"script"}):H.globalEval((t.text||t.textContent||t.innerHTML||"").replace(At,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function g(e){var t=(e.nodeName||"").toLowerCase();t==="input"?y(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&H.grep(e.getElementsByTagName("input"),y)}function y(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function b(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function w(e,t){var n;if(t.nodeType===1){t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(H.expando)}}function E(e,t){if(t.nodeType===1&&!!H.hasData(e)){var n,r,i,s=H._data(e),o=H._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)H.event.add(t,n+(u[n][r].namespace?".":"")+u[n][r].namespace,u[n][r],u[n][r].data)}o.data&&(o.data=H.extend({},o.data))}}function S(e,t){return H.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function x(e){var t=gt.split(" "),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function T(e,t,n){t=t||0;if(H.isFunction(t))return H.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return H.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=H.grep(e,function(e){return e.nodeType===1});if(pt.test(t))return H.filter(t,r,!n);t=H.filter(t,r)}return H.grep(e,function(e,r){return H.inArray(e,t)>=0===n})}function N(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function C(){return!0}function k(){return!1}function L(e,t,n){var r=t+"defer",i=t+"queue",s=t+"mark",o=H._data(e,r);o&&(n==="queue"||!H._data(e,i))&&(n==="mark"||!H._data(e,s))&&setTimeout(function(){!H._data(e,i)&&!H._data(e,s)&&(H.removeData(e,r,!0),o.fire())},0)}function A(e){for(var t in e){if(t==="data"&&H.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function O(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:H.isNumeric(r)?parseFloat(r):F.test(r)?H.parseJSON(r):r}catch(s){}H.data(e,n,r)}else r=t}return r}function M(e){var t=B[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var _=e.document,D=e.navigator,P=e.location,H=function(){function n(){if(!r.isReady){try{_.documentElement.doScroll("left")}catch(e){setTimeout(n,1);return}r.ready()}}var r=function(e,t){return new r.fn.init(e,t,o)},i=e.jQuery,s=e.$,o,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/\S/,f=/^\s+/,l=/\s+$/,c=/\d/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=D.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,P=String.prototype.trim,H=Array.prototype.indexOf,B={};return r.fn=r.prototype={constructor:r,init:function(e,n,i){var s,o,a,f;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!n&&_.body)return this.context=_,this[0]=_.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)!=="<"||e.charAt(e.length-1)!==">"||e.length<3?s=u.exec(e):s=[null,e,null];if(s&&(s[1]||!n)){if(s[1])return n=n instanceof r?n[0]:n,f=n?n.ownerDocument||n:_,a=h.exec(e),a?r.isPlainObject(n)?(e=[_.createElement(a[1])],r.fn.attr.call(e,n,!0)):e=[f.createElement(a[1])]:(a=r.buildFragment([s[1]],[f]),e=(a.cacheable?r.clone(a.fragment):a.fragment).childNodes),r.merge(this,e);o=_.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return i.find(e);this.length=1,this[0]=o}return this.context=_,this.selector=e,this}return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e)}return r.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),r.makeArray(e,this))},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return r.isArray(e)?O.apply(i,e):r.merge(i,e),i.prevObject=this,i.context=this.context,t==="find"?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return r.each(this,e,t)},ready:function(e){return r.bindReady(),C.add(e),this},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(r.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},r.fn.init.prototype=r.fn,r.extend=r.fn.extend=function(){var e,n,i,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!r.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){i=a[n],s=e[n];if(a===s)continue;c&&s&&(r.isPlainObject(s)||(o=r.isArray(s)))?(o?(o=!1,u=i&&r.isArray(i)?i:[]):u=i&&r.isPlainObject(i)?i:{},a[n]=r.extend(c,u,s)):s!==t&&(a[n]=s)}return a},r.extend({noConflict:function(t){return e.$===r&&(e.$=s),t&&e.jQuery===r&&(e.jQuery=i),r},isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(e===!0&&!--r.readyWait||e!==!0&&!r.isReady){if(!_.body)return setTimeout(r.ready,1);r.isReady=!0;if(e!==!0&&--r.readyWait>0)return;C.fireWith(_,[r]),r.fn.trigger&&r(_).trigger("ready").unbind("ready")}},bindReady:function(){if(!C){C=r.Callbacks("once memory");if(_.readyState==="complete")return setTimeout(r.ready,1);if(_.addEventListener)_.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",r.ready,!1);else if(_.attachEvent){_.attachEvent("onreadystatechange",k),e.attachEvent("onload",r.ready);var t=!1;try{t=e.frameElement==null}catch(i){}_.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return r.type(e)==="function"},isArray:Array.isArray||function(e){return r.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return e!=null&&c.test(e)&&!isNaN(e)},type:function(e){return e==null?String(e):B[L.call(e)]||"object"},isPlainObject:function(e){if(!e||r.type(e)!=="object"||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||A.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=r.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();r.error("Invalid JSON: "+t)},parseXML:function(n){var i,s;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&r.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&a.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,o=0,u=e.length,a=u===t||r.isFunction(e);if(i){if(a){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o<u;)if(n.apply(e[o++],i)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:P?function(e){return e==null?"":P.call(e)}:function(e){return e==null?"":(e+"").replace(f,"").replace(l,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var i=r.type(e);e.length==null||i==="string"||i==="function"||i==="regexp"||r.isWindow(e)?O.call(n,e):r.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(H)return H.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,i){var s,o,u=[],a=0,f=e.length,l=e instanceof r||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||r.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,i),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,i),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var i=e[n];n=e,e=i}if(!r.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||r.guid++,o},access:function(e,n,i,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)r.access(e,f,n[f],s,o,i);return e}if(i!==t){s=!u&&s&&r.isFunction(i);for(var l=0;l<a;l++)o(e[l],n,s?i.call(e[l],l,o(e[l],n)):i,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}r.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof r&&!(i instanceof e)&&(i=e(i)),r.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(_);return e},browser:{}}),r.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){B["[object "+t+"]"]=t.toLowerCase()}),N=r.uaMatch(T),N.browser&&(r.browser[N.browser]=!0,r.browser.version=N.version),r.browser.webkit&&(r.browser.safari=!0),a.test(" ")&&(f=/^[\s\xA0]+/,l=/[\s\xA0]+$/),o=r(_),_.addEventListener?k=function(){_.removeEventListener("DOMContentLoaded",k,!1),r.ready()}:_.attachEvent&&(k=function(){_.readyState==="complete"&&(_.detachEvent("onreadystatechange",k),r.ready())}),typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return r}),r}(),B={};H.Callbacks=function(e){e=e?B[e]||M(e):{};var n=[],r=[],i,s,o,u,a,f=function(t){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++)s=t[r],o=H.type(s),o==="array"?f(s):o==="function"&&(!e.unique||!c.has(s))&&n.push(s)},l=function(t,f){f=f||[],i=!e.memory||[t,f],s=!0,a=o||0,o=0,u=n.length;for(;n&&a<u;a++)if(n[a].apply(t,f)===!1&&e.stopOnFalse){i=!0;break}s=!1,n&&(e.once?i===!0?c.disable():n=[]:r&&r.length&&(i=r.shift(),c.fireWith(i[0],i[1])))},c={add:function(){if(n){var e=n.length;f(arguments),s?u=n.length:i&&i!==!0&&(o=e,l(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var o=0;o<n.length;o++)if(t[r]===n[o]){s&&o<=u&&(u--,o<=a&&a--),n.splice(o--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&c.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(s?e.once||r.push([t,n]):(!e.once||!i)&&l(t,n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c};var j=[].slice;H.extend({Deferred:function(e){var t=H.Callbacks("once memory"),n=H.Callbacks("once memory"),r=H.Callbacks("memory"),i="pending",s={resolve:t,reject:n,notify:r},o={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return u.done(e).fail(t).progress(n),this},always:function(){return u.done.apply(u,arguments).fail.apply(u,arguments)},pipe:function(e,t,n){return H.Deferred(function(r){H.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],s;H.isFunction(n)?u[e](function(){s=n.apply(this,arguments),s&&H.isFunction(s.promise)?s.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===u?r:this,[s])}):u[e](r[i])})}).promise()},promise:function(e){if(e==null)e=o;else for(var t in o)e[t]=o[t];return e}},u=o.promise({}),a;for(a in s)u[a]=s[a].fire,u[a+"With"]=s[a].fireWith;return u.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(u,u),u},when:function(e){function t(e){return function(t){o[e]=arguments.length>1?j.call(arguments,0):t,f.notifyWith(l,o)}}function n(e){return function(t){r[e]=arguments.length>1?j.call(arguments,0):t,--u||f.resolveWith(f,r)}}var r=j.call(arguments,0),i=0,s=r.length,o=Array(s),u=s,a=s,f=s<=1&&e&&H.isFunction(e.promise)?e:H.Deferred(),l=f.promise();if(s>1){for(;i<s;i++)r[i]&&r[i].promise&&H.isFunction(r[i].promise)?r[i].promise().then(n(i),f.reject,t(i)):--u;u||f.resolveWith(f,r)}else f!==e&&f.resolveWith(f,s?[e]:[]);return l}}),H.support=function(){var e=_.createElement("div"),t=_.documentElement,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;e.setAttribute("className","t"),e.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>",n=e.getElementsByTagName("*"),r=e.getElementsByTagName("a")[0];if(!n||!n.length||!r)return{};i=_.createElement("select"),s=i.appendChild(_.createElement("option")),o=e.getElementsByTagName("input")[0],a={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,unknownElems:!!e.getElementsByTagName("nav").length,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:e.className!=="t",enctype:!!_.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},o.checked=!0,a.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,a.optDisabled=!s.disabled;try{delete e.test}catch(b){a.deleteExpando=!1}!e.addEventListener&&e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function(){a.noCloneEvent=!1}),e.cloneNode(!0).fireEvent("onclick")),o=_.createElement("input"),o.value="t",o.setAttribute("type","radio"),a.radioValue=o.value==="t",o.setAttribute("checked","checked"),e.appendChild(o),f=_.createDocumentFragment(),f.appendChild(e.lastChild),a.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="",e.style.width=e.style.paddingLeft="1px",l=_.getElementsByTagName("body")[0],h=_.createElement(l?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&H.extend(p,{position:"absolute",left:"-999px",top:"-999px"});for(g in p)h.style[g]=p[g];h.appendChild(e),c=l||t,c.insertBefore(h,c.firstChild),a.appendChecked=o.checked,a.boxModel=e.offsetWidth===2,"zoom"in e.style&&(e.style.display="inline",e.style.zoom=1,a.inlineBlockNeedsLayout=e.offsetWidth===2,e.style.display="",e.innerHTML="<div style='width:4px;'></div>",a.shrinkWrapBlocks=e.offsetWidth!==2),e.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",d=e.getElementsByTagName("td"),y=d[0].offsetHeight===0,d[0].style.display="",d[1].style.display="none",a.reliableHiddenOffsets=y&&d[0].offsetHeight===0,e.innerHTML="",_.defaultView&&_.defaultView.getComputedStyle&&(u=_.createElement("div"),u.style.width="0",u.style.marginRight="0",e.appendChild(u),a.reliableMarginRight=(parseInt((_.defaultView.getComputedStyle(u,null)||{marginRight:0}).marginRight,10)||0)===0);if(e.attachEvent)for(g in{submit:1,change:1,focusin:1})m="on"+g,y=m in e,y||(e.setAttribute(m,"return;"),y=typeof e[m]=="function"),a[g+"Bubbles"]=y;return H(function(){var e,t,n,r,i,s,o=1,u="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",f="visibility:hidden;border:0;",c="style='"+u+"border:5px solid #000;padding:0;'",p="<div "+c+"><div></div></div>"+"<table "+c+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";l=_.getElementsByTagName("body")[0],!l||(e=_.createElement("div"),e.style.cssText=f+"width:0;height:0;position:static;top:0;margin-top:"+o+"px",l.insertBefore(e,l.firstChild),h=_.createElement("div"),h.style.cssText=u+f,h.innerHTML=p,e.appendChild(h),t=h.firstChild,n=t.firstChild,i=t.nextSibling.firstChild.firstChild,s={doesNotAddBorder:n.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},n.style.position="fixed",n.style.top="20px",s.fixedPosition=n.offsetTop===20||n.offsetTop===15,n.style.position=n.style.top="",t.style.overflow="hidden",t.style.position="relative",s.subtractsBorderForOverflowNotVisible=n.offsetTop===-5,s.doesNotIncludeMarginInBodyOffset=l.offsetTop!==o,l.removeChild(e),h=e=null,H.extend(a,s))}),h.innerHTML="",c.removeChild(h),h=f=i=s=l=u=e=o=null,a}(),H.boxModel=H.support.boxModel;var F=/^(?:\{.*\}|\[.*\])$/,I=/([A-Z])/g;H.extend({cache:{},uuid:0,expando:"jQuery"+(H.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?H.cache[e[H.expando]]:e[H.expando],!!e&&!A(e)},data:function(e,n,r,i){if(!!H.acceptData(e)){var s,o,u,a=H.expando,f=typeof n=="string",l=e.nodeType,c=l?H.cache:e,h=l?e[H.expando]:e[H.expando]&&H.expando,p=n==="events";if((!h||!c[h]||!p&&!i&&!c[h].data)&&f&&r===t)return;h||(l?e[H.expando]=h=++H.uuid:h=H.expando),c[h]||(c[h]={},l||(c[h].toJSON=H.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=H.extend(c[h],n):c[h].data=H.extend(c[h].data,n);return s=o=c[h],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[H.camelCase(n)]=r),p&&!o[n]?s.events:(f?(u=o[n],u==null&&(u=o[H.camelCase(n)])):u=o,u)}},removeData:function(e,t,n){if(!!H.acceptData(e)){var r,i,s,o=H.expando,u=e.nodeType,a=u?H.cache:e,f=u?e[H.expando]:H.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){H.isArray(t)?t=t:t in r?t=[t]:(t=H.camelCase(t),t in r?t=[t]:t=t.split(" "));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?A:H.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!A(a[f]))return}H.support.deleteExpando||!a.setInterval?delete a[f]:a[f]=null,u&&(H.support.deleteExpando?delete e[H.expando]:e.removeAttribute?e.removeAttribute(H.expando):e[H.expando]=null)}},_data:function(e,t,n){return H.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=H.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),H.fn.extend({data:function(e,n){var r,i,s,o=null;if(typeof e=="undefined"){if(this.length){o=H.data(this[0]);if(this[0].nodeType===1&&!H._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var u=0,a=i.length;u<a;u++)s=i[u].name,s.indexOf("data-")===0&&(s=H.camelCase(s.substring(5)),O(this[0],s,o[s]));H._data(this[0],"parsedAttrs",!0)}}return o}return typeof e=="object"?this.each(function(){H.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(o=this.triggerHandler("getData"+r[1]+"!",[r[0]]),o===t&&this.length&&(o=H.data(this[0],e),o=O(this[0],e,o)),o===t&&r[1]?this.data(r[0]):o):this.each(function(){var t=H(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),H.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){H.removeData(this,e)})}}),H.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",H._data(e,t,(H._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(H._data(t,r)||1)-1;i?H._data(t,r,i):(H.removeData(t,r,!0),L(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=H._data(e,t),n&&(!r||H.isArray(n)?r=H._data(e,t,H.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=H.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),H._data(e,t+".run",i),r.call(e,function(){H.dequeue(e,t)},i)),n.length||(H.removeData(e,t+"queue "+t+".run",!0),L(e,t,"queue"))}}),H.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?H.queue(this[0],e):this.each(function(){var t=H.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&H.dequeue(this,e)})},dequeue:function(e){return this.each(function(){H.dequeue(this,e)})},delay:function(e,t){return e=H.fx?H.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function r(){--u||i.resolveWith(s,[s])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var i=H.Deferred(),s=this,o=s.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=H.data(s[o],a,t,!0)||(H.data(s[o],f,t,!0)||H.data(s[o],l,t,!0))&&H.data(s[o],a,H.Callbacks("once memory"),!0))u++,c.add(r);return r(),i.promise()}});var q=/[\n\t\r]/g,R=/\s+/,U=/\r/g,z=/^(?:button|input)$/i,W=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,$=H.support.getSetAttribute,J,K,Q;H.fn.extend({attr:function(e,t){return H.access(this,e,t,!0,H.attr)},removeAttr:function(e){return this.each(function(){H.removeAttr(this,e)})},prop:function(e,t){return H.access(this,e,t,!0,H.prop)},removeProp:function(e){return e=H.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(H.isFunction(e))return this.each(function(t){H(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(R);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=H.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(H.isFunction(e))return this.each(function(t){H(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(R);for(r=0,i=this.length;r<i;r++){s=this[r];if(s.nodeType===1&&s.className)if(e){o=(" "+s.className+" ").replace(q," ");for(u=0,a=n.length;u<a;u++)o=o.replace(" "+n[u]+" "," ");s.className=H.trim(o)}else s.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return H.isFunction(e)?this.each(function(n){H(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=H(this),u=t,a=e.split(R);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&H._data(this,"__className__",this.className),this.className=this.className||e===!1?"":H._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length)return s?(n=H.valHooks[s.nodeName.toLowerCase()]||H.valHooks[s.type],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(U,""):r==null?"":r)):t;return i=H.isFunction(e),this.each(function(r){var s=H(this),o;if(this.nodeType===1){i?o=e.call(this,r,s.val()):o=e,o==null?o="":typeof o=="number"?o+="":H.isArray(o)&&(o=H.map(o,function(e){return e==null?"":e+""})),n=H.valHooks[this.nodeName.toLowerCase()]||H.valHooks[this.type];if(!n||!("set"in n)||n.set(this,o,"value")===t)this.value=o}})}}),H.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(H.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!H.nodeName(i.parentNode,"optgroup"))){t=H(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?H(u[s]).val():o},set:function(e,t){var n=H.makeArray(t);return H(e).find("option").each(function(){this.selected=H.inArray(H(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return t;if(i&&n in H.attrFn)return H(e)[n](r);if("getAttribute"in e)return u=a!==1||!H.isXMLDoc(e),u&&(n=n.toLowerCase(),o=H.attrHooks[n]||(V.test(n)?K:J)),r!==t?r===null?(H.removeAttr(e,n),t):o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r):o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s);return H.prop(e,n,r)},removeAttr:function(e,t){var n,r,i,s,o=0;if(e.nodeType===1){r=(t||"").split(R),s=r.length;for(;o<s;o++)i=r[o].toLowerCase(),n=H.propFix[i]||i,H.attr(e,i,""),e.removeAttribute($?i:n),V.test(i)&&n in e&&(e[n]=!1)}},attrHooks:{type:{set:function(e,t){if(z.test(e.nodeName)&&e.parentNode)H.error("type property can't be changed");else if(!H.support.radioValue&&t==="radio"&&H.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return J&&H.nodeName(e,"button")?J.get(e,t):t in e?e.value:null},set:function(e,t,n){if(J&&H.nodeName(e,"button"))return J.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;return!e||u===3||u===8||u===2?t:(o=u!==1||!H.isXMLDoc(e),o&&(n=H.propFix[n]||n,s=H.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n])},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):W.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:t}}}}),H.attrHooks.tabindex=H.propHooks.tabIndex,K={get:function(e,n){var r,i=H.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?H.removeAttr(e,n):(r=H.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},$||(Q={name:!0,id:!0},J=H.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(Q[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=_.createAttribute(n),e.setAttributeNode(r)),r.nodeValue=t+""}},H.attrHooks.tabindex.set=J.set,H.each(["width","height"],function(e,t){H.attrHooks[t]=H.extend(H.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),H.attrHooks.contenteditable={get:J.get,set:function(e,t,n){t===""&&(t="false"),J.set(e,t,n)}}),H.support.hrefNormalized||H.each(["href","src","width","height"],function(e,n){H.attrHooks[n]=H.extend(H.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),H.support.style||(H.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),H.support.optSelected||(H.propHooks.selected=H.extend(H.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),H.support.enctype||(H.propFix.enctype="encoding"),H.support.checkOn||H.each(["radio","checkbox"],function(){H.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),H.each(["radio","checkbox"],function(){H.valHooks[this]=H.extend(H.valHooks[this],{set:function(e,t){if(H.isArray(t))return e.checked=H.inArray(H(e).val(),t)>=0}})});var G=/\.(.*)$/,Y=/^(?:textarea|input|select)$/i,Z=/\./g,et=/ /g,tt=/[^\w\s.|`]/g,nt=/^([^\.]*)?(?:\.(.+))?$/,rt=/\bhover(\.\S+)?/,it=/^key/,st=/^(?:mouse|contextmenu)|click/,ot=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ut=function(e){var t=ot.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},at=function(e,t){return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||e.id===t[2])&&(!t[3]||t[3].test(e.className))},ft=function(e){return H.event.special.hover?e:e.replace(rt,"mouseenter$1 mouseleave$1")};H.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g;if(!(e.nodeType===3||e.nodeType===8||!n||!r||!(o=H._data(e)))){r.handler&&(d=r,r=d.handler),r.guid||(r.guid=H.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof H=="undefined"||!!e&&H.event.triggered===e.type?t:H.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=ft(n).split(" ");for(f=0;f<n.length;f++){l=nt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=H.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=H.event.special[c]||{},p=H.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,namespace:h.join(".")},d),s&&(p.quick=ut(s),!p.quick&&H.expr.match.POS.test(s)&&(p.isPositional=!0)),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),H.event.global[c]=!0}e=null}},global:{},remove:function(e,t,n,r){var i=H.hasData(e)&&H._data(e),s,o,u,a,f,l,c,h,p,d,v;if(!!i&&!!(c=i.events)){t=ft(t||"").split(" ");for(s=0;s<t.length;s++){o=nt.exec(t[s])||[],u=o[1],a=o[2];if(!u){a=a?"."+a:"";for(l in c)H.event.remove(e,l+a,n,r);return}h=H.event.special[u]||{},u=(r?h.delegateType:h.bindType)||u,d=c[u]||[],f=d.length,a=a?new RegExp("(^|\\.)"+a.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(n||a||r||h.remove)for(l=0;l<d.length;l++){v=d[l];if(!n||n.guid===v.guid)if(!a||a.test(v.namespace))if(!r||r===v.selector||r==="**"&&v.selector)d.splice(l--,1),v.selector&&d.delegateCount--,h.remove&&h.remove.call(e,v)}else d.length=0;d.length===0&&f!==d.length&&((!h.teardown||h.teardown.call(e,a)===!1)&&H.removeEvent(e,u,i.handle),delete c[u])}H.isEmptyObject(c)&&(p=i.handle,p&&(p.elem=null),H.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o=n.type||n,u=[],a,f,l,c,h,p,d,v,m,g;o.indexOf("!")>=0&&(o=o.slice(0,-1),f=!0),o.indexOf(".")>=0&&(u=o.split("."),o=u.shift(),u.sort());if((!i||H.event.customEvent[o])&&!H.event.global[o])return;n=typeof n=="object"?n[H.expando]?n:new H.Event(o,n):new H.Event(o),n.type=o,n.isTrigger=!0,n.exclusive=f,n.namespace=u.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,p=o.indexOf(":")<0?"on"+o:"",(s||!i)&&n.preventDefault();if(!i){a=H.cache;for(l in a)a[l].events&&a[l].events[o]&&H.event.trigger(n,r,a[l].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?H.makeArray(r):[],r.unshift(n),d=H.event.special[o]||{};if(d.trigger&&d.trigger.apply(i,r)===!1)return;m=[[i,d.bindType||o]];if(!s&&!d.noBubble&&!H.isWindow(i)){g=d.delegateType||o,h=null;for(c=i.parentNode;c;c=c.parentNode)m.push([c,g]),h=c;h&&h===i.ownerDocument&&m.push([h.defaultView||h.parentWindow||e,g])}for(l=0;l<m.length;l++){c=m[l][0],n.type=m[l][1],v=(H._data(c,"events")||{})[n.type]&&H._data(c,"handle"),v&&v.apply(c,r),v=p&&c[p],v&&H.acceptData(c)&&v.apply(c,r);if(n.isPropagationStopped())break}return n.type=o,n.isDefaultPrevented()||(!d._default||d._default.apply(i.ownerDocument,r)===!1)&&(o!=="click"||!H.nodeName(i,"a"))&&H.acceptData(i)&&p&&i[o]&&(o!=="focus"&&o!=="blur"||n.target.offsetWidth!==0)&&!H.isWindow(i)&&(h=i[p],h&&(i[p]=null),H.event.triggered=o,i[o](),H.event.triggered=t,h&&(i[p]=h)),n.result}},dispatch:function(n){n=H.event.fix(n||e.event);var r=(H._data(this,"events")||{})[n.type]||[],i=r.delegateCount,s=[].slice.call(arguments,0),o=!n.exclusive&&!n.namespace,u=(H.event.special[n.type]||{}).handle,a=[],f,l,c,h,p,d,v,m,g,y,b;s[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click"))for(c=n.target;c!=this;c=c.parentNode||this){p={},v=[];for(f=0;f<i;f++)m=r[f],g=m.selector,y=p[g],m.isPositional?y=(y||(p[g]=H(g))).index(c)>=0:y===t&&(y=p[g]=m.quick?at(c,m.quick):H(c).is(g)),y&&v.push(m);v.length&&a.push({elem:c,matches:v})}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){d=a[f],n.currentTarget=d.elem;for(l=0;l<d.matches.length&&!n.isImmediatePropagationStopped();l++){m=d.matches[l];if(o||!n.namespace&&!m.namespace||n.namespace_re&&n.namespace_re.test(m.namespace))n.data=m.data,n.handleObj=m,h=(u||m.handler).apply(d.elem,s),h!==t&&(n.result=h,h===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||_,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[H.expando])return e;var n,r,i=e,s=H.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=H.Event(i);for(n=o.length;n;)r=o[--n],e[r]=i[r];return e.target||(e.target=i.srcElement||_),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),s.filter?s.filter(e,i):e},special:{ready:{setup:H.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(e,t,n){H.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=H.extend(new H.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?H.event.trigger(i,null,t):H.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},H.event.handle=H.event.dispatch,H.removeEvent=_.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},H.Event=function(e,t){if(!(this instanceof H.Event))return new H.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?C:k):this.type=e,t&&H.extend(this,t),this.timeStamp=e&&e.timeStamp||H.now(),this[H.expando]=!0},H.Event.prototype={preventDefault:function(){this.isDefaultPrevented=C;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=C;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=C,this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k},H.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){H.event.special[e]=H.event.special[t]={delegateType:t,bindType:t,handle:function(e){var t=this,n=e.relatedTarget,r=e.handleObj,i=r.selector,s,o;if(!n||r.origType===e.type||n!==t&&!H.contains(t,n))s=e.type,e.type=r.origType,o=r.handler.apply(this,arguments),e.type=s;return o}}}),H.support.submitBubbles||(H.event.special.submit={setup:function(){if(H.nodeName(this,"form"))return!1;H.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=H.nodeName(n,"input")||H.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(H.event.add(r,"submit._submit",function(e){this.parentNode&&H.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(H.nodeName(this,"form"))return!1;H.event.remove(this,"._submit")}}),H.support.changeBubbles||(H.event.special.change={setup:function(){if(Y.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")H.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),H.event.add(this,"click._change",function(e){this._just_changed&&(this._just_changed=!1,H.event.simulate("change",this,e,!0))});return!1}H.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!t._change_attached&&(H.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&H.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return H.event.remove(this,"._change"),Y.test(this.nodeName)}}),H.support.focusinBubbles||H.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){H.event.simulate(t,e.target,H.event.fix(e),!0)};H.event.special[t]={setup:function(){n++===0&&_.addEventListener(e,r,!0)},teardown:function(){--n===0&&_.removeEventListener(e,r,!0)}}}),H.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=k;else if(!i)return this;return s===1&&(o=i,i=function(e){return H().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=H.guid++)),this.each(function(){H.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return H(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=k),this.each(function(){H.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return H(this.context).on(e,this.selector,t,n),this},die:function(e,t){return H(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){H.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return H.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||H.guid++,r=0,i=function(n){var i=(H._data(this,"lastToggle"+e.guid)||0)%r;return H._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),H.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){H.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.bind(t,e,n):this.trigger(t)},H.attrFn&&(H.attrFn[t]=!0),it.test(t)&&(H.event.fixHooks[t]=H.event.keyHooks),st.test(t)&&(H.event.fixHooks[t]=H.event.mouseHooks)}),function(){function e(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}if(f.nodeType===1){o||(f[i]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[u]=l}}}function n(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}f.nodeType===1&&!o&&(f[i]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}r[u]=l}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache"+(Math.random()+"").replace(".",""),s=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(e,t,n,i){n=n||[],t=t||_;var s=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u,a,f,l,c,p,m,g,b=!0,w=h.isXML(t),E=[],x=e;do{r.exec(""),u=r.exec(x);if(u){x=u[3],E.push(u[1]);if(u[2]){l=u[3];break}}}while(u);if(E.length>1&&v.exec(e))if(E.length===2&&d.relative[E[0]])a=S(E[0]+E[1],t,i);else{a=d.relative[E[0]]?[t]:h(E.shift(),t);while(E.length)e=E.shift(),d.relative[e]&&(e+=E.shift()),a=S(e,a,i)}else{!i&&E.length>1&&t.nodeType===9&&!w&&d.match.ID.test(E[0])&&!d.match.ID.test(E[E.length-1])&&(c=h.find(E.shift(),t,w),t=c.expr?h.filter(c.expr,c.set)[0]:c.set[0]);if(t){c=i?{expr:E.pop(),set:y(i)}:h.find(E.pop(),E.length!==1||E[0]!=="~"&&E[0]!=="+"||!t.parentNode?t:t.parentNode,w),a=c.expr?h.filter(c.expr,c.set):c.set,E.length>0?f=y(a):b=!1;while(E.length)p=E.pop(),m=p,d.relative[p]?m=E.pop():p="",m==null&&(m=t),d.relative[p](f,m,w)}else f=E=[]}f||(f=a),f||h.error(p||e);if(o.call(f)==="[object Array]")if(!b)n.push.apply(n,f);else if(t&&t.nodeType===1)for(g=0;f[g]!=null;g++)f[g]&&(f[g]===!0||f[g].nodeType===1&&h.contains(t,f[g]))&&n.push(a[g]);else for(g=0;f[g]!=null;g++)f[g]&&f[g].nodeType===1&&n.push(a[g]);else y(f,n);return l&&(h(l,s,n,i),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw"Syntax error, unrecognized expression: "+e};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("parentNode",r,u,t,o,i)},"~":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("previousSibling",r,u,t,o,i)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=s++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if(e[1]==="not"){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=h.filter(e[3],t,n,!0^s);return n||i.push.apply(i,o),!1}e[3]=h(e[3],null,null,t)}else if(d.match.POS.test(e[0])||d.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,r,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],r=t[3];if(n===1&&r===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[i]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[i]=s}return f=e.nodeIndex-r,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(_.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;_.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=_.createElement("div"),n="script"+(new Date).getTime(),r=_.documentElement;e.innerHTML="<a name='"+n+"'/>",r.insertBefore(e,r.firstChild),_.getElementById(n)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=_.createElement("div");e.appendChild(_.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),_.querySelectorAll&&function(){var e=h,t=_.createElement("div"),n="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){h=function(t,r,i,s){r=r||_;if(!s&&!h.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(r.nodeType===1||r.nodeType===9)){if(o[1])return y(r.getElementsByTagName(t),i);if(o[2]&&d.find.CLASS&&r.getElementsByClassName)return y(r.getElementsByClassName(o[2]),i)}if(r.nodeType===9){if(t==="body"&&r.body)return y([r.body],i);if(o&&o[3]){var u=r.getElementById(o[3]);if(!u||!u.parentNode)return y([],i);if(u.id===o[3])return y([u],i)}try{return y(r.querySelectorAll(t),i)}catch(a){}}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r,l=r.getAttribute("id"),c=l||n,p=r.parentNode,v=/^\s*[+~]/.test(t);l?c=c.replace(/'/g,"\\$&"):r.setAttribute("id",c),v&&p&&(r=r.parentNode);try{if(!v||p)return y(r.querySelectorAll("[id='"+c+"'] "+t),i)}catch(m){}finally{l||f.removeAttribute("id")}}}return e(t,r,i,s)};for(var r in e)h[r]=e[r];t=null}}(),function(){var e=_.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(_.createElement("div"),"div"),r=!1;try{t.call(_.documentElement,"[test!='']:sizzle")}catch(i){r=!0}h.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(r||!d.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(i,null,null,[e]).length>0}}}(),function(){var e=_.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!e.getElementsByClassName&&e.getElementsByClassName("e").length!==0){e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}}(),_.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:_.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var S=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=H.attr,h.selectors.attrMap={},H.find=h,H.expr=h.selectors,H.expr[":"]=H.expr.filters,H.unique=h.uniqueSort,H.text=h.getText,H.isXMLDoc=h.isXML,H.contains=h.contains}();var lt=/Until$/,ct=/^(?:parents|prevUntil|prevAll)/,ht=/,/,pt=/^.[^:#\[\.,]*$/,dt=Array.prototype.slice,vt=H.expr.match.POS,mt={children:!0,contents:!0,next:!0,prev:!0};H.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return H(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(H.contains(t[n],this))return!0});var i=this.pushStack("","find",e),s,o,u;for(n=0,r=this.length;n<r;n++){s=i.length,H.find(e,this[n],i);if(n>0)for(o=s;o<i.length;o++)for(u=0;u<s;u++)if(i[u]===i[o]){i.splice(o--,1);break}}return i},has:function(e){var t=H(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(H.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(T(this,e,!1),"not",e)},filter:function(e){return this.pushStack(T(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?vt.test(e)?H(e,this.context).index(this[0])>=0:H.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,s=this[0];if(H.isArray(e)){var o=1;while(s&&s.ownerDocument&&s!==t){for(r=0;r<e.length;r++)H(s).is(e[r])&&n.push({selector:e[r],elem:s,level:o});s=s.parentNode,o++}return n}var u=vt.test(e)||typeof e!="string"?H(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){s=this[r];while(s){if(u?u.index(s)>-1:H.find.matchesSelector(s,e)){n.push(s);break}s=s.parentNode;if(!s||!s.ownerDocument||s===t||s.nodeType===11)break}}return n=n.length>1?H.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?H.inArray(this[0],H(e)):H.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?H(e,t):H.makeArray(e&&e.nodeType?[e]:e),r=H.merge(this.get(),n);return this.pushStack(N(n[0])||N(r[0])?r:H.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),H.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return H.dir(e,"parentNode")},parentsUntil:function(e,t,n){return H.dir(e,"parentNode",n)},next:function(e){return H.nth(e,2,"nextSibling")},prev:function(e){return H.nth(e,2,"previousSibling")},nextAll:function(e){return H.dir(e,"nextSibling")},prevAll:function(e){return H.dir(e,"previousSibling")},nextUntil:function(e,t,n){return H.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return H.dir(e,"previousSibling",n)},siblings:function(e){return H.sibling(e.parentNode.firstChild,e)},children:function(e){return H.sibling(e.firstChild)},contents:function(e){return H.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:H.makeArray(e.childNodes)}},function(e,t){H.fn[e]=function(n,r){var i=H.map(this,t,n),s=dt.call(arguments);return lt.test(e)||(r=n),r&&typeof r=="string"&&(i=H.filter(r,i)),i=this.length>1&&!mt[e]?H.unique(i):i,(this.length>1||ht.test(r))&&ct.test(e)&&(i=i.reverse()),this.pushStack(i,e,s.join(","))}}),H.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?H.find.matchesSelector(t[0],e)?[t[0]]:[]:H.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!H(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var gt="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",yt=/ jQuery\d+="(?:\d+|null)"/g,bt=/^\s+/,wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Et=/<([\w:]+)/,St=/<tbody/i,xt=/<|&#?\w+;/,Tt=/<(?:script|style)/i,Nt=/<(?:script|object|embed|option|style)/i,Ct=new RegExp("<(?:"+gt.replace(" ","|")+")","i"),kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/\/(java|ecma)script/i,At=/^\s*<!(?:\[CDATA\[|\-\-)/,Ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Mt=x(_);Ot.optgroup=Ot.option,Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead,Ot.th=Ot.td,H.support.htmlSerialize||(Ot._default=[1,"div<div>","</div>"]),H.fn.extend({text:function(e){return H.isFunction(e)?this.each(function(t){var n=H(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||_).createTextNode(e)):H.text(this)},wrapAll:function(e){if(H.isFunction(e))return this.each(function(t){H(this).wrapAll(e.call(this,t))});if(this[0]){var t=H(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return H.isFunction(e)?this.each(function(t){H(this).wrapInner(e.call(this,t))}):this.each(function(){var t=H(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){H(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){H.nodeName(this,"body")||H(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=H(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,H(arguments[0]).toArray()),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||H.filter(e,[r]).length)!t&&r.nodeType===1&&(H.cleanData(r.getElementsByTagName("*")),H.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&H.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return H.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(yt,""):null;if(typeof e=="string"&&!Tt.test(e)&&(H.support.leadingWhitespace||!bt.test(e))&&!Ot[(Et.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(wt,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(H.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else H.isFunction(e)?this.each(function(t){var n=H(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?H.isFunction(e)?this.each(function(t){var n=H(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=H(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;H(this).remove(),t?H(t).before(e):H(n).append(e)})):this.length?this.pushStack(H(H.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,s,o,u,a=e[0],f=[];if(!H.support.checkClone&&arguments.length===3&&typeof a=="string"&&kt.test(a))return this.each(function(){H(this).domManip(e,n,r,!0)});if(H.isFunction(a))return this.each(function(i){var s=H(this);e[0]=a.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){u=a&&a.parentNode,H.support.parentNode&&u&&u.nodeType===11&&u.childNodes.length===this.length?i={fragment:u}:i=H.buildFragment(e,this,f),o=i.fragment,o.childNodes.length===1?s=o=o.firstChild:s=o.firstChild;if(s){n=n&&H.nodeName(s,"tr");for(var l=0,c=this.length,h=c-1;l<c;l++)r.call(n?S(this[l],s):this[l],i.cacheable||c>1&&l<h?H.clone(o,!0,!0):o)}f.length&&H.each(f,m)}return this}}),H.buildFragment=function(e,t,n){var r,i,s,o,u=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=_),e.length===1&&typeof u=="string"&&u.length<512&&o===_&&u.charAt(0)==="<"&&!Nt.test(u)&&(H.support.checkClone||!kt.test(u))&&!H.support.unknownElems&&Ct.test(u)&&(i=!0,s=H.fragments[u],s&&s!==1&&(r=s)),r||(r=o.createDocumentFragment(),H.clean(e,o,r,n)),i&&(H.fragments[u]=s?r:1),{fragment:r,cacheable:i}},H.fragments={},H.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){H.fn[e]=function(n){var r=[],i=H(n),s=this.length===1&&this[0].parentNode;if(s&&s.nodeType===11&&s.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var o=0,u=i.length;o<u;o++){var a=(o>0?this.clone(!0):this).get();H(i[o])[t](a),r=r.concat(a)}return this.pushStack(r,e,i.selector)}}),H.extend({clone:function(e,t,n){var r=e.cloneNode(!0),i,s,o;if((!H.support.noCloneEvent||!H.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!H.isXMLDoc(e)){w(e,r),i=b(e),s=b(r);for(o=0;i[o];++o)s[o]&&w(i[o],s[o])}if(t){E(e,r);if(n){i=b(e),s=b(r);for(o=0;i[o];++o)E(i[o],s[o])}}return i=s=null,r},clean:function(e,t,n,r){var i;t=t||_,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||_);var s=[],o;for(var u=0,a;(a=e[u])!=null;u++){typeof a=="number"&&(a+="");if(!a)continue;if(typeof a=="string")if(!xt.test(a))a=t.createTextNode(a);else{a=a.replace(wt,"<$1></$2>");var f=(Et.exec(a)||["",""])[1].toLowerCase(),l=Ot[f]||Ot._default,c=l[0],h=t.createElement("div");t===_?Mt.appendChild(h):x(t).appendChild(h),h.innerHTML=l[1]+a+l[2];while(c--)h=h.lastChild;if(!H.support.tbody){var p=St.test(a),d=f==="table"&&!p?h.firstChild&&h.firstChild.childNodes:l[1]==="<table>"&&!p?h.childNodes:[];for(o=d.length-1;o>=0;--o)H.nodeName(d[o],"tbody")&&!d[o].childNodes.length&&d[o].parentNode.removeChild(d[o])}!H.support.leadingWhitespace&&bt.test(a)&&h.insertBefore(t.createTextNode(bt.exec(a)[0]),h.firstChild),a=h.childNodes}var v;if(!H.support.appendChecked)if(a[0]&&typeof (v=a.length)=="number")for(o=0;o<v;o++)g(a[o]);else g(a);a.nodeType?s.push(a):s=H.merge(s,a)}if(n){i=function(e){return!e.type||Lt.test(e.type)};for(u=0;s[u];u++)if(r&&H.nodeName(s[u],"script")&&(!s[u].type||s[u].type.toLowerCase()==="text/javascript"))r.push(s[u].parentNode?s[u].parentNode.removeChild(s[u]):s[u]);else{if(s[u].nodeType===1){var m=H.grep(s[u].getElementsByTagName("script"),i);s.splice.apply(s,[u+1,0].concat(m))}n.appendChild(s[u])}}return s},cleanData:function(e){var t,n,r=H.cache,i=H.event.special,s=H.support.deleteExpando;for(var o=0,u;(u=e[o])!=null;o++){if(u.nodeName&&H.noData[u.nodeName.toLowerCase()])continue;n=u[H.expando];if(n){t=r[n];if(t&&t.events){for(var a in t.events)i[a]?H.event.remove(u,a):H.removeEvent(u,a,t.handle);t.handle&&(t.handle.elem=null)}s?delete u[H.expando]:u.removeAttribute&&u.removeAttribute(H.expando),delete r[n]}}}});var _t=/alpha\([^)]*\)/i,Dt=/opacity=([^)]*)/,Pt=/([A-Z]|^ms)/g,Ht=/^-?\d+(?:px)?$/i,Bt=/^-?\d/,jt=/^([\-+])=([\-+.\de]+)/,Ft={position:"absolute",visibility:"hidden",display:"block"},It=["Left","Right"],qt=["Top","Bottom"],Rt,Ut,zt;H.fn.css=function(e,n){return arguments.length===2&&n===t?this:H.access(this,e,n,!0,function(e,n,r){return r!==t?H.style(e,n,r):H.css(e,n)})},H.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":H.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!!e&&e.nodeType!==3&&e.nodeType!==8&&!!e.style){var s,o,u=H.camelCase(n),a=e.style,f=H.cssHooks[u];n=H.cssProps[u]||u;if(r===t)return f&&"get"in f&&(s=f.get(e,!1,i))!==t?s:a[n];o=typeof r,o==="string"&&(s=jt.exec(r))&&(r=+(s[1]+1)*+s[2]+parseFloat(H.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!H.cssNumber[u]&&(r+="px");if(!f||!("set"in f)||(r=f.set(e,r))!==t)try{a[n]=r}catch(l){}}},css:function(e,n,r){var i,s;n=H.camelCase(n),s=H.cssHooks[n],n=H.cssProps[n]||n,n==="cssFloat"&&(n="float");if(s&&"get"in s&&(i=s.get(e,!0,r))!==t)return i;if(Rt)return Rt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),H.curCSS=H.css,H.each(["height","width"],function(e,t){H.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?v(e,t,r):(H.swap(e,Ft,function(){i=v(e,t,r)}),i)},set:function(e,t){if(!Ht.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),H.support.opacity||(H.cssHooks.opacity={get:function(e,t){return Dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=H.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&H.trim(s.replace(_t,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=_t.test(s)?s.replace(_t,i):s+" "+i}}),H(function(){H.support.reliableMarginRight||(H.cssHooks.marginRight={get:function(e,t){var n;return H.swap(e,{display:"inline-block"},function(){t?n=Rt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),_.defaultView&&_.defaultView.getComputedStyle&&(Ut=function(e,n){var r,i,s;n=n.replace(Pt,"-$1").toLowerCase();if(!(i=e.ownerDocument.defaultView))return t;if(s=i.getComputedStyle(e,null))r=s.getPropertyValue(n),r===""&&!H.contains(e.ownerDocument.documentElement,e)&&(r=H.style(e,n));return r}),_.documentElement.currentStyle&&(zt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!Ht.test(s)&&Bt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Rt=Ut||zt,H.expr&&H.expr.filters&&(H.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!H.support.reliableHiddenOffsets&&(e.style&&e.style.display||H.css(e,"display"))==="none"},H.expr.filters.visible=function(e){return!H.expr.filters.hidden(e)});var Wt=/%20/g,Xt=/\[\]$/,Vt=/\r?\n/g,$t=/#.*$/,Jt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Kt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Qt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Gt=/^(?:GET|HEAD)$/,Yt=/^\/\//,Zt=/\?/,en=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tn=/^(?:select|textarea)/i,nn=/\s+/,rn=/([?&])_=[^&]*/,sn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,on=H.fn.load,un={},an={},fn,ln,cn=["*/"]+["*"];try{fn=P.href}catch(hn){fn=_.createElement("a"),fn.href="",fn=fn.href}ln=sn.exec(fn.toLowerCase())||[],H.fn.extend({load:function(e,n,r){if(typeof e!="string"&&on)return on.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var s=e.slice(i,e.length);e=e.slice(0,i)}var o="GET";n&&(H.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=H.param(n,H.ajaxSettings.traditional),o="POST"));var u=this;return H.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),u.html(s?H("<div>").append(n.replace(en,"")).find(s):n)),r&&u.each(r,[n,t,e])}}),this},serialize:function(){return H.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?H.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tn.test(this.nodeName)||Kt.test(this.type))}).map(function(e,t){var n=H(this).val();return n==null?null:H.isArray(n)?H.map(n,function(e,n){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),H.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){H.fn[t]=function(e){return this.bind(t,e)}}),H.each(["get","post"],function(e,n){H[n]=function(e,r,i,s){return H.isFunction(r)&&(s=s||i,i=r,r=t),H.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),H.extend({getScript:function(e,n){return H.get(e,t,n,"script")},getJSON:function(e,t,n){return H.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?h(e,H.ajaxSettings):(t=e,e=H.ajaxSettings),h(e,t),e},ajaxSettings:{url:fn,isLocal:Qt.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":H.parseJSON,"text xml":H.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:d(un),ajaxTransport:d(an),ajax:function(e,n){function r(e,n,r,p){if(E!==2){E=2,b&&clearTimeout(b),y=t,m=p||"",T.readyState=e>0?4:0;var d,v,g,w=n,x=r?l(i,T,r):t,N,C;if(e>=200&&e<300||e===304){if(i.ifModified){if(N=T.getResponseHeader("Last-Modified"))H.lastModified[h]=N;if(C=T.getResponseHeader("Etag"))H.etag[h]=C}if(e===304)w="notmodified",d=!0;else try{v=f(i,x),w="success",d=!0}catch(k){w="parsererror",g=k}}else{g=w;if(!w||e)w="error",e<0&&(e=0)}T.status=e,T.statusText=""+(n||w),d?u.resolveWith(s,[v,w,T]):u.rejectWith(s,[T,w,g]),T.statusCode(c),c=t,S&&o.trigger("ajax"+(d?"Success":"Error"),[T,i,d?v:g]),a.fireWith(s,[T,w]),S&&(o.trigger("ajaxComplete",[T,i]),--H.active||H.event.trigger("ajaxStop"))}}typeof e=="object"&&(n=e,e=t),n=n||{};var i=H.ajaxSetup({},n),s=i.context||i,o=s!==i&&(s.nodeType||s instanceof H)?H(s):H.event,u=H.Deferred(),a=H.Callbacks("once memory"),c=i.statusCode||{},h,d={},v={},m,g,y,b,w,E=0,S,x,T={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=v[n]=v[n]||e,d[e]=t}return this},getAllResponseHeaders:function(){return E===2?m:null},getResponseHeader:function(e){var n;if(E===2){if(!g){g={};while(n=Jt.exec(m))g[n[1].toLowerCase()]=n[2]}n=g[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(i.mimeType=e),this},abort:function(e){return e=e||"abort",y&&y.abort(e),r(0,e),this}};u.promise(T),T.success=T.done,T.error=T.fail,T.complete=a.add,T.statusCode=function(e){if(e){var t;if(E<2)for(t in e)c[t]=[c[t],e[t]];else t=e[T.status],T.then(t,t)}return this},i.url=((e||i.url)+"").replace($t,"").replace(Yt,ln[1]+"//"),i.dataTypes=H.trim(i.dataType||"*").toLowerCase().split(nn),i.crossDomain==null&&(w=sn.exec(i.url.toLowerCase()),i.crossDomain=!(!w||w[1]==ln[1]&&w[2]==ln[2]&&(w[3]||(w[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),i.data&&i.processData&&typeof i.data!="string"&&(i.data=H.param(i.data,i.traditional)),p(un,i,n,T);if(E===2)return!1;S=i.global,i.type=i.type.toUpperCase(),i.hasContent=!Gt.test(i.type),S&&H.active++===0&&H.event.trigger("ajaxStart");if(!i.hasContent){i.data&&(i.url+=(Zt.test(i.url)?"&":"?")+i.data,delete i.data),h=i.url;if(i.cache===!1){var N=H.now(),C=i.url.replace(rn,"$1_="+N);i.url=C+(C===i.url?(Zt.test(i.url)?"&":"?")+"_="+N:"")}}(i.data&&i.hasContent&&i.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",i.contentType),i.ifModified&&(h=h||i.url,H.lastModified[h]&&T.setRequestHeader("If-Modified-Since",H.lastModified[h]),H.etag[h]&&T.setRequestHeader("If-None-Match",H.etag[h])),T.setRequestHeader("Accept",i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+(i.dataTypes[0]!=="*"?", "+cn+"; q=0.01":""):i.accepts["*"]);for(x in i.headers)T.setRequestHeader(x,i.headers[x]);if(!i.beforeSend||i.beforeSend.call(s,T,i)!==!1&&E!==2){for(x in{success:1,error:1,complete:1})T[x](i[x]);y=p(an,i,n,T);if(!y)r(-1,"No Transport");else{T.readyState=1,S&&o.trigger("ajaxSend",[T,i]),i.async&&i.timeout>0&&(b=setTimeout(function(){T.abort("timeout")},i.timeout));try{E=1,y.send(d,r)}catch(k){E<2?r(-1,k):H.error(k)}}return T}return T.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=H.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=H.ajaxSettings.traditional);if(H.isArray(e)||e.jquery&&!H.isPlainObject(e))H.each(e,function(){i(this.name,this.value)});else for(var s in e)c(s,e[s],n,i);return r.join("&").replace(Wt,"+")}}),H.extend({active:0,lastModified:{},etag:{}});var pn=H.now(),dn=/(\=)\?(&|$)|\?\?/i;H.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return H.expando+"_"+pn++}}),H.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(dn.test(t.url)||i&&dn.test(t.data))){var s,o=t.jsonpCallback=H.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u=e[o],a=t.url,f=t.data,l="$1"+o+"$2";return t.jsonp!==!1&&(a=a.replace(dn,l),t.url===a&&(i&&(f=f.replace(dn,l)),t.data===f&&(a+=(/\?/.test(a)?"&":"?")+t.jsonp+"="+o))),t.url=a,t.data=f,e[o]=function(e){s=[e]},r.always(function(){e[o]=u,s&&H.isFunction(u)&&e[o](s[0])}),t.converters["script json"]=function(){return s||H.error(o+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),H.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return H.globalEval(e),e}}}),H.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),H.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=_.head||_.getElementsByTagName("head")[0]||_.documentElement;return{send:function(i,s){n=_.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var vn=e.ActiveXObject?function(){for(var e in gn)gn[e](0,1)}:!1,mn=0,gn;H.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&a()||u()}:a,function(e){H.extend(H.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(H.ajaxSettings.xhr()),H.support.ajax&&H.ajaxTransport(function(n){if(!n.crossDomain||H.support.cors){var r;return{send:function(i,s){var o=n.xhr(),u,a;n.username?o.open(n.type,n.url,n.async,n.username,n.password):o.open(n.type,n.url,n.async);if(n.xhrFields)for(a in n.xhrFields)o[a]=n.xhrFields[a];n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)o.setRequestHeader(a,i[a])}catch(f){}o.send(n.hasContent&&n.data||null),r=function(e,i){var a,f,l,c,h;try{if(r&&(i||o.readyState===4)){r=t,u&&(o.onreadystatechange=H.noop,vn&&delete gn[u]);if(i)o.readyState!==4&&o.abort();else{a=o.status,l=o.getAllResponseHeaders(),c={},h=o.responseXML,h&&h.documentElement&&(c.xml=h),c.text=o.responseText;try{f=o.statusText}catch(p){f=""}!a&&n.isLocal&&!n.crossDomain?a=c.text?200:404:a===1223&&(a=204)}}}catch(d){i||s(-1,d)}c&&s(a,f,c,l)},!n.async||o.readyState===4?r():(u=++mn,vn&&(gn||(gn={},H(e).unload(vn)),gn[u]=r),o.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var yn={},bn,wn,En=/^(?:toggle|show|hide)$/,Sn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xn,Tn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Nn;H.fn.extend({show:function(e,t,n){var s,o;if(e||e===0)return this.animate(i("show",3),e,t,n);for(var u=0,a=this.length;u<a;u++)s=this[u],s.style&&(o=s.style.display,!H._data(s,"olddisplay")&&o==="none"&&(o=s.style.display=""),o===""&&H.css(s,"display")==="none"&&H._data(s,"olddisplay",r(s.nodeName)));for(u=0;u<a;u++){s=this[u];if(s.style){o=s.style.display;if(o===""||o==="none")s.style.display=H._data(s,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(i("hide",3),e,t,n);var r,s,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(s=H.css(r,"display"),s!=="none"&&!H._data(r,"olddisplay")&&H._data(r,"olddisplay",s));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:H.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return H.isFunction(e)&&H.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:H(this).is(":hidden");H(this)[t?"show":"hide"]()}):this.animate(i("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){function s(){o.queue===!1&&H._mark(this);var t=H.extend({},o),n=this.nodeType===1,i=n&&H(this).is(":hidden"),s,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){s=H.camelCase(a),a!==s&&(e[s]=e[a],delete e[a]),u=e[s],H.isArray(u)?(t.animatedProperties[s]=u[1],u=e[s]=u[0]):t.animatedProperties[s]=t.specialEasing&&t.specialEasing[s]||t.easing||"swing";if(u==="hide"&&i||u==="show"&&!i)return t.complete.call(this);n&&(s==="height"||s==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],H.css(this,"display")==="inline"&&H.css(this,"float")==="none"&&(!H.support.inlineBlockNeedsLayout||r(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new H.fx(this,t,a),u=e[a],En.test(u)?(d=H._data(this,"toggle"+a)||(u==="toggle"?i?"show":"hide":0),d?(H._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=Sn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(H.cssNumber[a]?"":"px"),p!=="px"&&(H.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,H.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var o=H.speed(t,n,i);return H.isEmptyObject(e)?this.each(o.complete,[!1]):(e=H.extend({},e),o.queue===!1?this.each(s):this.queue(o.queue,s))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var i=t[n];H.removeData(e,n,!0),i.stop(r)}var n,i=!1,s=H.timers,o=H._data(this);r||H._unmark(!0,this);if(e==null)for(n in o)o[n].stop&&n.indexOf(".run")===n.length-4&&t(this,o,n);else o[n=e+".run"]&&o[n].stop&&t(this,o,n);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(r?s[n](!0):s[n].saveState(),i=!0,s.splice(n,1));(!r||!i)&&H.dequeue(this,e)})}}),H.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){H.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),H.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?H.extend({},e):{complete:n||!n&&t||H.isFunction(e)&&e,duration:e,easing:n&&t||t&&!H.isFunction(t)&&t};r.duration=H.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in H.fx.speeds?H.fx.speeds[r.duration]:H.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){H.isFunction(r.old)&&r.old.call(this),r.queue?H.dequeue(this,r.queue):e!==!1&&H._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),H.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(H.fx.step[this.prop]||H.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=H.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function i(e){return s.step(e)}var s=this,u=H.fx;this.startTime=Nn||o(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(H.cssNumber[this.prop]?"":"px"),i.queue=this.options.queue,i.elem=this.elem,i.saveState=function(){s.options.hide&&H._data(s.elem,"fxshow"+s.prop)===t&&H._data(s.elem,"fxshow"+s.prop,s.start)},i()&&H.timers.push(i)&&!xn&&(xn=setInterval(u.tick,u.interval))},show:function(){var e=H._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||H.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),H(this.elem).show()},hide:function(){this.options.orig[this.prop]=H._data(this.elem,"fxshow"+this.prop)||H.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=Nn||o(),s=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(s=!1);if(s){a.overflow!=null&&!H.support.shrinkWrapBlocks&&H.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&H(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)H.style(u,t,a.orig[t]),H.removeData(u,"fxshow"+t,!0),H.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=H.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},H.extend(H.fx,{tick:function(){var e,t=H.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||H.fx.stop()},interval:13,stop:function(){clearInterval(xn),xn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){H.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),H.each(["width","height"],function(e,t){H.fx.step[t]=function(e){H.style(e.elem,t,Math.max(0,e.now))}}),H.expr&&H.expr.filters&&(H.expr.filters.animated=function(e){return H.grep(H.timers,function(t){return e===t.elem}).length});var Cn=/^t(?:able|d|h)$/i,kn=/^(?:body|html)$/i;"getBoundingClientRect"in _.documentElement?H.fn.offset=function(e){var t=this[0],r;if(e)return this.each(function(t){H.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return H.offset.bodyOffset(t);try{r=t.getBoundingClientRect()}catch(i){}var s=t.ownerDocument,o=s.documentElement;if(!r||!H.contains(o,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var u=s.body,a=n(s),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||H.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||H.support.boxModel&&o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}}:H.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){H.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return H.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,s=t.ownerDocument,o=s.documentElement,u=s.body,a=s.defaultView,f=a?a.getComputedStyle(t,null):t.currentStyle,l=t.offsetTop,c=t.offsetLeft;while((t=t.parentNode)&&t!==u&&t!==o){if(H.support.fixedPosition&&f.position==="fixed")break;n=a?a.getComputedStyle(t,null):t.currentStyle,l-=t.scrollTop,c-=t.scrollLeft,t===r&&(l+=t.offsetTop,c+=t.offsetLeft,H.support.doesNotAddBorder&&(!H.support.doesAddBorderForTableAndCells||!Cn.test(t.nodeName))&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),H.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),f=n}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return H.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(o.scrollTop,u.scrollTop),c+=Math.max(o.scrollLeft,u.scrollLeft)),{top:l,left:c}},H.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return H.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(H.css(e,"marginTop"))||0,n+=parseFloat(H.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=H.css(e,"position");r==="static"&&(e.style.position="relative");var i=H(e),s=i.offset(),o=H.css(e,"top"),u=H.css(e,"left"),a=(r==="absolute"||r==="fixed")&&H.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),H.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},H.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=kn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(H.css(e,"marginTop"))||0,n.left-=parseFloat(H.css(e,"marginLeft"))||0,r.top+=parseFloat(H.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(H.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||_.body;while(e&&!kn.test(e.nodeName)&&H.css(e,"position")==="static")e=e.offsetParent;return e})}}),H.each(["Left","Top"],function(e,r){var i="scroll"+r;H.fn[i]=function(r){var s,o;return r===t?(s=this[0],s?(o=n(s),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:H.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]):null):this.each(function(){o=n(this),o?o.scrollTo(e?H(o).scrollLeft():r,e?r:H(o).scrollTop()):this[i]=r})}}),H.each(["Height","Width"],function(e,n){var r=n.toLowerCase();H.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(H.css(e,r,"padding")):this[r]():null},H.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(H.css(t,r,e?"margin":"border")):this[r]():null},H.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(H.isFunction(e))return this.each(function(t){var n=H(this);n[r](e.call(this,t,n[r]()))});if(H.isWindow(i)){var s=i.document.documentElement["client"+n],o=i.document.body;return i.document.compatMode==="CSS1Compat"&&s||o&&o["client"+n]||s}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var u=H.css(i,r),a=parseFloat(u);return H.isNumeric(a)?a:u}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=H}(window),function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function d(e){u.animate(c,i,s.easing,e&&function(){e.call(this,a,s)})}if(r==null)return;var o=this,u=e(o),a=r,l,c={},p=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);if(!a.length)return;case"object":if(a.is||a.style)l=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),f="scroll"+r,v=o[f],m=t.max(o,n);if(l)c[f]=l[i]+(p?0:v-u.offset()[i]),s.margin&&(c[f]-=parseInt(a.css("margin"+r))||0,c[f]-=parseInt(a.css("border"+r+"Width"))||0),c[f]+=s.offset[i]||0,s.over[i]&&(c[f]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var y=a[i];c[f]=y.slice&&y.slice(-1)=="%"?parseFloat(y)/100*m:y}s.limit&&/^\d+$/.test(c[f])&&(c[f]=c[f]<=0?0:Math.min(c[f],m)),!e&&s.queue&&(v!=c[f]&&d(s.onAfterFirst),delete c[f])}),d(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}(jQuery),function(e){function t(){typeof this.timeout=="undefined"&&(this.timeout=null);var t=e(this),n=t.data("mousestop"),r=n.delay||e.mousestopDelay;t.bind("mousemove.mousestop",function(){clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.trigger("mousestop"),t.unbind("mousemove.mousestop")},r)})}function n(){var t=e(this);t.unbind("mousemove.mousestop"),clearTimeout(this.timeout)}e.mousestopDelay=50,e.event.special.mousestop={setup:function(r){e(this).data("mousestop",{delay:r}).bind("mouseenter.mousestop",t).bind("mouseleave.mousestop",n)},teardown:function(){e(this).removeData("mousestop").unbind(".mousestop")}},e.fn.mousestop=function(e,t){return t==null&&(t=e,e=null),arguments.length>0?this.bind("mousestop",e,t):this.trigger("mousestop")}}(jQuery),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function o(t){var n=t||window.event,s=[].slice.call(arguments,1),o=0,u=0,a=0,f=0,l=0,c;t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(o=n.wheelDelta),n.detail&&(o=n.detail*-1),n.deltaY&&(a=n.deltaY*-1,o=a),n.deltaX&&(u=n.deltaX,o=u*-1),n.wheelDeltaY!==undefined&&(a=n.wheelDeltaY),n.wheelDeltaX!==undefined&&(u=n.wheelDeltaX*-1),f=Math.abs(o);if(!r||f<r)r=f;l=Math.max(Math.abs(a),Math.abs(u));if(!i||l<i)i=l;return c=o>0?"floor":"ceil",o=Math[c](o/r),u=Math[c](u/i),a=Math[c](a/i),s.unshift(t,o,u,a),(e.event.dispatch||e.event.handle).apply(this,s)}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r,i;if(e.event.fixHooks)for(var s=t.length;s;)e.event.fixHooks[t[--s]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],o,!1);else this.onmousewheel=o},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],o,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),function(e,t){function n(){if(!r.READY){r.event.determineEventTypes();for(var e in r.gestures)r.gestures.hasOwnProperty(e)&&r.detection.register(r.gestures[e]);r.event.onTouch(r.DOCUMENT,r.EVENT_MOVE,r.detection.detect),r.event.onTouch(r.DOCUMENT,r.EVENT_END,r.detection.detect),r.READY=!0}}var r=function(e,t){return new r.Instance(e,t||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(r.MOBILE_REGEX),r.EVENT_TYPES={},r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.POINTER_MOUSE="mouse",r.POINTER_TOUCH="touch",r.POINTER_PEN="pen",r.EVENT_START="start",r.EVENT_MOVE="move",r.EVENT_END="end",r.DOCUMENT=e.document,r.plugins={},r.READY=!1,r.Instance=function(e,t){var i=this;return n(),this.element=e,this.enabled=!0,this.options=r.utils.extend(r.utils.extend({},r.defaults),t||{}),this.options.stop_browser_behavior&&r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),r.event.onTouch(e,r.EVENT_START,function(e){i.enabled&&r.detection.startDetect(i,e)}),this},r.Instance.prototype={on:function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)this.element.addEventListener(n[r],t,!1);return this},off:function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)this.element.removeEventListener(n[r],t,!1);return this},trigger:function(e,t){var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return r.utils.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this}};var i=null,s=!1,o=!1;r.event={bindDom:function(e,t,n){t=t.split(" ");for(var r=0;r<t.length;r++)e.addEventListener(t[r],n,!1)},onTouch:function(e,t,n){var u=this;this.bindDom(e,r.EVENT_TYPES[t],function(f){var l=f.type.toLowerCase();if(!l.match(/mouse/)||!o){l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===f.which?s=!0:l.match(/mouse/)&&1!==f.which&&(s=!1),l.match(/touch|pointer/)&&(o=!0);var h=0;if(s){r.HAS_POINTEREVENTS&&t!=r.EVENT_END?h=r.PointerEvent.updatePointer(t,f):l.match(/touch/)?h=f.touches.length:o||(h=l.match(/up/)?0:1),0<h&&t==r.EVENT_END?t=r.EVENT_MOVE:h||(t=r.EVENT_END);if(h||null===i)i=f;n.call(r.detection,u.collectEventData(e,t,u.getTouchList(i,t),f)),r.HAS_POINTEREVENTS&&t==r.EVENT_END&&(h=r.PointerEvent.updatePointer(t,f))}h||(i=null,o=s=!1,r.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=r.HAS_POINTEREVENTS?r.PointerEvent.getEvents():r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r.EVENT_TYPES[r.EVENT_START]=e[0],r.EVENT_TYPES[r.EVENT_MOVE]=e[1],r.EVENT_TYPES[r.EVENT_END]=e[2]},getTouchList:function(e){return r.HAS_POINTEREVENTS?r.PointerEvent.getTouchList():e.touches?e.touches:(e.indentifier=1,[e])},collectEventData:function(e,t,n,i){e=r.POINTER_TOUCH;if(i.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,i))e=r.POINTER_MOUSE;return{center:r.utils.getCenter(n),timeStamp:(new Date).getTime(),target:i.target,touches:n,eventType:t,pointerType:e,srcEvent:i,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}},r.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==r.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n={};return n[r.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==r.POINTER_MOUSE,n[r.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==r.POINTER_TOUCH,n[r.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==r.POINTER_PEN,n[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},r.utils={extend:function(e,n,r){for(var i in n)e[i]!==t&&r||(e[i]=n[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++)t.push(e[r].pageX),n.push(e[r].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){return 180*Math.atan2(t.pageY-e.pageY,t.pageX-e.pageX)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return n>=i?0<e.pageX-t.pageX?r.DIRECTION_LEFT:r.DIRECTION_RIGHT:0<e.pageY-t.pageY?r.DIRECTION_UP:r.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return 2<=e.length&&2<=t.length?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return 2<=e.length&&2<=t.length?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==r.DIRECTION_UP||e==r.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var n,r="webkit khtml moz Moz ms o ".split(" ");if(t&&e.style){for(var i=0;i<r.length;i++)for(var s in t)t.hasOwnProperty(s)&&(n=s,r[i]&&(n=r[i]+n.substring(0,1).toUpperCase()+n.substring(1)),e.style[n]=t[s]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:r.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,n=0,i=this.gestures.length;n<i;n++){var s=this.gestures[n];if(!this.stopped&&!1!==t[s.name]&&!1===s.handler.call(s,e,this.current.inst)){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==r.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=r.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var n=0,i=e.touches.length;n<i;n++)t.touches.push(r.utils.extend({},e.touches[n]))}var n=e.timeStamp-t.timeStamp,i=e.center.pageX-t.center.pageX,s=e.center.pageY-t.center.pageY,o=r.utils.getVelocity(n,i,s);return r.utils.extend(e,{deltaTime:n,deltaX:i,deltaY:s,velocityX:o.x,velocityY:o.y,distance:r.utils.getDistance(t.center,e.center),angle:r.utils.getAngle(t.center,e.center),direction:r.utils.getDirection(t.center,e.center),scale:r.utils.getScale(t.touches,e.touches),rotation:r.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),r.utils.extend(r.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},r.gestures=r.gestures||{},r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case r.EVENT_START:clearTimeout(this.timer),r.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==r.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case r.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case r.EVENT_END:clearTimeout(this.timer)}}},r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==r.EVENT_END){var n=r.detection.previous,i=!1;e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance||(n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),i=!0),i&&!t.options.tap_always)||(r.detection.current.name="tap",t.trigger(r.detection.current.name,e))}}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){e.eventType!=r.EVENT_END||0<t.options.swipe_max_touches&&e.touches.length>t.options.swipe_max_touches||!(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)||(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}},r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,t){if(r.detection.current.name!=this.name&&this.triggered)t.trigger(this.name+"end",e),this.triggered=!1;else if(!(0<t.options.drag_max_touches&&e.touches.length>t.options.drag_max_touches))switch(e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:if(e.distance<t.options.drag_min_distance&&r.detection.current.name!=this.name)break;if(r.detection.current.name!=this.name&&(r.detection.current.name=this.name,t.options.correct_for_drag_min_distance)){var n=Math.abs(t.options.drag_min_distance/e.distance);r.detection.current.startEvent.center.pageX+=e.deltaX*n,r.detection.current.startEvent.center.pageY+=e.deltaY*n,e=r.detection.extendEventData(e)}if(r.detection.current.lastEvent.drag_locked_to_axis||t.options.drag_lock_to_axis&&t.options.drag_lock_min_distance<=e.distance)e.drag_locked_to_axis=!0;n=r.detection.current.lastEvent.direction,e.drag_locked_to_axis&&n!==e.direction&&(r.utils.isVertical(n)?e.direction=0>e.deltaY?r.DIRECTION_UP:r.DIRECTION_DOWN:e.direction=0>e.deltaX?r.DIRECTION_LEFT:r.DIRECTION_RIGHT),this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),t.trigger(this.name+e.direction,e),(t.options.drag_block_vertical&&r.utils.isVertical(e.direction)||t.options.drag_block_horizontal&&!r.utils.isVertical(e.direction))&&e.preventDefault();break;case r.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,t){if(r.detection.current.name!=this.name&&this.triggered)t.trigger(this.name+"end",e),this.triggered=!1;else if(!(2>e.touches.length))switch(t.options.transform_always_block&&e.preventDefault(),e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:var n=Math.abs(1-e.scale),i=Math.abs(e.rotation);if(n<t.options.transform_min_scale&&i<t.options.transform_min_rotation)break;r.detection.current.name=this.name,this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),i>t.options.transform_min_rotation&&t.trigger("rotate",e),n>t.options.transform_min_scale&&(t.trigger("pinch",e),t.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case r.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,t){t.options.prevent_mouseevents&&e.pointerType==r.POINTER_MOUSE?e.stopDetect():(t.options.prevent_default&&e.preventDefault(),e.eventType==r.EVENT_START&&t.trigger(this.name,e))}},r.gestures.Release={name:"release",index:Infinity,handler:function(e,t){e.eventType==r.EVENT_END&&t.trigger(this.name,e)}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return r}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r:e.Hammer=r}(this),function(e){var t=function(t,n){return n===e?t:(t.event.bindDom=function(t,r,i){n(t).on(r,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),i.call(this,n)})},t.Instance.prototype.on=function(e,t){return n(this.element).on(e,t)},t.Instance.prototype.off=function(e,t){return n(this.element).off(e,t)},t.Instance.prototype.trigger=function(e,t){var r=n(this.element);return r.has(t.target).length&&(r=n(t.target)),r.trigger({type:e,gesture:t})},n.fn.hammer=function(e){return this.each(function(){var r=n(this),i=r.data("hammer");i?i&&e&&t.utils.extend(i.options,e):r.data("hammer",new t(this,e||{}))})},t)};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["hammer","jquery"],t):t(window.Hammer,window.jQuery||window.Zepto)}();var paper=new function(){var e=new function(){function h(e,n,r,s,o,u){function l(t,s,u,l){var s=s||(s=f(n,t))&&(s.get?s:s.value);typeof s=="string"&&s[0]==="#"&&(s=e[s.substring(1)]||s);var h=typeof s=="function",p=s,d=o||h?s&&s.get?t in e:e[t]:null,v;if((u||s!==undefined&&n.hasOwnProperty(t))&&(!o||!d)){h&&d&&(s.base=d),h&&a&&s.length===0&&(v=t.match(/^(get|is)(([A-Z])(.*))$/))&&a.push([v[3].toLowerCase()+v[4],v[2]]);if(!p||h||!p.get)p={value:p,writable:!0};(f(e,t)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=r),c(e,t,p)}l&&h&&(!o||!l[t])&&(l[t]=function(n){return n&&e[t].apply(n,i.call(arguments,1))})}var a;if(n){a=[];for(var h in n)n.hasOwnProperty(h)&&!t.test(h)&&l(h,null,!0,u);l("toString"),l("valueOf");for(var p=0,d=a&&a.length;p<d;p++)try{var v=a[p],m=v[1];l(v[0],{get:e["get"+m]||e["is"+m],set:e["set"+m]},!0)}catch(g){}}return e}function p(t,n,r,i){try{t&&(i||typeof i=="undefined"&&u(t)?s:o).call(t,n,r=r||t)}catch(a){if(a!==e.stop)throw a}return r}function d(e){return p(e,function(e,t){this[t]=e},new e.constructor)}var t=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,n=Object.prototype.toString,r=Array.prototype,i=r.slice,s=r.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},o=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},u=Array.isArray=Array.isArray||function(e){return n.call(e)==="[object Array]"},a=Object.create||function(e){return{__proto__:e}},f=Object.getOwnPropertyDescriptor||function(e,t){var n=e.__lookupGetter__&&e.__lookupGetter__(t);return n?{get:n,set:e.__lookupSetter__(t),enumerable:!0,configurable:!0}:e.hasOwnProperty(t)?{value:e[t],enumerable:!0,configurable:!0,writable:!0}:null},l=Object.defineProperty||function(e,t,n){return(n.get||n.set)&&e.__defineGetter__?(n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)):e[t]=n.value,e},c=function(e,t,n){return delete e[t],l(e,t,n)};return h(function(){},{inject:function(e){if(e){var t=this.prototype,n=Object.getPrototypeOf(t).constructor,r=e.statics===!0?e:e.statics;r!=e&&h(t,e,e.enumerable,n&&n.prototype,e.preserve,e.generics&&this),h(this,r,!0,n,e.preserve)}for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(){var e=this,t;for(var n=0,r=arguments.length;n<r;n++)if(t=arguments[n].initialize)break;return t=t||function(){e.apply(this,arguments)},t.prototype=a(this.prototype),c(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this,!0),arguments.length?this.inject.apply(t,arguments):t}},!0).inject({inject:function(){for(var e=0,t=arguments.length;e<t;e++)h(this,arguments[e],arguments[e].enumerable);return this},extend:function(){var e=a(this);return e.inject.apply(e,arguments)},each:function(e,t){return p(this,e,t)},clone:function(){return d(this)},statics:{each:p,clone:d,define:c,describe:f,create:function(e){return a(e.prototype)},isPlainObject:function(t){var n=t!=null&&t.constructor;return n&&(n===Object||n===e||n.name==="Object")},check:function(e){return!!e||e===0},pick:function(){for(var e=0,t=arguments.length;e<t;e++)if(arguments[e]!==undefined)return arguments[e];return null},stop:{}}})};typeof module!="undefined"&&(module.exports=e),e.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+e.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?s.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},exportJSON:function(t){return e.exportJSON(this,t)},toJSON:function(){return e.serialize(this)},_set:function(t,n){if(t&&e.isPlainObject(t)){for(var r in t)t.hasOwnProperty(r)&&r in this&&(!n||!n[r])&&(this[r]=t[r]);return!0}},statics:{exports:{},extend:function tt(){var t=tt.base.apply(this,arguments),n=t.prototype._class;return n&&!e.exports[n]&&(e.exports[n]=t),t},equals:function(t,n){function r(e,t){for(var n in e)if(e.hasOwnProperty(n)&&typeof t[n]=="undefined")return!1;return!0}if(t===n)return!0;if(t&&t.equals)return t.equals(n);if(n&&n.equals)return n.equals(t);if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var i=0,s=t.length;i<s;i++)if(!e.equals(t[i],n[i]))return!1;return!0}if(t&&typeof t=="object"&&n&&typeof n=="object"){if(!r(t,n)||!r(n,t))return!1;for(var i in t)if(t.hasOwnProperty(i)&&!e.equals(t[i],n[i]))return!1;return!0}return!1},read:function(t,n,r,i){if(this===e){var s=this.peek(t,n);return t._index++,t.__read=1,s}var o=this.prototype,u=o._readIndex,a=n||u&&t._index||0;r||(r=t.length-a);var f=t[a];return f instanceof this||i&&i.readNull&&f==null&&r<=1?(u&&(t._index=a+1),f&&i&&i.clone?f.clone():f):(f=e.create(this),u&&(f.__read=!0),i&&(f.__options=i),f=f.initialize.apply(f,a>0||r<t.length?Array.prototype.slice.call(t,a,a+r):t)||f,u&&(t._index=a+f.__read,t.__read=f.__read,delete f.__read,i&&delete f.__options),f)},peek:function(e,t){return e[e._index=t||e._index||0]},readAll:function(e,t,n){var r=[],i;for(var s=t||0,o=e.length;s<o;s++)r.push(Array.isArray(i=e[s])?this.read(i,0,0,n):this.read(e,s,1,n));return r},readNamed:function(e,t,n,r,i){var s=this.getNamed(e,t);return this.read(s!=null?[s]:e,n,r,i)},getNamed:function(t,n){var r=t[0];t._hasObject===undefined&&(t._hasObject=t.length===1&&e.isPlainObject(r));if(t._hasObject)return n?r[n]:r},hasNamed:function(e,t){return!!this.getNamed(e,t)},isPlainValue:function(e){return this.isPlainObject(e)||Array.isArray(e)},serialize:function(t,n,r,i){n=n||{};var o=!i,u;o&&(n.formatter=new s(n.precision),i={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),s=e._class;s&&i[0]!==s&&i.unshift(s),this.definitions[n]=i,r=this.references[n]=[n]}return r}});if(t&&t._serialize){u=t._serialize(n,i);var a=t._class;a&&!r&&!u._compact&&u[0]!==a&&u.unshift(a)}else if(Array.isArray(t)){u=[];for(var f=0,l=t.length;f<l;f++)u[f]=e.serialize(t[f],n,r,i);r&&(u._compact=!0)}else if(e.isPlainObject(t)){u={};for(var f in t)t.hasOwnProperty(f)&&(u[f]=e.serialize(t[f],n,r,i))}else typeof t=="number"?u=n.formatter.number(t,n.precision):u=t;return o&&i.length>0?[["dictionary",i.definitions],u]:u},deserialize:function(t,n){var r=t;n=n||{};if(Array.isArray(t)){var i=t[0],s=i==="dictionary";if(!s){if(n.dictionary&&t.length==1&&/^#/.test(i))return n.dictionary[i];i=e.exports[i]}r=[];for(var o=i?1:0,u=t.length;o<u;o++)r.push(e.deserialize(t[o],n));if(s)n.dictionary=r[0];else if(i){var a=r;r=e.create(i),i.apply(r,a)}}else if(e.isPlainObject(t)){r={};for(var f in t)r[f]=e.deserialize(t[f],n)}return r},exportJSON:function(t,n){return JSON.stringify(e.serialize(t,n))},importJSON:function(t){return e.deserialize(typeof t=="string"?JSON.parse(t):t)},splice:function(e,t,n,r){var i=t&&t.length,s=n===undefined;n=s?e.length:n,n>e.length&&(n=e.length);for(var o=0;o<i;o++)t[o]._index=n+o;if(s)return e.push.apply(e,t),[];var u=[n,r];t&&u.push.apply(u,t);var a=e.splice.apply(e,u);for(var o=0,f=a.length;o<f;o++)delete a[o]._index;for(var o=n+i,f=e.length;o<f;o++)e[o]._index=o;return a},merge:function(){return e.each(arguments,function(t){e.each(t,function(e,t){this[t]=e},this)},new e,!0)},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var t={attach:function(t,n){if(typeof t!="string"){e.each(t,function(e,t){this.attach(t,e)},this);return}var r=this._eventTypes[t];if(r){var i=this._handlers=this._handlers||{};i=i[t]=i[t]||[],i.indexOf(n)==-1&&(i.push(n),r.install&&i.length==1&&r.install.call(this,t))}},detach:function(t,n){if(typeof t!="string"){e.each(t,function(e,t){this.detach(t,e)},this);return}var r=this._eventTypes[t],i=this._handlers&&this._handlers[t],s;r&&i&&(!n||(s=i.indexOf(n))!=-1&&i.length==1?(r.uninstall&&r.uninstall.call(this,t),delete this._handlers[t]):s!=-1&&i.splice(s,1))},once:function(e,t){this.attach(e,function(){t.apply(this,arguments),this.detach(e,t)})},fire:function(t,n){var r=this._handlers&&this._handlers[t];if(!r)return!1;var i=[].slice.call(arguments,1);return e.each(r,function(e){e.apply(this,i)===!1&&n&&n.stop&&n.stop()},this),!0},responds:function(e){return!!this._handlers&&!!this._handlers[e]},on:"#attach",off:"#detach",trigger:"#fire",statics:{inject:function nt(){for(var t=0,n=arguments.length;t<n;t++){var r=arguments[t],i=r._events;if(i){var s={};e.each(i,function(t,n){var i=typeof t=="string",o=i?t:n,u=e.capitalize(o),a=o.substring(2).toLowerCase();s[a]=i?{}:t,o="_"+o,r["get"+u]=function(){return this[o]},r["set"+u]=function(e){e?this.attach(a,e):this[o]&&this.detach(a,this[o]),this[o]=e}}),r._eventTypes=s}nt.base.call(this,r)}return this}}},n=e.extend({_class:"PaperScope",initialize:function rt(e){paper=this,this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=e&&(e.getAttribute("id")||e.src)||"paperscope-"+rt._id++,e&&e.setAttribute("id",this._id),rt._scopes[this._id]=this;if(!this.support){var t=G.getContext(1,1);rt.prototype.support={nativeDash:"setLineDash"in t||"mozDash"in t,nativeBlendModes:Y.nativeModes},G.release(t)}},version:"0.9.9",getView:function(){return this.project&&this.project.view},getTool:function(){return this._tool||(this._tool=new Q),this._tool},evaluate:function(e){var t=paper.PaperScript.evaluate(e,this);return U.updateFocus(),t},install:function(t){var n=this;e.each(["project","view","tool"],function(r){e.define(t,r,{configurable:!0,get:function(){return n[r]}})});for(var r in this)!/^(version|_id)/.test(r)&&!(r in t)&&(t[r]=this[r])},setup:function(e){return paper=this,this.project=new m(e),this},activate:function(){paper=this},clear:function(){for(var e=this.projects.length-1;e>=0;e--)this.projects[e].remove();for(var e=this.tools.length-1;e>=0;e--)this.tools[e].remove();for(var e=this.palettes.length-1;e>=0;e--)this.palettes[e].remove()},remove:function(){this.clear(),delete n._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return typeof e=="object"&&(e=e.getAttribute("id")),this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),r=e.extend(t,{initialize:function(e){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!=this&&e.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(e.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),s=e.extend({initialize:function(e){this.precision=e||5,this.multiplier=Math.pow(10,this.precision)},number:function(e){return Math.round(e*this.multiplier)/this.multiplier},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});s.instance=new s(5);var o=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,s=Math.cos,u=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,KAPPA:4*(r(2)-1)/3,isZero:function(e){return n(e)<=this.EPSILON},integrate:function(n,r,i,s){var o=e[s-2],u=t[s-2],a=.5*(i-r),f=a+r,l=0,c=s+1>>1,h=s&1?u[l++]*n(f):0;while(l<c){var p=a*o[l];h+=u[l++]*(n(f+p)+n(f-p))}return a*h},findRoot:function(e,t,r,i,s,o,u){for(var a=0;a<o;a++){var f=e(r),l=f/t(r);if(n(l)<u)return r;var c=r-l;f>0?(s=r,r=c<=i?.5*(i+s):c):(i=r,r=c>=s?.5*(i+s):c)}},solveQuadratic:function(e,t,i,s){var o=this.EPSILON;if(n(e)<o)return n(t)>=o?(s[0]=-i/t,1):n(i)<o?-1:0;var u=t*t-4*e*i;if(u<0)return 0;u=r(u),e*=2;var a=0;return s[a++]=(-t-u)/e,u>0&&(s[a++]=(-t+u)/e),a},solveCubic:function(e,t,a,f,l){var c=this.EPSILON;if(n(e)<c)return o.solveQuadratic(t,a,f,l);t/=e,a/=e,f/=e;var h=t*t,p=(h-3*a)/9,d=(2*h*t-9*t*a+27*f)/54,v=p*p*p,m=d*d-v;t/=3;if(n(m)<c){if(n(d)<c)return l[0]=-t,1;var g=r(p),y=d>0?1:-1;return l[0]=-y*2*g-t,l[1]=y*g-t,2}if(m<0){var g=r(p),b=Math.acos(d/(g*g*g))/3,w=-2*g,E=2*u/3;return l[0]=w*s(b)-t,l[1]=w*s(b+E)-t,l[2]=w*s(b-E)-t,3}var S=(d>0?-1:1)*i(n(d)+r(m),1/3);return l[0]=S+p/S-t,1}}},u=e.extend({_class:"Point",_readIndex:!0,initialize:function(t,n){var r=typeof t;if(r==="number"){var i=typeof n=="number";this.x=t,this.y=i?n:t,this.__read&&(this.__read=i?2:1)}else r==="undefined"||t===null?(this.x=this.y=0,this.__read&&(this.__read=t===null?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):t.x!=null?(this.x=t.x,this.y=t.y):t.width!=null?(this.x=t.width,this.y=t.height):t.angle!=null?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return e===this||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new u(this.x,this.y)},toString:function(){var e=s.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},add:function(e){return e=u.read(arguments),new u(this.x+e.x,this.y+e.y)},subtract:function(e){return e=u.read(arguments),new u(this.x-e.x,this.y-e.y)},multiply:function(e){return e=u.read(arguments),new u(this.x*e.x,this.y*e.y)},divide:function(e){return e=u.read(arguments),new u(this.x/e.x,this.y/e.y)},modulo:function(e){return e=u.read(arguments),new u(this.x%e.x,this.y%e.y)},negate:function(){return new u(-this.x,-this.y)},transform:function(e){return e?e._transformPoint(this):this},getDistance:function(e,t){e=u.read(arguments);var n=e.x-this.x,r=e.y-this.y,i=n*n+r*r;return t?i:Math.sqrt(i)},getLength:function(){var e=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?e:Math.sqrt(e)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this.set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();o.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}return this},normalize:function(e){e===undefined&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,r=new u(this.x*n,this.y*n);return r._angle=this._angle,r},getAngle:function(){return this.getAngleInRadians(arguments[0])*180/Math.PI},setAngle:function(e){e=this._angle=e*Math.PI/180;if(!this.isZero()){var t=this.getLength();this.set(Math.cos(e)*t,Math.sin(e)*t)}return this},getAngleInRadians:function(){if(arguments[0]===undefined)return this._angle==null&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var e=u.read(arguments),t=this.getLength()*e.getLength();return o.isZero(t)?NaN:Math.acos(this.dot(e)/t)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(e){return e=u.read(arguments),Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new u(n.x*i-n.y*r,n.y*i+n.x*r),t?n.add(t):n},isInside:function(e){return e.contains(this)},isClose:function(e,t){return this.getDistance(e)<t},isColinear:function(e){return this.cross(e)<1e-5},isOrthogonal:function(e){return this.dot(e)<1e-5},isZero:function(){return o.isZero(this.x)&&o.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(e){return e=u.read(arguments),this.x*e.x+this.y*e.y},cross:function(e){return e=u.read(arguments),this.x*e.y-this.y*e.x},project:function(e){e=u.read(arguments);if(e.isZero())return new u(0,0);var t=this.dot(e)/e.dot(e);return new u(e.x*t,e.y*t)},statics:{min:function(){var e=u.read(arguments);return point2=u.read(arguments),new u(Math.min(e.x,point2.x),Math.min(e.y,point2.y))},max:function(){var e=u.read(arguments);return point2=u.read(arguments),new u(Math.max(e.x,point2.x),Math.max(e.y,point2.y))},random:function(){return new u(Math.random(),Math.random())}}},e.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new u(t(this.x),t(this.y))}},{})),a=u.extend({initialize:function(t,n,r,i){this._x=t,this._y=n,this._owner=r,this._setter=i},set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)}}),f=e.extend({_class:"Size",_readIndex:!0,initialize:function(t,n){var r=typeof t;if(r==="number"){var i=typeof n=="number";this.width=t,this.height=i?n:t,this.__read&&(this.__read=i?2:1)}else r==="undefined"||t===null?(this.width=this.height=0,this.__read&&(this.__read=t===null?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):t.width!=null?(this.width=t.width,this.height=t.height):t.x!=null?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new f(this.width,this.height)},toString:function(){var e=s.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(e){return e=f.read(arguments),new f(this.width+e.width,this.height+e.height)},subtract:function(e){return e=f.read(arguments),new f(this.width-e.width,this.height-e.height)},multiply:function(e){return e=f.read(arguments),new f(this.width*e.width,this.height*e.height)},divide:function(e){return e=f.read(arguments),new f(this.width/e.width,this.height/e.height)},modulo:function(e){return e=f.read(arguments),new f(this.width%e.width,this.height%e.height)},negate:function(){return new f(-this.width,-this.height)},isZero:function(){return o.isZero(this.width)&&o.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new f(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new f(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new f(Math.random(),Math.random())}}},e.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new f(t(this.width),t(this.height))}},{})),c=f.extend({initialize:function(t,n,r,i){this._width=t,this._height=n,this._owner=r,this._setter=i},set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),h=e.extend({_class:"Rectangle",_readIndex:!0,initialize:function(n,r,i,s){var o=typeof n,a=0;o==="number"?(this.x=n,this.y=r,this.width=i,this.height=s,a=4):o==="undefined"||n===null?(this.x=this.y=this.width=this.height=0,a=n===null?1:0):arguments.length===1&&(Array.isArray(n)?(this.x=n[0],this.y=n[1],this.width=n[2],this.height=n[3],a=1):n.x!==undefined||n.width!==undefined?(this.x=n.x||0,this.y=n.y||0,this.width=n.width||0,this.height=n.height||0,a=1):n.from===undefined&&n.to===undefined&&(this.x=this.y=this.width=this.height=0,this._set(n),a=1));if(!a){var l=u.readNamed(arguments,"from"),c=e.peek(arguments);this.x=l.x,this.y=l.y;if(c&&c.x!==undefined||e.hasNamed(arguments,"to")){var h=u.readNamed(arguments,"to");this.width=h.x-l.x,this.height=h.y-l.y,this.width<0&&(this.x=h.x,this.width=-this.width),this.height<0&&(this.y=h.y,this.height=-this.height)}else{var p=f.read(arguments);this.width=p.width,this.height=p.height}a=arguments._index}this.__read&&(this.__read=a)},set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new h(this.x,this.y,this.width,this.height)},equals:function(t){return e.isPlainValue(t)&&(t=h.read(arguments)),t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=s.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(){return new(arguments[0]?u:a)(this.x,this.y,this,"setPoint")},setPoint:function(e){e=u.read(arguments),this.x=e.x,this.y=e.y},getSize:function(){return new(arguments[0]?f:c)(this.width,this.height,this,"setSize")},setSize:function(e){e=f.read(arguments),this._fixX&&(this.x+=(this.width-e.width)*this._fixX),this._fixY&&(this.y+=(this.height-e.height)*this._fixY),this.width=e.width,this.height=e.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(e){this._fixW||(this.width-=e-this.x),this.x=e,this._fixX=0},getTop:function(){return this.y},setTop:function(e){this._fixH||(this.height-=e-this.y),this.y=e,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(e){this._fixX!==undefined&&this._fixX!==1&&(this._fixW=0),this._fixW?this.x=e-this.width:this.width=e-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(e){this._fixY!==undefined&&this._fixY!==1&&(this._fixH=0),this._fixH?this.y=e-this.height:this.height=e-this.y,this._fixY=1},getCenterX:function(){return this.x+this.width*.5},setCenterX:function(e){this.x=e-this.width*.5,this._fixX=.5},getCenterY:function(){return this.y+this.height*.5},setCenterY:function(e){this.y=e-this.height*.5,this._fixY=.5},getCenter:function(){return new(arguments[0]?u:a)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(e){return e=u.read(arguments),this.setCenterX(e.x),this.setCenterY(e.y),this},isEmpty:function(){return this.width==0||this.height==0},contains:function(e){return e&&e.width!==undefined||(Array.isArray(e)?e:arguments).length==4?this._containsRectangle(h.read(arguments)):this._containsPoint(u.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(e){return e=h.read(arguments),e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height},touches:function(e){return e=h.read(arguments),e.x+e.width>=this.x&&e.y+e.height>=this.y&&e.x<=this.x+this.width&&e.y<=this.y+this.height},intersect:function(e){e=h.read(arguments);var t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new h(t,n,r-t,i-n)},unite:function(e){e=h.read(arguments);var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new h(t,n,r-t,i-n)},include:function(e){e=u.read(arguments);var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new h(t,n,r-t,i-n)},expand:function(e,t){return t===undefined&&(t=e),new h(this.x-e/2,this.y-t/2,this.width+e,this.height+t)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===undefined?e:t)-this.height)}},new function(){return e.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],s=e[r?1:0],o="get"+i,f="get"+s,l="set"+i,c="set"+s,h="get"+n,p="set"+n;this[h]=function(){return new(arguments[0]?u:a)(this[o](),this[f](),this,p)},this[p]=function(e){e=u.read(arguments),this[l](e.x),this[c](e.y)}},{})}),p=h.extend({initialize:function(t,n,r,i,s,o){this.set(t,n,r,i,!0),this._owner=s,this._setter=o},set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var t=h.prototype;return e.each(["x","y","width","height"],function(t){var n=e.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(e){this[r]=e,this._dontNotify||this._owner[this._setter](this)}},e.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(e){var t=this._owner;t.setSelected&&(t._boundsSelected=e,t.setSelected(e||t._selectedSegmentState>0))}}))}),d=e.extend({_class:"Matrix",initialize:function it(e){var t=arguments.length,n=!0;t==6?this.set.apply(this,arguments):t==1?e instanceof it?this.set(e._a,e._c,e._b,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):n=!1:t==0?this.reset():n=!1;if(!n)throw new Error("Unsupported matrix parameters")},set:function(e,t,n,r,i,s){return this._a=e,this._c=t,this._b=n,this._d=r,this._tx=i,this._ty=s,this},_serialize:function(t){return e.serialize(this.getValues(),t)},clone:function(){return new d(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a==e._a&&this._b==e._b&&this._c==e._c&&this._d==e._d&&this._tx==e._tx&&this._ty==e._ty||!1},toString:function(){var e=s.instance;return"[["+[e.number(this._a),e.number(this._b),e.number(this._tx)].join(", ")+"], ["+[e.number(this._c),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,this},scale:function(){var e=u.read(arguments),t=u.read(arguments,0,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._c*=e.x,this._b*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this},translate:function(e){e=u.read(arguments);var t=e.x,n=e.y;return this._tx+=t*this._a+n*this._b,this._ty+=t*this._c+n*this._d,this},rotate:function(e,t){t=u.read(arguments,1),e=e*Math.PI/180;var n=t.x,r=t.y,i=Math.cos(e),s=Math.sin(e),o=n-n*i+r*s,a=r-n*s-r*i,f=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*f+s*l,this._b=-s*f+i*l,this._c=i*c+s*h,this._d=-s*c+i*h,this._tx+=o*f+a*l,this._ty+=o*c+a*h,this},shear:function(){var e=u.read(arguments),t=u.read(arguments,0,0,{readNull:!0});t&&this.translate(t);var n=this._a,r=this._c;return this._a+=e.y*this._b,this._c+=e.y*this._d,this._b+=e.x*n,this._d+=e.x*r,t&&this.translate(t.negate()),this},isIdentity:function(){return this._a==1&&this._c==0&&this._b==0&&this._d==1&&this._tx==0&&this._ty==0},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},concatenate:function(e){var t=this._a,n=this._b,r=this._c,i=this._d;return this._a=e._a*t+e._c*n,this._b=e._b*t+e._d*n,this._c=e._a*r+e._c*i,this._d=e._b*r+e._d*i,this._tx+=e._tx*t+e._ty*n,this._ty+=e._tx*r+e._ty*i,this},preConcatenate:function(e){var t=this._a,n=this._b,r=this._c,i=this._d,s=this._tx,o=this._ty;return this._a=e._a*t+e._b*r,this._b=e._a*n+e._b*i,this._c=e._c*t+e._d*r,this._d=e._c*n+e._d*i,this._tx=e._a*s+e._b*o+e._tx,this._ty=e._c*s+e._d*o+e._ty,this},transform:function(e,t,n,r,i){return arguments.length<5?this._transformPoint(u.read(arguments)):this._transformCoordinates(e,t,n,r,i)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new u),t.set(r*this._a+i*this._b+this._tx,r*this._c+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n,r,i){var s=t,o=r,u=t+2*i;while(s<u){var a=e[s++],f=e[s++];n[o++]=a*this._a+f*this._b+this._tx,n[o++]=a*this._c+f*this._d+this._ty}return n},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,s=[t,n,r,n,r,i,t,i];return this._transformCoordinates(s,0,s,0,4)},_transformBounds:function(e,t,n){var r=this._transformCorners(e),i=r.slice(0,2),s=r.slice();for(var o=2;o<8;o++){var u=r[o],a=o&1;u<i[a]?i[a]=u:u>s[a]&&(s[a]=u)}return t||(t=new h),t.set(i[0],i[1],s[0]-i[0],s[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(u.read(arguments))},_getDeterminant:function(){var e=this._a*this._d-this._b*this._c;return isFinite(e)&&!o.isZero(e)&&isFinite(this._tx)&&isFinite(this._ty)?e:null},_inverseTransform:function(e,t,n){var r=this._getDeterminant();if(!r)return null;var i=e.x-this._tx,s=e.y-this._ty;return t||(t=new u),t.set((i*this._d-s*this._b)/r,(s*this._a-i*this._c)/r,n)},decompose:function(){var e=this._a,t=this._b,n=this._c,r=this._d;if(o.isZero(e*r-t*n))return null;var i=Math.sqrt(e*e+t*t);e/=i,t/=i;var s=e*n+t*r;n-=e*s,r-=t*s;var a=Math.sqrt(n*n+r*r);return n/=a,r/=a,s/=a,e*r<t*n&&(e=-e,t=-t,s=-s,i=-i),{translation:this.getTranslation(),scaling:new u(i,a),rotation:-Math.atan2(t,e)*180/Math.PI,shearing:s}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new u(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var e=this._getDeterminant();return e&&new d(this._d/e,-this._c/e,-this._b/e,this._a/e,(this._b*this._ty-this._d*this._tx)/e,(this._c*this._tx-this._a*this._ty)/e)},shiftless:function(){return new d(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(e){e.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},new function(){return e.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(t,n){n=e.capitalize(n),this["get"+n]=function(){return this[t]},this["set"+n]=function(e){this[t]=e}},{})}),v=e.extend({_class:"Line",initialize:function(t,n,r,i,s){var o=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=r,this._vy=i,o=s):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,o=r),o||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new u(this._px,this._py)},getVector:function(){return new u(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return v.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e){return v.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},getDistance:function(e){return Math.abs(v.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0))},statics:{intersect:function(e,t,n,r,i,s,a,f,l,c){l||(n-=e,r-=t,a-=i,f-=s);var h=f*n-a*r;if(!o.isZero(h)){var p=e-i,d=t-s,v=(a*d-f*p)/h,m=(n*d-r*p)/h;if((c||0<=v&&v<=1)&&(c||0<=m&&m<=1))return new u(e+v*n,t+v*r)}},getSide:function(e,t,n,r,i,s,o){o||(n-=e,r-=t);var u=i-e,a=s-t,f=u*r-a*n;return f===0&&(f=u*n+a*r,f>0&&(u-=n,a-=r,f=u*n+a*r,f<0&&(f=0))),f<0?-1:f>0?1:0},getSignedDistance:function(e,t,n,r,i,s,o){o||(n-=e,r-=t);var u=r/n,a=t-u*e;return(s-u*i-a)/Math.sqrt(u*u+1)}}}),m=r.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(t){r.call(this,!0),this.layers=[],this.symbols=[],this._currentStyle=new I,this.activeLayer=new w,t&&(this.view=t instanceof U?t:U.create(t)),this._selectedItems={},this._selectedItemCount=0,this._drawCount=0,this.options={}},_serialize:function(t,n){return e.serialize(this.layers,t,!0,n)},clear:function(){for(var e=this.layers.length-1;e>=0;e--)this.layers[e].remove();this.symbols=[]},remove:function st(){return st.base.call(this)?(this.view&&this.view.remove(),!0):!1},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.initialize(e)},getIndex:function(){return this._index},getSelectedItems:function(){var e=[];for(var t in this._selectedItems){var n=this._selectedItems[t];n._drawCount===this._drawCount&&e.push(n)}return e},_updateSelection:function(e){e._selected?(this._selectedItemCount++,this._selectedItems[e._id]=e,e.isInserted()&&(e._drawCount=this._drawCount)):(this._selectedItemCount--,delete this._selectedItems[e._id])},selectAll:function(){for(var e=0,t=this.layers.length;e<t;e++)this.layers[e].setSelected(!0)},deselectAll:function(){for(var e in this._selectedItems)this._selectedItems[e].setSelected(!1)},hitTest:function(t,n){t=u.read(arguments),n=T.getOptions(e.read(arguments));for(var r=this.layers.length-1;r>=0;r--){var i=this.layers[r].hitTest(t,n);if(i)return i}return null},importJSON:function(t){return this.activate(),e.importJSON(t)},draw:function(t,n){this._drawCount++,t.save(),n.applyToContext(t);var r=e.merge({offset:new u(0,0),transforms:[n]});for(var i=0,s=this.layers.length;i<s;i++)this.layers[i].draw(t,r);t.restore();if(this._selectedItemCount>0){t.save(),t.strokeWidth=1;for(var o in this._selectedItems){var a=this._selectedItems[o];if(a._drawCount===this._drawCount&&(a._drawSelected||a._boundsSelected)){var f=a.getSelectedColor()||a.getLayer().getSelectedColor();t.strokeStyle=t.fillStyle=f?f.toCanvasStyle(t):"#009dec";var l=a._globalMatrix;a._drawSelected&&a._drawSelected(t,l);if(a._boundsSelected){var c=l._transformCorners(a._getBounds("getBounds"));t.beginPath();for(var i=0;i<8;i++)t[i===0?"moveTo":"lineTo"](c[i],c[++i]);t.closePath(),t.stroke();for(var i=0;i<8;i++)t.beginPath(),t.rect(c[i]-2,c[++i]-2,4,4),t.fill()}}}t.restore()}}}),g=e.extend({_class:"Symbol",initialize:function ot(e,t){this._id=ot._id=(ot._id||0)+1,this.project=paper.project,this.project.symbols.push(this),e&&this.setDefinition(e,t),this._instances={}},_serialize:function(t,n){return n.add(this,function(){return e.serialize([this._class,this._definition],t,!1,n)})},_changed:function(t){e.each(this._instances,function(e){e._changed(t)})},getDefinition:function(){return this._definition},setDefinition:function(e){e._parentSymbol&&(e=e.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=e,e.remove(),e.setSelected(!1),arguments[1]||e.setPosition(new u),e._parentSymbol=this,this._changed(5)},place:function(e){return new x(this,e)},clone:function(){return new g(this._definition.clone(!1))}}),y=e.extend(t,{statics:{extend:function ut(t){t._serializeFields&&(t._serializeFields=e.merge(this.prototype._serializeFields,t._serializeFields));var n=ut.base.apply(this,arguments),r=n.prototype,i=r._class;return i&&(r._type=e.hyphenate(i)),n}},_class:"Item",_transformContent:!0,_boundsSelected:!1,_serializeFields:{name:null,matrix:new d,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(e,t){this._id=y._id=(y._id||0)+1;if(!this._project){var n=paper.project,r=n.activeLayer;r&&(!e||e.insert!==!1)?r.addChild(this):this._setProject(n)}return this._style=new I(this._project._currentStyle,this),this._matrix=new d,t&&this._matrix.translate(t),e?this._set(e,{insert:!0}):!0},_events:new function(){var t={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},n={install:function(e){var n=this._project.view._eventCounters;if(n)for(var r in t)n[r]=(n[r]||0)+(t[r][e]||0)},uninstall:function(e){var n=this._project.view._eventCounters;if(n)for(var r in t)n[r]-=t[r][e]||0}};return e.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(e){this[e]=n},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_serialize:function(t,n){function s(s){for(var o in s){var u=i[o];e.equals(u,s[o])||(r[o]=e.serialize(u,t,o!=="data",n))}}var r={},i=this;return s(this._serializeFields),this instanceof b||s(this._style._defaults),[this._class,r]},_changed:function(e){var t=this._parent,n=this._project,r=this._parentSymbol;e&4&&(delete this._bounds,delete this._position),t&&e&12&&t._clearBoundsCache(),e&2&&this._clearBoundsCache();if(n){e&1&&(n._needsRedraw=!0);if(n._changes){var i=n._changesById[this._id];i?i.flags|=e:(i={item:this,flags:e},n._changesById[this._id]=i,n._changes.push(i))}}r&&r._changed(e)},set:function(e){return e&&this._set(e),this},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},setName:function(e,t){this._name&&this._removeFromNamed();if(e&&this._parent){var n=this._parent._children,r=this._parent._namedChildren,i=e,s=1;while(t&&n[e])e=i+" "+s++;(r[e]=r[e]||[]).push(this),n[e]=this}this._name=e||undefined,this._changed(32)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)},hasFill:function(){return!!this.getStyle().getFillColor()},hasStroke:function(){var e=this.getStyle();return!!e.getStrokeColor()&&e.getStrokeWidth()>0}},e.each(["locked","visible","blendMode","opacity","guide"],function(t){var n=e.capitalize(t),t="_"+t;this["get"+n]=function(){return this[t]},this["set"+n]=function(e){e!=this[t]&&(this[t]=e,this._changed(t==="_locked"?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._children)for(var e=0,t=this._children.length;e<t;e++)if(this._children[e].isSelected())return!0;return this._selected},setSelected:function(e){if(this._children&&!arguments[1])for(var t=0,n=this._children.length;t<n;t++)this._children[t].setSelected(e);(e=!!e)!=this._selected&&(this._selected=e,this._project._updateSelection(this),this._changed(33))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var e=0,t=this._children.length;e<t;e++)if(!this._children[e].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(e){if(this._children)for(var t=0,n=this._children.length;t<n;t++)this._children[t].setFullySelected(e);this.setSelected(e,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(33),this._parent&&this._parent._changed(256))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(){var e=this._position||(this._position=this.getBounds().getCenter(!0));return new(arguments[0]?u:a)(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(u.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(e){this._matrix.initialize(e),this._changed(5)},isEmpty:function(){return this._children.length==0}},e.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(e){this[e]=function(){var t=this._boundsGetter,n=this._getCachedBounds(typeof t=="string"?t:t&&t[e]||e,arguments[0]);return e==="getBounds"?new p(n.x,n.y,n.width,n.height,this,"setBounds"):n}},{_getCachedBounds:function(e,t,n){var r=(!t||t.equals(this._matrix))&&e;if(n&&this._parent){var i=n._id,s=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};s.ids[i]||(s.list.push(n),s.ids[i]=n)}if(r&&this._bounds&&this._bounds[r])return this._bounds[r].clone();var o=this._matrix.isIdentity();t=!t||t.isIdentity()?o?null:this._matrix:o?t:t.clone().concatenate(this._matrix);var u=this._getBounds(e,t,r?this:n);return r&&(this._bounds||(this._bounds={}),this._bounds[r]=u.clone()),u},_clearBoundsCache:function(){if(this._boundsCache){for(var e=0,t=this._boundsCache.list,n=t.length;e<n;e++){var r=t[e];delete r._bounds,r!=this&&r._boundsCache&&r._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(e,t,n){var r=this._children;if(!r||r.length==0)return new h;var i=Infinity,s=-i,o=i,u=s;for(var a=0,f=r.length;a<f;a++){var l=r[a];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e,t,n);i=Math.min(c.x,i),o=Math.min(c.y,o),s=Math.max(c.x+c.width,s),u=Math.max(c.y+c.height,u)}}return isFinite(i)?new h(i,o,s-i,u-o):new h},setBounds:function(e){e=h.read(arguments);var t=this.getBounds(),n=new d,r=e.getCenter();n.translate(r),(e.width!=t.width||e.height!=t.height)&&n.scale(t.width!=0?e.width/t.width:1,t.height!=0?e.height/t.height:1),r=t.getCenter(),n.translate(-r.x,-r.y),this.transform(n)}}),{getProject:function(){return this._project},_setProject:function(e){if(this._project!=e){this._project=e;if(this._children)for(var t=0,n=this._children.length;t<n;t++)this._children[t]._setProject(e)}},getLayer:function(){var e=this;while(e=e._parent)if(e instanceof w)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},isInserted:function(){return this._parent?this._parent.isInserted():!1},clone:function(e){return this._clone(new this.constructor({insert:!1}),e)},_clone:function(e,t){e.setStyle(this._style);if(this._children)for(var n=0,r=this._children.length;n<r;n++)e.addChild(this._children[n].clone(!1),!0);(t||t===undefined)&&e.insertAbove(this);var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"];for(var n=0,r=i.length;n<r;n++){var s=i[n];this.hasOwnProperty(s)&&(e[s]=this[s])}return e._matrix.initialize(this._matrix),e.setSelected(this._selected),this._name&&e.setName(this._name,!0),e},copyTo:function(e){var t=this.clone();return e.layers?e.activeLayer.addChild(t):e.addChild(t),t},rasterize:function(t){var n=this.getStrokeBounds(),r=(t||72)/72,i=n.getTopLeft().floor(),s=n.getBottomRight().ceil();size=new f(s.subtract(i)),canvas=G.getCanvas(size),ctx=canvas.getContext("2d"),matrix=(new d).scale(r).translate(i.negate()),ctx.save(),matrix.applyToContext(ctx),this.draw(ctx,e.merge({transforms:[matrix]}));var o=new S(canvas);return o.setPosition(i.add(size.divide(2))),ctx.restore(),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(u.read(arguments)))},_contains:function(e){if(this._children){for(var t=this._children.length-1;t>=0;t--)if(this._children[t].contains(e))return!0;return!1}return e.isInside(this._getBounds("getBounds"))},hitTest:function(t,n){function s(i,s){var u=o["get"+s]();if(t.getDistance(u)<n.tolerance)return new T(i,r,{name:e.hyphenate(s),point:u})}t=u.read(arguments),n=T.getOptions(e.read(arguments));if(this._locked||!this._visible||this._guide&&!n.guides)return null;if(!this._children&&!this.getRoughBounds().expand(n.tolerance)._containsPoint(t))return null;t=this._matrix._inverseTransform(t);var r=this,i;if((n.center||n.bounds)&&!(this instanceof w&&!this._parent)){var o=this._getBounds("getBounds");n.center&&(i=s("center","Center"));if(!i&&n.bounds){var a=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"];for(var f=0;f<8&&!i;f++)i=s("bounds",a[f])}}return(i||(i=this._children||!(n.guides&&!this._guide||n.selected&&!this._selected)?this._hitTest(t,n):null))&&i.point&&(i.point=r._matrix.transform(i.point)),i},_hitTest:function(e,t){if(this._children){for(var n=this._children.length-1,r;n>=0;n--)if(r=this._children[n].hitTest(e,t))return r}else if(t.fill&&this.hasFill()&&this._contains(e))return new T("fill",this)},importJSON:function(t){return this.addChild(e.importJSON(t))},addChild:function(e,t){return this.insertChild(undefined,e,t)},insertChild:function(e,t,n){var r=this.insertChildren(e,[t],n);return r&&r[0]},addChildren:function(e,t){return this.insertChildren(this._children.length,e,t)},insertChildren:function(t,n,r,i){var s=this._children;if(s&&n&&n.length>0){n=Array.prototype.slice.apply(n);for(var o=n.length-1;o>=0;o--){var u=n[o];i&&u._type!==i?n.splice(o,1):u._remove(!0)}e.splice(s,n,t,0);for(var o=0,a=n.length;o<a;o++){var u=n[o];u._parent=this,u._setProject(this._project),u._name&&u.setName(u._name)}this._changed(7)}else n=null;return n},_insert:function(e,t,n){if(!t._parent)return null;var r=t._index+(e?1:0);return t._parent===this._parent&&r>this._index&&r--,t._parent.insertChild(r,this,n)},insertAbove:function(e,t){return this._insert(!0,e,t)},insertBelow:function(e,t){return this._insert(!1,e,t)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",_removeFromNamed:function(){var e=this._parent._children,t=this._parent._namedChildren,n=this._name,r=t[n],i=r?r.indexOf(this):-1;if(i==-1)return;e[n]==this&&delete e[n],r.splice(i,1),r.length?e[n]=r[r.length-1]:delete t[n]},_remove:function(t){return this._parent?(this._name&&this._removeFromNamed(),this._index!=null&&e.splice(this._parent._children,null,this._index,1),t&&this._parent._changed(7),this._parent=null,!0):!1},remove:function(){return this._remove(!0)},removeChildren:function(t,n){if(!this._children)return null;t=t||0,n=e.pick(n,this._children.length);var r=e.splice(this._children,null,t,n-t);for(var i=r.length-1;i>=0;i--)r[i]._remove(!1);return r.length>0&&this._changed(7),r},reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(7)}},isEditable:function(){var e=this;while(e){if(!e._visible||e._locked)return!1;e=e._parent}return!0},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);return t}var n=t(this),r=t(e);for(var i=0,s=Math.min(n.length,r.length);i<s;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){var t=this;while(t=t._parent)if(t==e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isGroupedWith:function(e){var t=this._parent;while(t){if(t._parent&&/^(group|layer|compound-path)$/.test(t._type)&&e.isDescendant(t))return!0;t=t._parent}return!1},scale:function(e,t,n){if(arguments.length<2||typeof t=="object")n=t,t=e;return this.transform((new d).scale(e,t,n||this.getPosition(!0)))},translate:function(){var e=new d;return this.transform(e.translate.apply(e,arguments))},rotate:function(e,t){return this.transform((new d).rotate(e,t||this.getPosition(!0)))},shear:function(e,t,n){if(arguments.length<2||typeof t=="object")n=t,t=e;return this.transform((new d).shear(e,t,n||this.getPosition(!0)))},transform:function(e){var t=this._bounds,n=this._position;this._matrix.preConcatenate(e),(this._transformContent||arguments[1])&&this.applyMatrix(!0),this._changed(5);if(t&&e.getRotation()%90===0){for(var r in t){var i=t[r];e._transformBounds(i,i)}var s=this._boundsGetter,i=t[s&&s.getBounds||s||"getBounds"];i&&(this._position=i.getCenter(!0)),this._bounds=t}else n&&(this._position=e._transformPoint(n,n));return this},_applyMatrix:function(e,t){var n=this._children;if(n&&n.length>0){for(var r=0,i=n.length;r<i;r++)n[r].transform(e,t);return!0}},applyMatrix:function(e){var t=this._matrix;if(this._applyMatrix(t,!0)){var n=this._style,r=n.getFillColor(!0),i=n.getStrokeColor(!0);r&&r.transform(t),i&&i.transform(t),t.reset()}e||this._changed(5)},fitBounds:function(e,t){e=h.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,s=(t?r>i:r<i)?e.width/n.width:e.height/n.height,o=new h(new u,new f(n.width*s,n.height*s));o.setCenter(e.getCenter()),this.setBounds(o)},_setStyles:function(e){var t=this._style,n=t.getStrokeWidth(),r=t.getStrokeJoin(),i=t.getStrokeCap(),s=t.getMiterLimit(),o=t.getFillColor(),u=t.getStrokeColor(),a=t.getShadowColor();n!=null&&(e.lineWidth=n),r&&(e.lineJoin=r),i&&(e.lineCap=i),s&&(e.miterLimit=s),o&&(e.fillStyle=o.toCanvasStyle(e));if(u){e.strokeStyle=u.toCanvasStyle(e);var f=t.getDashArray(),l=t.getDashOffset();paper.support.nativeDash&&f&&f.length&&("setLineDash"in e?(e.setLineDash(f),e.lineDashOffset=l):(e.mozDash=f,e.mozDashOffset=l))}if(a){e.shadowColor=a.toCanvasStyle(e),e.shadowBlur=t.getShadowBlur();var c=this.getShadowOffset();e.shadowOffsetX=c.x,e.shadowOffsetY=c.y}},draw:function(e,t){if(!this._visible||this._opacity===0)return;this._drawCount=this._project._drawCount;var n=t.transforms,r=n[n.length-1],i=r.clone().concatenate(this._matrix);n.push(this._globalMatrix=i);var s=this._blendMode,o=this._opacity,u=s==="normal",a=Y.nativeModes[s],l=u&&o===1||(a||u&&o<1)&&this._canComposite(),c,h,p;if(!l){var d=this.getStrokeBounds(r);if(!d.width||!d.height)return;p=t.offset,h=t.offset=d.getTopLeft().floor(),c=e,e=G.getContext(d.getSize().ceil().add(new f(1,1)))}e.save(),l?(e.globalAlpha=o,a&&(e.globalCompositeOperation=s)):e.translate(-h.x,-h.y),(l?this._matrix:i).applyToContext(e),!l&&t.clipItem&&t.clipItem.draw(e,t.extend({clip:!0})),this._draw(e,t),e.restore(),n.pop(),t.clip&&e.clip(),l||(Y.process(s,e,c,o,h.subtract(p)),G.release(e),t.offset=p)},_canComposite:function(){return!1}},e.each(["down","drag","up","move"],function(t){this["removeOn"+e.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}})),b=y.extend({_class:"Group",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function at(e){at.base.call(this,e),e&2&&this._transformContent&&!this._matrix.isIdentity()&&this.applyMatrix(),e&258&&delete this._clipItem},_getClipItem:function(){if(this._clipItem!==undefined)return this._clipItem;for(var e=0,t=this._children.length;e<t;e++){var n=this._children[e];if(n._clipMask)return this._clipItem=n}return this._clipItem=null},getTransformContent:function(){return this._transformContent},setTransformContent:function(e){this._transformContent=e,e&&this.applyMatrix()},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_draw:function(e,t){var n=t.clipItem=this._getClipItem();n&&n.draw(e,t.extend({clip:!0}));for(var r=0,i=this._children.length;r<i;r++){var s=this._children[r];s!==n&&s.draw(e,t)}t.clipItem=null}}),w=b.extend({_class:"Layer",initialize:function(){this._project=paper.project,this._index=this._project.layers.push(this)-1,b.apply(this,arguments),this.activate()},_remove:function ft(t){return this._parent?ft.base.call(this,t):this._index!=null?(this._project.activeLayer===this&&(this._project.activeLayer=this.getNextSibling()||this.getPreviousSibling()),e.splice(this._project.layers,null,this._index,1),this._project._needsRedraw=!0,!0):!1},getNextSibling:function lt(){return this._parent?lt.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function ct(){return this._parent?ct.base.call(this):this._project.layers[this._index-1]||null},isInserted:function ht(){return this._parent?ht.base.call(this):this._index!=null},activate:function(){this._project.activeLayer=this},_insert:function pt(t,n,r){return n instanceof w&&!n._parent&&this._remove(!0)?(e.splice(n._project.layers,[this],n._index+(t?1:0),0),this._setProject(n._project),this):pt.base.call(this,t,n,r)}}),E=y.extend({_class:"Shape",_transformContent:!1,initialize:function(t,n,r,i){this._initialize(i,n),this._type=t,this._size=r},getSize:function(){var e=this._size;return new c(e.width,e.height,this,"setSize")},setSize:function(){var e=f.read(arguments);this._size.equals(e)||(this._size.set(e.width,e.height),this._changed(5))},getRadius:function(){var e=this._size;return(e.width+e.height)/4},setRadius:function(e){var t=e*2;this.setSize(t,t)},_draw:function(e,t){var n=this._style,r=this._size,i=r.width,s=r.height,u=n.getFillColor(),a=n.getStrokeColor();if(u||a||t.clip){e.beginPath();switch(this._type){case"rect":e.rect(-i/2,-s/2,i,s);break;case"circle":e.arc(0,0,(i+s)/4,0,Math.PI*2,!0);break;case"ellipse":var f=i/2,l=s/2,c=o.KAPPA,h=f*c,p=l*c;e.moveTo(-f,0),e.bezierCurveTo(-f,-p,-h,-l,0,-l),e.bezierCurveTo(h,-l,f,-p,f,0),e.bezierCurveTo(f,p,h,l,0,l),e.bezierCurveTo(-h,l,-f,p,-f,0)}}!t.clip&&(u||a)&&(this._setStyles(e),u&&e.fill(),a&&e.stroke())},_canComposite:function(){return!this.hasFill()||!this.hasStroke()},_getBounds:function(e,t){var n=(new h(this._size)).setCenter(0,0);return e!=="getBounds"&&this.hasStroke()&&(n=n.expand(this.getStrokeWidth())),t?t._transformBounds(n):n},_contains:function dt(e){switch(this._type){case"rect":return dt.base.call(this,e);case"circle":case"ellipse":return e.divide(this._size).getLength()<=.5}},_hitTest:function vt(e){if(this.hasStroke()){var t=this._type,n=this.getStrokeWidth();switch(t){case"rect":var r=(new h(this._size)).setCenter(0,0),i=r.expand(n),s=r.expand(-n);if(i._containsPoint(e)&&!s._containsPoint(e))return new T("stroke",this);break;case"circle":case"ellipse":var o=this._size,u=o.width,a=o.height,f;if(t==="ellipse"){var l=e.getAngleInRadians(),c=u*Math.sin(l),p=a*Math.cos(l);f=u*a/(2*Math.sqrt(c*c+p*p))}else f=(u+a)/4;if(2*Math.abs(e.getLength()-f)<=n)return new T("stroke",this)}}return vt.base.apply(this,arguments)},statics:new function(){function t(t,n,r,i){return new E(t,n,r,e.getNamed(i))}return{Circle:function(){var n=u.readNamed(arguments,"center"),r=e.readNamed(arguments,"radius");return t("circle",n,new f(r*2),arguments)},Rectangle:function(){var e=h.readNamed(arguments,"rectangle");return t("rect",e.getCenter(!0),e.getSize(!0),arguments)},Ellipse:function(){var e=h.readNamed(arguments,"rectangle");return t("ellipse",e.getCenter(!0),e.getSize(!0),arguments)}}}}),S=y.extend({_class:"Raster",_transformContent:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{source:null},initialize:function(t,n){this._initialize(t,n!==undefined&&u.read(arguments,1))||(t.getContext?this.setCanvas(t):typeof t=="string"?this.setSource(t):this.setImage(t)),this._size||(this._size=new f)},clone:function(e){var t={insert:!1},n=this._image;if(n)t.image=n;else if(this._canvas){var r=t.canvas=G.getCanvas(this._size);r.getContext("2d").drawImage(this._canvas,0,0)}return this._clone(new S(t),e)},getSize:function(){var e=this._size;return new c(e.width,e.height,this,"setSize")},setSize:function(){var e=f.read(arguments);if(!this._size.equals(e)){var t=this.getElement();this.setCanvas(G.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return this._size.width==0&&this._size.height==0},getPpi:function(){var e=this._matrix,t=(new u(0,0)).transform(e),n=(new u(1,0)).transform(e).subtract(t),r=(new u(0,1)).transform(e).subtract(t);return new f(72/n.getLength(),72/r.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&(this._image=null,this._changed(129)),this._context},setContext:function(e){this._context=e},getCanvas:function(){if(!this._canvas){var e=G.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){G.release(e)}}return this._canvas},setCanvas:function(e){this._canvas&&G.release(this._canvas),this._canvas=e,this._size=new f(e.width,e.height),this._image=null,this._context=null,this._changed(133)},getImage:function(){return this._image},setImage:function(e){this._canvas&&G.release(this._canvas),this._image=e,this._size=new f(e.width,e.height),this._canvas=null,this._context=null,this._changed(5)},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(e){function r(){t.fire("load"),t._project.view&&t._project.view.draw(!0)}var t=this,n=document.getElementById(e)||new Image;n.width&&n.height?setTimeout(r,0):n.src||(R.add(n,{load:function(){t.setImage(n),r()}}),n.src=e),this.setImage(n)},getElement:function(){return this._canvas||this._image},getSubImage:function(e){e=h.read(arguments);var t=G.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},toDataURL:function(){var e=this._image&&this._image.src;if(/^data:/.test(e))return e;var t=this.getCanvas();return t?t.toDataURL():null},drawImage:function(e,t){t=u.read(arguments,1),this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(t){var n,r;t?t instanceof A?(r=t,n=t.getBounds()):t.width?n=new h(t):t.x&&(n=new h(t.x-.5,t.y-.5,1,1)):n=this.getBounds();var i=32,s=Math.min(n.width,i),o=Math.min(n.height,i),u=S._sampleContext;u?u.clearRect(0,0,i+1,i+1):u=S._sampleContext=G.getContext(new f(i)),u.save();var a=(new d).scale(s/n.width,o/n.height).translate(-n.x,-n.y);a.applyToContext(u),r&&r.draw(u,e.merge({clip:!0,transforms:[a]})),this._matrix.applyToContext(u),u.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),u.restore();var l=u.getImageData(.5,.5,Math.ceil(s),Math.ceil(o)).data,c=[0,0,0],p=0;for(var v=0,m=l.length;v<m;v+=4){var g=l[v+3];p+=g,g/=255,c[0]+=l[v]*g,c[1]+=l[v+1]*g,c[2]+=l[v+2]*g}for(var v=0;v<3;v++)c[v]/=p;return p?B.read(c):null},getPixel:function(e){e=u.read(arguments);var t=this.getContext().getImageData(e.x,e.y,1,1).data;return new B("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=u.read(arguments),t=B.read(arguments),n=t._convert("rgb"),r=t._alpha,i=this.getContext(!0),s=i.createImageData(1,1),o=s.data;o[0]=n[0]*255,o[1]=n[1]*255,o[2]=n[2]*255,o[3]=r!=null?r*255:255,i.putImageData(s,e.x,e.y)},createImageData:function(e){return e=f.read(arguments),this.getContext().createImageData(e.width,e.height)},getImageData:function(e){return e=h.read(arguments),e.isEmpty()&&(e=new h(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e,t){t=u.read(arguments,1),this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var n=(new h(this._size)).setCenter(0,0);return t?t._transformBounds(n):n},_hitTest:function(e){if(this._contains(e)){var t=this;return new T("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e){var t=this.getElement();t&&(e.globalAlpha=this._opacity,e.drawImage(t,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),x=y.extend({_class:"PlacedSymbol",_transformContent:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==undefined&&u.read(arguments,1))||this.setSymbol(t instanceof g?t:new g(t))},getSymbol:function(){return this._symbol},setSymbol:function(e){this._symbol&&delete this._symbol._instances[this._id],this._symbol=e,e._instances[this._id]=this},clone:function(e){return this._clone(new x({symbol:this.symbol,insert:!1}),e)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(e,t){return this.symbol._definition._getCachedBounds(e,t)},_hitTest:function(e,t,n){var r=this._symbol._definition._hitTest(e,t,n);return r&&(r.item=this),r},_draw:function(e,t){this.symbol._definition.draw(e,t)}}),T=e.extend({_class:"HitResult",initialize:function(t,n,r){this.type=t,this.item=n,r&&(r.enumerable=!0,this.inject(r))},statics:{getOptions:function(t){return t&&t._merged?t:e.merge({type:null,tolerance:paper.project.options.hitTolerance||2,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},t)}}}),N=e.extend({_class:"Segment",initialize:function(t,n,r,i,s,o){var u=arguments.length,a,f,l;u!==0&&(u===1?t.point?(a=t.point,f=t.handleIn,l=t.handleOut):a=t:u<6?u==2&&n.x===undefined?a=[t,n]:(a=t,f=n,l=r):u===6&&(a=[t,n],f=[r,i],l=[s,o])),this._point=new C(a,this),this._handleIn=new C(f,this),this._handleOut=new C(l,this)},_serialize:function(t){return e.serialize(this.isLinear()?this._point:[this._point,this._handleIn,this._handleOut],t,!0)},_changed:function(e){if(!this._path)return;var t=this._path._curves&&this.getCurve(),n;t&&(t._changed(),(n=t[e==this._point||e==this._handleIn&&t._segment1==this?"getPrevious":"getNext"]())&&n._changed()),this._path._changed(5)},getPoint:function(){return this._point},setPoint:function(e){e=u.read(arguments),this._point.set(e.x,e.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(e){e=u.read(arguments),this._handleIn.set(e.x,e.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(e){e=u.read(arguments),this._handleOut.set(e.x,e.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_isSelected:function(e){var t=this._selectionState;return e==this._point?!!(t&4):e==this._handleIn?!!(t&1):e==this._handleOut?!!(t&2):!1},_setSelected:function(e,t){var n=this._path,t=!!t,r=this._selectionState||0,i=[!!(r&4),!!(r&1),!!(r&2)];if(e==this._point){if(t)i[1]=i[2]=!1;else{var s=this.getPrevious(),o=this.getNext();i[1]=s&&(s._point.isSelected()||s._handleOut.isSelected()),i[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}i[0]=t}else{var u=e==this._handleIn?1:2;i[u]!=t&&(t&&(i[0]=!1),i[u]=t)}this._selectionState=(i[0]?4:0)|(i[1]?1:0)|(i[2]?2:0),n&&r!=this._selectionState&&(n._updateSelection(this,r,this._selectionState),n._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(e){this._setSelected(this._point,e)},getIndex:function(){return this._index!==undefined?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(!e._closed&&t==e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new L(e,e.getNext()?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},reverse:function(){return new N(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new N(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},_transformCoordinates:function(e,t,n){var r=this._point,i=!n||!this._handleIn.isZero()?this._handleIn:null,s=!n||!this._handleOut.isZero()?this._handleOut:null,o=r._x,u=r._y,a=2;return t[0]=o,t[1]=u,i&&(t[a++]=i._x+o,t[a++]=i._y+u),s&&(t[a++]=s._x+o,t[a++]=s._y+u),e&&(e._transformCoordinates(t,0,t,0,a/2),o=t[0],u=t[1],n?(r._x=o,r._y=u,a=2,i&&(i._x=t[a++]-o,i._y=t[a++]-u),s&&(s._x=t[a++]-o,s._y=t[a++]-u)):(i||(t[a++]=o,t[a++]=u),s||(t[a++]=o,t[a++]=u))),t}}),C=u.extend({initialize:function(t,n){var r,i,s;t?(r=t[0])!==undefined?i=t[1]:((r=t.x)===undefined&&(t=u.read(arguments),r=t.x),i=t.y,s=t.selected):r=i=0,this._x=r,this._y=i,this._owner=n,s&&this.setSelected(!0)},set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){return o.isZero(this._x)&&o.isZero(this._y)},setSelected:function(e){this._owner._setSelected(this,e)},isSelected:function(){return this._owner._isSelected(this)}}),k=e.extend({_class:"Curve",initialize:function(t,n,r,i,s,o,u,a){var f=arguments.length;if(f===3)this._path=t,this._segment1=n,this._segment2=r;else if(f===0)this._segment1=new N,this._segment2=new N;else if(f===1)this._segment1=new N(t.segment1),this._segment2=new N(t.segment2);else if(f===2)this._segment1=new N(t),this._segment2=new N(n);else{var l,c,h,p;f===4?(l=t,c=n,h=r,p=i):f===8&&(l=[t,n],p=[u,a],c=[r-t,i-n],h=[s-u,o-a]),this._segment1=new N(l,null,c),this._segment2=new N(p,h,null)}},_changed:function(){delete this._length,delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(e){e=u.read(arguments),this._segment1._point.set(e.x,e.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(e){e=u.read(arguments),this._segment2._point.set(e.x,e.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(e){e=u.read(arguments),this._segment1._handleOut.set(e.x,e.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(e){e=u.read(arguments),this._segment2._handleIn.set(e.x,e.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(e){this.getHandle1().setSelected(e),this.getHandle2().setSelected(e)},getValues:function(){return k.getValues(this._segment1,this._segment2)},getPoints:function(){var e=this.getValues(),t=[];for(var n=0;n<8;n+=2)t.push(new u(e[n],e[n+1]));return t},getLength:function(){var e=arguments[0],t=arguments[1],n=arguments.length===0||e===0&&t===1;if(n&&this._length!=null)return this._length;var r=k.getLength(this.getValues(),e,t);return n&&(this._length=r),r},getArea:function(){return k.getArea(this.getValues())},getPart:function(e,t){return new k(k.getPart(this.getValues(),e,t))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getIntersections:function(e){return k.getIntersections(this.getValues(),e.getValues(),this,e,[])},reverse:function(){return new k(this._segment2.reverse(),this._segment1.reverse())},_getParameter:function(e,t){return t?e:e&&e.curve===this?e.parameter:e===undefined&&t===undefined?.5:this.getParameterAt(e,0)},divide:function(e,t){var n=this._getParameter(e,t),r=null;if(n>0&&n<1){var i=k.subdivide(this.getValues(),n),s=this.isLinear(),o=i[0],a=i[1];s||(this._segment1._handleOut.set(o[2]-o[0],o[3]-o[1]),this._segment2._handleIn.set(a[4]-a[6],a[5]-a[7]));var f=o[6],l=o[7],c=new N(new u(f,l),!s&&new u(o[4]-f,o[5]-l),!s&&new u(a[2]-f,a[3]-l));if(this._path)this._segment1._index>0&&this._segment2._index===0?this._path.add(c):this._path.insert(this._segment2._index,c),r=this;else{var h=this._segment2;this._segment2=c,r=new k(c,h)}}return r},split:function(e,t){return this._path?this._path.split(this._segment1._index,this._getParameter(e,t)):null},clone:function(){return new k(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},statics:{getValues:function(e,t){var n=e._point,r=e._handleOut,i=t._handleIn,s=t._point;return[n._x,n._y,n._x+r._x,n._y+r._y,s._x+i._x,s._y+i._y,s._x,s._y]},evaluate:function(e,t,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],f=e[5],l=e[6],c=e[7],h,p;if(n!==0||t!==0&&t!==1){var d=3*(s-r),v=3*(a-s)-d,m=l-r-d-v,g=3*(o-i),y=3*(f-o)-g,b=c-i-g-y;if(n===0)h=((m*t+v)*t+d)*t+r,p=((b*t+y)*t+g)*t+i;else{var w=1e-5;t<w&&s==r&&o==i||t>1-w&&a==l&&f==c?(h=a-s,p=f-o):(h=(3*m*t+2*v)*t+d,p=(3*b*t+2*y)*t+g);if(n===3){var E=6*m*t+2*v,S=6*b*t+2*y;return(h*S-p*E)/Math.pow(h*h+p*p,1.5)}}}else h=t===0?r:l,p=t===0?i:c;return n==2?new u(p,-h):new u(h,p)},subdivide:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f=e[7];t===undefined&&(t=.5);var l=1-t,c=l*n+t*i,h=l*r+t*s,p=l*i+t*o,d=l*s+t*u,v=l*o+t*a,m=l*u+t*f,g=l*c+t*p,y=l*h+t*d,b=l*p+t*v,w=l*d+t*m,E=l*g+t*b,S=l*y+t*w;return[[n,r,c,h,g,y,E,S],[E,S,b,w,v,m,a,f]]},solveCubic:function(e,t,n,r){var i=e[t],s=e[t+2],u=e[t+4],a=e[t+6],f=3*(s-i),l=3*(u-s)-f,c=a-i-f-l;return o.solveCubic(c,l,f,i-n,r)},getParameterOf:function(e,t,n){if(Math.abs(e[0]-t)<1e-5&&Math.abs(e[1]-n)<1e-5)return 0;if(Math.abs(e[6]-t)<1e-5&&Math.abs(e[7]-n)<1e-5)return 1;var r=[],i=[],s=k.solveCubic(e,0,t,r),o=k.solveCubic(e,1,n,i),u,a;for(var f=0;s==-1||f<s;)if(s==-1||(u=r[f++])>=0&&u<=1){for(var l=0;o==-1||l<o;)if(o==-1||(a=i[l++])>=0&&a<=1){s==-1?u=a:o==-1&&(a=u);if(Math.abs(u-a)<1e-5)return(u+a)*.5}if(s==-1)break}return null},getPart:function(e,t,n){return t>0&&(e=k.subdivide(e,t)[1]),n<1&&(e=k.subdivide(e,(n-t)/(1-t))[0]),e},isLinear:function(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f=e[7],l=3*i-2*n-a,c=3*s-2*r-f,h=3*o-2*a-n,p=3*u-2*f-r;return Math.max(l*l,h*h)+Math.max(c*c,p*p)<10*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7];return(3*i*t-1.5*i*s-1.5*i*u-3*n*r-1.5*n*s-.5*n*u+1.5*o*t+1.5*o*r-3*o*u+.5*a*t+1.5*a*r+3*a*s)/10},getBounds:function(e){var t=e.slice(0,2),n=t.slice(),r=[0,0];for(var i=0;i<2;i++)k._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new h(t[0],t[1],n[0]-t[0],n[1]-t[1])},_getCrossings:function(e,t,n,r,i){function f(e){return k.evaluate(t,1,1).y*e.y>0}var s=k.solveCubic(e,1,r,i),o=0,u=1e-5,a=Math.abs;s===-1&&(i[0]=k.getParameterOf(e,n,r),s=i[0]!==null?1:0);for(var l=0;l<s;l++){var c=i[l];if(c>-u&&c<1-u){var h=k.evaluate(e,c,0);if(n<h.x+u){var p=k.evaluate(e,c,1);if(a(h.x-n)<u){var d=p.getAngle();if(d>-180&&d<0&&(c>u||f(p)))continue}else if(a(p.y)<u||c<u&&!f(p))continue;o++}}}return o},_addBounds:function(e,t,n,r,i,s,u,a,f){function l(e,t){var n=e-t,r=e+t;n<u[i]&&(u[i]=n),r>a[i]&&(a[i]=r)}var c=3*(t-n)-e+r,h=2*(e+n)-4*t,p=t-e,d=o.solveQuadratic(c,h,p,f),v=1e-5,m=1-v;l(r,0);for(var g=0;g<d;g++){var y=f[g],b=1-y;v<y&&y<m&&l(b*b*b*e+3*b*b*y*t+3*b*y*y*n+y*y*y*r,s)}}}},e.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=O[e]([this._segment1,this._segment2],!1,this._path.getStyle())),t.clone()}},{}),e.each(["getPoint","getTangent","getNormal","getCurvature"],function(e,t){this[e+"At"]=function(e,n){var r=this.getValues();return k.evaluate(r,n?e:k.getParameterAt(r,e,0),t)},this[e]=function(e){return k.evaluate(this.getValues(),e,t)}},{getParameterAt:function(e,t){return k.getParameterAt(this.getValues(),e,t!==undefined?t:e<0?1:0)},getParameterOf:function(e){return e=u.read(arguments),k.getParameterOf(this.getValues(),e.x,e.y)},getLocationAt:function(e,t){return t||(e=this.getParameterAt(e)),new L(this,e)},getLocationOf:function(e){e=u.read(arguments);var t=this.getParameterOf(e);return t!=null?new L(this,t):null},getNearestLocation:function(e){function a(n){if(n>=0&&n<=1){var r=e.getDistance(k.evaluate(t,n,0),!0);if(r<i)return i=r,s=n,!0}}e=u.read(arguments);var t=this.getValues(),n=100,r=o.TOLERANCE,i=Infinity,s=0;for(var f=0;f<=n;f++)a(f/n);var l=1/(n*2);while(l>r)!a(s-l)&&!a(s+l)&&(l/=2);var c=k.evaluate(t,s,0);return new L(this,s,c,null,null,null,e.getDistance(c))},getNearestPoint:function(e){return e=u.read(arguments),this.getNearestLocation(e).getPoint()}}),new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=9*(r-s)+3*(u-t),l=6*(t+s)-12*r,c=3*(r-t),h=9*(i-o)+3*(a-n),p=6*(n+o)-12*i,d=3*(i-n);return function(e){var t=(f*e+l)*e+c,n=(h*e+p)*e+d;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(Math.abs(t-e)*32)))}return{statics:!0,getLength:function(n,r,i){r===undefined&&(r=0),i===undefined&&(i=1);if(n[0]==n[2]&&n[1]==n[3]&&n[6]==n[4]&&n[7]==n[5]){var s=n[6]-n[0],u=n[7]-n[1];return(i-r)*Math.sqrt(s*s+u*u)}var a=e(n);return o.integrate(a,r,i,t(r,i))},getParameterAt:function(n,r,i){function p(e){var n=t(i,e);return h+=i<e?o.integrate(f,i,e,n):-o.integrate(f,e,i,n),i=e,h-r}if(r===0)return i;var s=r>0,u=s?i:0,a=s?1:i,r=Math.abs(r),f=e(n),l=o.integrate(f,u,a,t(u,a));if(r>=l)return s?a:u;var c=r/l,h=0;return o.findRoot(p,f,s?u+c:a-c,u,a,16,1e-5)}}},new function(){function e(e,t,n,r,i,s,o){var u=e[0],a=e[e.length-1];(!u||!r.equals(u._point))&&(!a||!r.equals(a._point))&&e.push(new L(t,n,r,i,s,o))}function t(r,i,s,o,u,a,f,l){l=(l||0)+1;if(l>20)return;a=a||[0,1],f=f||[0,1];var c=k.getPart(r,a[0],a[1]),h=k.getPart(i,f[0],f[1]),p=0;while(p++<20){var d,v=n(c,h,d=f.slice()),m=0;if(v===0)break;if(v>0){f=d,h=k.getPart(i,f[0],f[1]),m=n(h,c,d=a.slice());if(m===0)break;v>0&&(a=d,c=k.getPart(r,a[0],a[1]))}if(v<0||m<0){if(a[1]-a[0]>f[1]-f[0]){var g=(a[0]+a[1])/2;t(r,i,s,o,u,[a[0],g],f,l),t(r,i,s,o,u,[g,a[1]],f,l);break}var g=(f[0]+f[1])/2;t(r,i,s,o,u,a,[f[0],g],l),t(r,i,s,o,u,a,[g,f[1]],l);break}if(Math.abs(a[1]-a[0])<=1e-5&&Math.abs(f[1]-f[0])<=1e-5){var y=(a[0]+a[1])/2,b=(f[0]+f[1])/2;e(u,s,y,k.evaluate(r,y,0),o,b,k.evaluate(i,b,0));break}}}function n(e,t,n){var i=e[0],s=e[1],o=e[2],u=e[3],a=e[4],f=e[5],l=e[6],c=e[7],h=t[0],p=t[1],d=t[2],m=t[3],g=t[4],y=t[5],b=t[6],w=t[7],E=v.getSignedDistance,S=E(i,s,l,c,o,u)||0,x=E(i,s,l,c,a,f)||0,T=S*x>0?.75:4/9,N=T*Math.min(0,S,x),C=T*Math.max(0,S,x),L=E(i,s,l,c,h,p),A=E(i,s,l,c,d,m),O=E(i,s,l,c,g,y),M=E(i,s,l,c,b,w);if(N>Math.max(L,A,O,M)||C<Math.min(L,A,O,M))return 0;var _=r(L,A,O,M),D;M<L&&(D=N,N=C,C=D);var P=-Infinity,H=Infinity,B=-Infinity;for(var j=0,F=_.length;j<F;j++){var I=_[j],q=_[(j+1)%F];q[1]<I[1]&&(D=q,q=I,I=D);var R=I[0],U=I[1],z=q[0],W=q[1],X=(W-U)/(z-R);if(N>=U&&N<=W){var V=R+(N-U)/X;V<H&&(H=V),V>P&&(P=V)}if(C>=U&&C<=W){var V=R+(C-U)/X;V>B&&(B=V),V<H&&(H=0)}}if(H!==Infinity&&B!==-Infinity){var $=Math.min(N,C),J=Math.max(N,C);M>$&&M<J&&(B=1),L>$&&L<J&&(H=0),P>B&&(B=1);var K=n[0],Q=n[1]-K;n[0]=K+H*Q,n[1]=K+B*Q;if((Q-(n[1]-n[0]))/Q>=.2)return 1}return k.getBounds(e).touches(k.getBounds(t))?-1:0}function r(e,t,n,r){var i=[0,e],s=[1/3,t],o=[2/3,n],u=[1,r],a=v.getSignedDistance,f=a(0,e,1,r,1/3,t),l=a(0,e,1,r,2/3,n);if(f*l<0)return[i,s,u,o];var c,h;return Math.abs(f)>Math.abs(l)?(c=s,h=(r-n-(r-e)/3)*(2*(r-n)-r+t)/3):(c=o,h=(t-e+(e-r)/3)*(-2*(e-t)+e-n)/3),h<0?[i,c,u]:[i,s,o,u]}function i(t,n,r,i,s){var o=k.isLinear(t),u=o?n:t,a=o?t:n,f=a[0],l=a[1],c=a[6],h=a[7],p=c-f,d=h-l,v=Math.atan2(-d,p),m=Math.sin(v),g=Math.cos(v),y=p*g-d*m,b=[];for(var w=0;w<8;w+=2){var E=u[w]-f,S=u[w+1]-l;b.push(E*g-S*m,S*g+E*m)}var x=[],T=k.solveCubic(b,1,0,x);for(var w=0;w<T;w++){var N=x[w];if(N>=0&&N<=1){var C=k.evaluate(b,N,0);C.x>=0&&C.x<=y&&e(s,o?i:r,N,k.evaluate(u,N,0),o?r:i)}}}function s(t,n,r,i,s){var o=v.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(s,r,null,o,i)}return{statics:{getIntersections:function(e,n,r,o,u){var a=k.isLinear(e),f=k.isLinear(n);return(a&&f?s:a||f?i:t)(e,n,r,o,u),u}}}}),L=e.extend({_class:"CurveLocation",initialize:function mt(e,t,n,r,i,s,o){this._id=mt._id=(mt._id||0)+1,this._curve=e,this._segment1=e._segment1,this._segment2=e._segment2,this._parameter=t,this._point=n,this._curve2=r,this._parameter2=i,this._point2=s,this._distance=o},getSegment:function(){if(!this._segment){var e=this.getCurve(),t=this.getParameter();if(t===1)this._segment=e._segment2;else if(t===0||arguments[0])this._segment=e._segment1;else{if(t==null)return null;this._segment=e.getLength(0,t)<e.getLength(t,1)?e._segment1:e._segment2}}return this._segment},getCurve:function(){if(!this._curve||arguments[0])this._curve=this._segment1.getCurve(),this._curve.getParameterOf(this._point)==null&&(this._curve=this._segment2.getPrevious().getCurve());return this._curve},getIntersection:function(){var e=this._intersection;if(!e&&this._curve2){var t=this._parameter2;this._intersection=e=new L(this._curve2,t,this._point2||this._point,this),e._intersection=this}return e},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getOffset:function(){var e=this.getPath();return e&&e._getOffset(this)},getCurveOffset:function(){var e=this.getCurve(),t=this.getParameter();return t!=null&&e&&e.getLength(0,t)},getParameter:function(){if((this._parameter==null||arguments[0])&&this._point){var e=this.getCurve(arguments[0]&&this._point);this._parameter=e&&e.getParameterOf(this._point)}return this._parameter},getPoint:function(){if((!this._point||arguments[0])&&this._parameter!=null){var e=this.getCurve();this._point=e&&e.getPointAt(this._parameter,!0)}return this._point},getTangent:function(){var e=this.getParameter(),t=this.getCurve();return e!=null&&t&&t.getTangentAt(e,!0)},getNormal:function(){var e=this.getParameter(),t=this.getCurve();return e!=null&&t&&t.getNormalAt(e,!0)},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(!0);return e&&e.divide(this.getParameter(!0),!0)},split:function(){var e=this.getCurve(!0);return e&&e.split(this.getParameter(!0),!0)},toString:function(){var e=[],t=this.getPoint(),n=s.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var i=this.getParameter();return i!=null&&e.push("parameter: "+n.number(i)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"}}),A=y.extend({_class:"PathItem",initialize:function(){},getIntersections:function(e){if(!this.getBounds().touches(e.getBounds()))return[];var t=[],n=this.getCurves(),r=e.getCurves(),i=r.length,s=[];for(var o=0;o<i;o++)s[o]=r[o].getValues();for(var o=0,u=n.length;o<u;o++){var a=n[o],f=a.getValues();for(var l=0;l<i;l++)k.getIntersections(f,s[l],a,r[l],t)}return t},setPathData:function(e){function o(e,t,i){var o=parseFloat(n[e]);return r&&(o+=s[t]),i&&(s[t]=o),o}function a(e,t){return new u(o(e,"x",t),o(e+1,"y",t))}var t=e.match(/[a-z][^a-z]*/ig),n,r=!1,i,s=new u;this._type==="path"?this.removeSegments():this.removeChildren();for(var f=0,l=t.length;f<l;f++){var c=t[f],h=c[0],p=h.toLowerCase();n=c.slice(1).trim().split(/[\s,]+|(?=[+-])/),r=h===p;var d=n.length;switch(p){case"m":case"l":for(var v=0;v<d;v+=2)this[v===0&&p==="m"?"moveTo":"lineTo"](a(v,!0));break;case"h":case"v":var m=p=="h"?"x":"y";for(var v=0;v<d;v++)o(v,m,!0),this.lineTo(s);break;case"c":for(var v=0;v<d;v+=6)this.cubicCurveTo(a(v),i=a(v+2),a(v+4,!0));break;case"s":for(var v=0;v<d;v+=4)this.cubicCurveTo(s.multiply(2).subtract(i),i=a(v),a(v+2,!0));break;case"q":for(var v=0;v<d;v+=4)this.quadraticCurveTo(i=a(v),a(v+2,!0));break;case"t":for(var v=0;v<d;v+=2)this.quadraticCurveTo(i=s.multiply(2).subtract(i),a(v,!0));break;case"a":break;case"z":this.closePath()}}},_canComposite:function(){return!this.hasFill()||!this.hasStroke()}}),O=A.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[];var n=Array.isArray(t)?typeof t[0]=="object"?t:arguments:t&&(t.point!==undefined&&t.size===undefined||t.x!==undefined)?arguments:null;this.setSegments(n||[]),this._initialize(!n&&t)},clone:function(e){var t=this._clone(new O({segments:this._segments,insert:!1}),e);return t._closed=this._closed,this._clockwise!==undefined&&(t._clockwise=this._clockwise),t},_changed:function gt(e){gt.base.call(this,e);if(e&4){delete this._length,delete this._clockwise;if(this._curves)for(var t=0,n=this._curves.length;t<n;t++)this._curves[t]._changed(5)}else e&8&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(e){this._selectedSegmentState=0,this._segments.length=0,delete this._curves,this._add(N.readAll(e))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new k(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},getPathData:function(){function i(e,i,s){var o=e._point,u=i._point,a=e._handleOut,f=i._handleIn;if(a.isZero()&&f.isZero())s||r.push("L"+n.point(u,t));else{var l=u.subtract(o);r.push("c"+n.point(a,t)+" "+n.point(l.add(f),t)+" "+n.point(l,t))}}var e=this._segments,t=arguments[0],n=s.instance,r=[];if(e.length===0)return"";r.push("M"+n.point(e[0]._point));for(var o=0,u=e.length-1;o<u;o++)i(e[o],e[o+1],!1);return this._closed&&(i(e[e.length-1],e[0],!0),r.push("z")),r.join("")},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){this._closed=e;if(this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new k(this,this._segments[t-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return this._segments.length===0},isPolygon:function(){for(var e=0,t=this._segments.length;e<t;e++)if(!this._segments[e].isLinear())return!1;return!0},_applyMatrix:function(e){var t=new Array(6);for(var n=0,r=this._segments.length;n<r;n++)this._segments[n]._transformCoordinates(e,t,!0);return!0},_add:function(e,t){var n=this._segments,r=this._curves,i=e.length,s=t==null,t=s?n.length:t,o=this.isFullySelected();for(var u=0;u<i;u++){var a=e[u];a._path&&(a=e[u]=a.clone()),a._path=this,a._index=t+u,o&&(a._selectionState=4),a._selectionState&&this._updateSelection(a,0,a._selectionState)}if(s)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var u=t+i,f=n.length;u<f;u++)n[u]._index=u}if(r||e._curves){r||(r=this._curves=[]);var l=t>0?t-1:t,c=l,h=Math.min(l+i,this._countCurves());e._curves&&(r.splice.apply(r,[l,0].concat(e._curves)),c+=e._curves.length);for(var u=c;u<h;u++)r.splice(u,0,new k(this,null,null));this._adjustCurves(l,h)}return this._changed(5),e},_adjustCurves:function(e,t){var n=this._segments,r=this._curves,i;for(var s=e;s<t;s++)i=r[s],i._path=this,i._segment1=n[s],i._segment2=n[s+1]||n[0];if(i=r[this._closed&&e===0?n.length-1:e-1])i._segment2=n[e]||n[0];if(i=r[t])i._segment1=n[t]},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){return arguments.length>1&&typeof e!="number"?this._add(N.readAll(arguments)):this._add([N.read(arguments)])[0]},insert:function(e,t){return arguments.length>2&&typeof t!="number"?this._add(N.readAll(arguments,1),e):this._add([N.read(arguments,1)],e)[0]},addSegment:function(){return this._add([N.read(arguments)])[0]},insertSegment:function(e){return this._add([N.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(N.readAll(e))},insertSegments:function(e,t){return this._add(N.readAll(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(t,n){t=t||0,n=e.pick(n,this._segments.length);var r=this._segments,i=this._curves,s=r.length,o=r.splice(t,n-t),u=o.length;if(!u)return o;for(var a=0;a<u;a++){var f=o[a];f._selectionState&&this._updateSelection(f,f._selectionState,0),delete f._index,delete f._path}for(var a=t,l=r.length;a<l;a++)r[a]._index=a;if(i){var c=t>0&&n===s+(this._closed?1:0)?t-1:t,i=i.splice(c,u);arguments[2]&&(o._curves=i.slice(1)),this._adjustCurves(c,c)}return this._changed(5),o},isFullySelected:function(){return this._selected&&this._selectedSegmentState==this._segments.length*4},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelected:function yt(e){e||this._selectSegments(!1),yt.base.call(this,e)},_selectSegments:function(e){var t=this._segments.length;this._selectedSegmentState=e?t*4:0;for(var n=0;n<t;n++)this._segments[n]._selectionState=e?4:0},_updateSelection:function(e,t,n){e._selectionState=n;var r=this._selectedSegmentState+=n-t;r>0&&this.setSelected(!0)},flatten:function(e){var t=new _(this),n=0,r=t.length/Math.ceil(t.length/e),i=t.length+(this._closed?-r:r)/2,s=[];while(n<=i)s.push(new N(t.evaluate(n,0))),n+=r;this.setSegments(s)},simplify:function(e){if(this._segments.length>2){var t=new D(this,e||2.5);this.setSegments(t.fit())}},split:function(e,t){if(t===null)return;if(arguments.length===1){var n=e;typeof n=="number"&&(n=this.getLocationAt(n)),e=n.index,t=n.parameter}t>=1&&(e++,t--);var r=this.getCurves();if(e>=0&&e<r.length){t>0&&r[e++].divide(t,!0);var i=this.removeSegments(e,this._segments.length,!0),s;return this._closed?(this.setClosed(!1),s=this):e>0&&(s=this._clone((new O).insertAbove(this,!0))),s._add(i,0),this.addSegment(i[0]),s}return null},isClockwise:function(){return this._clockwise!==undefined?this._clockwise:O.isClockwise(this._segments)},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse(),this._clockwise=e},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}delete this._curves,this._clockwise!==undefined&&(this._clockwise=!this._clockwise)},join:function(e){if(e){var t=e._segments,n=this.getLastSegment(),r=e.getLastSegment();n._point.equals(r._point)&&e.reverse();var i,s=e.getFirstSegment();return n._point.equals(s._point)?(n.setHandleOut(s._handleOut),this._add(t.slice(1))):(i=this.getFirstSegment(),i._point.equals(s._point)&&e.reverse(),r=e.getLastSegment(),i._point.equals(r._point)?(i.setHandleIn(r._handleIn),this._add(t.slice(0,t.length-1),0)):this._add(t.slice())),e.closed&&this._add([t[0]]),e.remove(),i=this.getFirstSegment(),n=this.getLastSegment(),n._point.equals(i._point)&&(i.setHandleIn(n._handleIn),n.remove(),this.setClosed(!0)),this._changed(5),!0}return!1},reduce:function(){return this},getLength:function(){if(this._length==null){var e=this.getCurves();this._length=0;for(var t=0,n=e.length;t<n;t++)this._length+=e[t].getLength()}return this._length},getArea:function(){var e=this.getCurves(),t=0;for(var n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},_getOffset:function(e){var t=e&&e.getIndex();if(t!=null){var n=this.getCurves(),r=0;for(var i=0;i<t;i++)r+=n[i].getLength();var s=n[t];return r+s.getLength(0,e.getParameter())}return null},getLocationOf:function(e){e=u.read(arguments);var t=this.getCurves();for(var n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getLocationAt:function(e,t){var n=this.getCurves(),r=0;if(t){var i=~~e;return n[i].getLocationAt(e-i,!0)}for(var s=0,o=n.length;s<o;s++){var u=r,a=n[s];r+=a.getLength();if(r>=e)return a.getLocationAt(e-u)}return e<=this.getLength()?new L(n[n.length-1],1):null},getPointAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getPoint()},getTangentAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getTangent()},getNormalAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getNormal()},getNearestLocation:function(e){e=u.read(arguments);var t=this.getCurves(),n=Infinity,r=null;for(var i=0,s=t.length;i<s;i++){var o=t[i].getNearestLocation(e);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(e){return e=u.read(arguments),this.getNearestLocation(e).getPoint()},getStyle:function(){var e=this._parent;return(e&&e._type==="compound-path"?e:this)._style},_contains:function(e){var t=this._closed;if(!t&&!this.hasFill()||!this._getBounds("getRoughBounds")._containsPoint(e))return!1;var n=this.getCurves(),r=this._segments,i=0,s=new Array(3),o=(t?n[n.length-1]:new k(r[r.length-1]._point,r[0]._point)).getValues(),u=o;for(var a=0,f=n.length;a<f;a++){var l=n[a].getValues(),c=l[0],h=l[1];if(c!==l[2]||h!==l[3]||c!==l[4]||h!==l[5]||c!==l[6]||h!==l[7])i+=k._getCrossings(l,u,e.x,e.y,s),u=l}return t||(i+=k._getCrossings(o,u,e.x,e.y,s)),(i&1)===1},_hitTest:function(e,t){function d(t,n,r){if(e.getDistance(n)<s)return new T(r,l,{segment:t,point:n})}function v(e,n){var r=e._point;return(n||t.segments)&&d(e,r,"segment")||!n&&t.handles&&(d(e,r.add(e._handleIn),"handle-in")||d(e,r.add(e._handleOut),"handle-out"))}function m(e){c.push(e)}function g(e){var t=c[e],n=c[(e+1)%c.length];return[t.x,t.y,t.x,t.y,n.x,n.y,n.x,n.y]}function y(e){var t=c.length,n=g(t-1),r=new Array(3),i=0;for(var s=0;s<t;s++){var o=g(s);i+=k._getCrossings(o,n,e.x,e.y,r),n=o}return(i&1)===1}function b(t){if(u!=="round"||a!=="round"){c=[],i||t._index>0&&t._index<r.length-1?u!=="round"&&(t._handleIn.isZero()||t._handleOut.isZero())&&O._addSquareJoin(t,u,o,f,m,!0):a!=="round"&&O._addSquareCap(t,a,o,m,!0);if(c.length>0)return y(e)}return e.getDistance(t._point)<=o}var n=this.getStyle(),r=this._segments,i=this._closed,s=t.tolerance||0,o=0,u,a,f,l=this,c,h,p;t.stroke&&n.getStrokeColor()&&(u=n.getStrokeJoin(),a=n.getStrokeCap(),o=n.getStrokeWidth()/2+s,f=o*n.getMiterLimit());if(t.ends&&!t.segments&&!i){if(p=v(r[0],!0)||v(r[r.length-1],!0))return p}else if(t.segments||t.handles)for(var w=0,E=r.length;w<E;w++)if(p=v(r[w]))return p;if(o>0){h=this.getNearestLocation(e);if(h){var S=h.getParameter();S===0||S===1?b(h.getSegment())||(h=null):h._distance>o&&(h=null)}if(!h&&u==="miter")for(var w=0,E=r.length;w<E;w++){var x=r[w];if(e.getDistance(x._point)<=f&&b(x)){h=x.getLocation();break}}}return!h&&t.fill&&this.hasFill()&&this.contains(e)?new T("fill",this):h?new T("stroke",this,{location:h}):null}},new function(){function e(e,t,n,r){function s(t){var n=o[t],r=o[t+1];if(h!=n||p!=r)e.beginPath(),e.moveTo(h,p),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,i,0,Math.PI*2,!0),e.fill()}var i=r/2,o=new Array(6);for(var u=0,a=t.length;u<a;u++){var f=t[u];f._transformCoordinates(n,o,!1);var l=f._selectionState,c=l&4,h=o[0],p=o[1];(c||l&1)&&s(2),(c||l&2)&&s(4),e.save(),e.beginPath(),e.rect(h-i,p-i,r,r),e.fill(),c||(e.beginPath(),e.rect(h-i+1,p-i+1,r-2,r-2),e.fillStyle="#ffffff",e.fill()),e.restore()}}function t(e,t,n){function v(t){var i=r[t];if(n)i._transformCoordinates(n,s,!1),u=s[0],a=s[1];else{var v=i._point;u=v._x,a=v._y}if(o)e.moveTo(u,a),o=!1;else{if(n)c=s[2],h=s[3];else{var m=i._handleIn;c=u+m._x,h=a+m._y}c==u&&h==a&&p==f&&d==l?e.lineTo(u,a):e.bezierCurveTo(p,d,c,h,u,a)}f=u,l=a;if(n)p=s[4],d=s[5];else{var m=i._handleOut;p=f+m._x,d=l+m._y}}var r=t._segments,i=r.length,s=new Array(6),o=!0,u,a,f,l,c,h,p,d;for(var m=0;m<i;m++)v(m);t._closed&&i>1&&v(0)}return{_draw:function(e,n){var r=n.clip,i=n.compound;i||e.beginPath();var s=this.getStyle(),o=s.getFillColor(),u=s.getStrokeColor(),a=s.getDashArray(),f=!paper.support.nativeDash&&u&&a&&a.length;(o||u&&!f||i||r)&&t(e,this),this._closed&&e.closePath();if(!r&&!i&&(o||u)){this._setStyles(e),o&&e.fill();if(u){if(f){e.beginPath();var l=new _(this),c=s.getDashOffset(),h,p=0;while(c<l.length)h=c+a[p++%a.length],l.drawPart(e,c,h),c=h+a[p++%a.length]}e.stroke()}}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,this._project.options.handleSize||4)}}},new function(){function e(e){var t=e.length,n=[],r=[],i=2;n[0]=e[0]/i;for(var s=1;s<t;s++)r[s]=1/i,i=(s<t-1?4:2)-r[s],n[s]=(e[s]-n[s-1])/i;for(var s=1;s<t;s++)n[t-s-1]-=r[t-s]*n[t-s];return n}return{smooth:function(){var t=this._segments,n=t.length,r=n,i;if(n<=2)return;this._closed?(i=Math.min(n,4),r+=Math.min(n,i)*2):i=0;var s=[];for(var o=0;o<n;o++)s[o+i]=t[o]._point;if(this._closed)for(var o=0;o<i;o++)s[o]=t[o+n-i]._point,s[o+n+i]=t[o]._point;else r--;var a=[];for(var o=1;o<r-1;o++)a[o]=4*s[o]._x+2*s[o+1]._x;a[0]=s[0]._x+2*s[1]._x,a[r-1]=3*s[r-1]._x;var f=e(a);for(var o=1;o<r-1;o++)a[o]=4*s[o]._y+2*s[o+1]._y;a[0]=s[0]._y+2*s[1]._y,a[r-1]=3*s[r-1]._y;var l=e(a);if(this._closed){for(var o=0,c=n;o<i;o++,c++){var h=o/i,p=1-h,d=o+i,v=c+i;f[c]=f[o]*h+f[c]*p,l[c]=l[o]*h+l[c]*p,f[v]=f[d]*p+f[v]*h,l[v]=l[d]*p+l[v]*h}r--}var m=null;for(var o=i;o<=r-i;o++){var g=t[o-i];m&&g.setHandleIn(m.subtract(g._point)),o<r&&(g.setHandleOut((new u(f[o],l[o])).subtract(g._point)),o<r-1?m=new u(2*s[o+1]._x-f[o+1],2*s[o+1]._y-l[o+1]):m=new u((s[r]._x+f[r-1])/2,(s[r]._y+l[r-1])/2))}if(this._closed&&m){var g=this._segments[0];g.setHandleIn(m.subtract(g._point))}}}},new function(){function t(e){var t=e._segments;if(t.length==0)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){this._segments.length===1&&this.removeSegment(0),this._segments.length||this._add([new N(u.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new N(u.read(arguments))])},cubicCurveTo:function(){var e=u.read(arguments),n=u.read(arguments),r=u.read(arguments),i=t(this);i.setHandleOut(e.subtract(i._point)),this._add([new N(r,n.subtract(r))])},quadraticCurveTo:function(){var e=u.read(arguments),n=u.read(arguments),r=t(this)._point;this.cubicCurveTo(e.add(r.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var n=u.read(arguments),r=u.read(arguments),i=e.pick(e.read(arguments),.5),s=1-i,o=t(this)._point,a=n.subtract(o.multiply(s*s)).subtract(r.multiply(i*i)).divide(2*i*s);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(a,r)},arcTo:function(n,r){var i=t(this),s=i._point,o,a=u.read(arguments),f=e.pick(e.peek(arguments),!0);if(typeof f=="boolean"){n=a,r=f;var l=s.add(n).divide(2),o=l.add(l.subtract(s).rotate(r?-90:90))}else o=a,n=u.read(arguments);var c=new v(s.add(o).divide(2),o.subtract(s).rotate(90),!0),h=new v(o.add(n).divide(2),n.subtract(o).rotate(90),!0),p=c.intersect(h,!0),d=new v(s,n),m=d.getSide(o);if(!p){if(!m)return this.lineTo(n);throw new Error("Cannot put an arc through the given points: "+[s,o,n])}var g=s.subtract(p),y=g.getDirectedAngle(n.subtract(p)),b=d.getSide(p);b==0?y=m*Math.abs(y):m==b&&(y-=360*(y<0?-1:1));var w=Math.abs(y),E=w>=360?4:Math.ceil(w/90),S=y/E,x=S*Math.PI/360,T=4/3*Math.sin(x)/(1+Math.cos(x)),C=[];for(var k=0;k<=E;k++){var L=k<E?p.add(g):n,A=k<E?g.rotate(90).multiply(T):null;k==0?i.setHandleOut(A):C.push(new N(L,g.rotate(-90).multiply(T),A)),g=g.rotate(S)}this._add(C)},lineBy:function(e){e=u.read(arguments);var n=t(this);this.lineTo(n._point.add(e))},curveBy:function(e,n,r){e=u.read(e),n=u.read(n);var i=t(this)._point;this.curveTo(i.add(e),i.add(n),r)},arcBy:function(e,n){e=u.read(e),n=u.read(n);var r=t(this)._point;this.arcTo(r.add(e),r.add(n))},closePath:function(){var e=this.getFirstSegment(),t=this.getLastSegment();e._point.equals(t._point)&&(e.setHandleIn(t._handleIn),t.remove()),this.setClosed(!0)}}},{_getBounds:function(e,t){return O[e](this._segments,this._closed,this.getStyle(),t)},statics:{isClockwise:function(e){function s(e,s){i&&(t+=(n-e)*(s+r)),n=e,r=s,i=!0}var t=0,n,r,i=!1;for(var o=0,u=e.length;o<u;o++){var a=e[o],f=e[o+1<u?o+1:0],l=a._point,c=a._handleOut,h=f._handleIn,p=f._point;s(l._x,l._y),s(l._x+c._x,l._y+c._y),s(p._x+h._x,p._y+h._y),s(p._x,p._y)}return t>0},getBounds:function(e,t,n,r,i){function c(e){e._transformCoordinates(r,o,!1);for(var t=0;t<2;t++)k._addBounds(u[t],u[t+4],o[t+2],o[t],t,i?i[t]:0,a,f,l);var n=u;u=o,o=n}var s=e[0];if(!s)return new h;var o=new Array(6),u=s._transformCoordinates(r,new Array(6),!1),a=u.slice(0,2),f=a.slice(),l=new Array(2);for(var p=1,d=e.length;p<d;p++)c(e[p]);return t&&c(s),new h(a[0],a[1],f[0]-a[0],f[1]-a[1])},getStrokeBounds:function(e,t,n,r){function i(e,t){if(!t)return[e,e];var n=t.shiftless(),r=n.transform(new u(e,0)),i=n.transform(new u(0,e)),s=r.getAngleInRadians(),o=r.getLength(),a=i.getLength(),f=Math.sin(s),l=Math.cos(s),c=Math.tan(s),h=-Math.atan(a*c/o),p=Math.atan(a/(c*o));return[Math.abs(o*Math.cos(h)*l-a*Math.sin(h)*f),Math.abs(a*Math.sin(p)*l+o*Math.cos(p)*f)]}function m(e){l=l.include(r?r._transformPoint(e,e):e)}function g(e,t){t==="round"||!e._handleIn.isZero()&&!e._handleOut.isZero()?l=l.unite(v.setCenter(r?r._transformPoint(e._point):e._point)):O._addSquareJoin(e,t,o,d,m)}function y(e,t){switch(t){case"round":g(e,t);break;case"butt":case"square":O._addSquareCap(e,t,o,m)}}if(!n.getStrokeColor()||!n.getStrokeWidth())return O.getBounds(e,t,n,r);var s=e.length-(t?0:1),o=n.getStrokeWidth()/2,a=i(o,r),l=O.getBounds(e,t,n,r,a),c=n.getStrokeJoin(),p=n.getStrokeCap(),d=o*n.getMiterLimit(),v=new h((new f(a)).multiply(2));for(var b=1;b<s;b++)g(e[b],c);return t?g(e[0],c):(y(e[0],p),y(e[e.length-1],p)),l},_addSquareJoin:function(e,t,n,r,i,s){var o=e.getCurve(),a=o.getPrevious(),f=o.getPointAt(0,!0),l=a.getNormalAt(1,!0),c=o.getNormalAt(0,!0),h=l.getDirectedAngle(c)<0?-n:n;l.setLength(h),c.setLength(h),s&&(i(f),i(f.add(l)));if(t==="miter"){var p=(new v(f.add(l),new u(-l.y,l.x),!0)).intersect(new v(f.add(c),new u(-c.y,c.x),!0),!0);if(p&&f.getDistance(p)<=r){i(p);if(!s)return}}s||i(f.add(l)),i(f.add(c))},_addSquareCap:function(e,t,n,r,i){var s=e._point,o=e.getLocation(),u=o.getNormal().normalize(n);i&&(r(s.subtract(u)),r(s.add(u))),t==="square"&&(s=s.add(u.rotate(o.getParameter()==0?-90:90))),r(s.add(u)),r(s.subtract(u))},getHandleBounds:function(e,t,n,r,i,s){var o=new Array(6),u=Infinity,a=-u,f=u,l=a;i=i/2||0,s=s/2||0;for(var c=0,p=e.length;c<p;c++){var d=e[c];d._transformCoordinates(r,o,!1);for(var v=0;v<6;v+=2){var m=v==0?s:i,g=o[v],y=o[v+1],b=g-m,w=g+m,E=y-m,S=y+m;b<u&&(u=b),w>a&&(a=w),E<f&&(f=E),S>l&&(l=S)}}return new h(u,f,a-u,l-f)},getRoughBounds:function(e,t,n,r){var i=n.getStrokeColor()?n.getStrokeWidth():0,s=i;return i>0&&(n.getStrokeJoin()==="miter"&&(s=i*n.getMiterLimit()),n.getStrokeCap()==="square"&&(s=Math.max(s,i*Math.sqrt(2)))),O.getHandleBounds(e,t,n,r,i,s)}}});O.inject({statics:new function(){function t(t){return new O(e.getNamed(t))}function n(){var e=h.readNamed(arguments,"rectangle"),n=f.readNamed(arguments,"radius",0,0,{readNull:!0}),i=e.getBottomLeft(!0),s=e.getTopLeft(!0),o=e.getTopRight(!0),u=e.getBottomRight(!0),a=t(arguments);if(!n||n.isZero())a._add([new N(i),new N(s),new N(o),new N(u)]);else{n=f.min(n,e.getSize(!0).divide(2));var l=n.multiply(r*2);a._add([new N(i.add(n.width,0),null,[-l.width,0]),new N(i.subtract(0,n.height),[0,l.height],null),new N(s.add(0,n.height),null,[0,-l.height]),new N(s.add(n.width,0),[-l.width,0],null),new N(o.subtract(n.width,0),null,[l.width,0]),new N(o.add(0,n.height),[0,-l.height],null),new N(u.subtract(0,n.height),null,[0,l.height]),new N(u.subtract(n.width,0),[l.width,0],null)])}return a._closed=!0,a}function s(){var e=h.readNamed(arguments,"rectangle"),n=t(arguments),r=e.getPoint(!0),s=e.getSize(!0),o=new Array(4);for(var u=0;u<4;u++){var a=i[u];o[u]=new N(a._point.multiply(s).add(r),a._handleIn.multiply(s),a._handleOut.multiply(s))}return n._add(o),n._closed=!0,n}var r=o.KAPPA/2,i=[new N([0,.5],[0,r],[0,-r]),new N([.5,0],[-r,0],[r,0]),new N([1,.5],[0,-r],[0,r]),new N([.5,1],[r,0],[-r,0])];return{Line:function(){return(new O(u.readNamed(arguments,"from"),u.readNamed(arguments,"to"))).set(e.getNamed(arguments))},Circle:function(){var t=u.readNamed(arguments,"center"),n=e.readNamed(arguments,"radius");return s(new h(t.subtract(n),new f(n*2,n*2))).set(e.getNamed(arguments))},Rectangle:n,RoundRectangle:n,Ellipse:s,Oval:s,Arc:function(){var e=u.readNamed(arguments,"from"),n=u.readNamed(arguments,"through"),r=u.readNamed(arguments,"to"),i=t(arguments);return i.moveTo(e),i.arcTo(n,r),i},RegularPolygon:function(){var n=u.readNamed(arguments,"center"),r=e.readNamed(arguments,"sides"),i=e.readNamed(arguments,"radius"),s=t(arguments),o=360/r,a=!(r%3),f=new u(0,a?-i:i),l=a?-1:.5,c=new Array(r);for(var h=0;h<r;h++)c[h]=new N(n.add(f.rotate((h+l)*o)));return s._add(c),s._closed=!0,s},Star:function(){var n=u.readNamed(arguments,"center"),r=e.readNamed(arguments,"points")*2,i=e.readNamed(arguments,"radius1"),s=e.readNamed(arguments,"radius2"),o=t(arguments),a=360/r,f=new u(0,-1),l=new Array(r);for(var c=0;c<r;c++)l[c]=new N(n.add(f.rotate(a*c).multiply(c%2?s:i)));return o._add(l),o._closed=!0,o}}}});var M=A.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},insertChildren:function bt(e,t,n){t=bt.base.call(this,e,t,n,"path");for(var r=0,i=!n&&t&&t.length;r<i;r++){var s=t[r];s._clockwise===undefined&&s.setClockwise(s._index===0)}return t},reduce:function(){if(this._children.length==1){var e=this._children[0];return e.insertAbove(this),this.remove(),e}return this},reverse:function(){var e=this._children;for(var t=0,n=e.length;t<n;t++)e[t].reverse()},smooth:function(){for(var e=0,t=this._children.length;e<t;e++)this._children[e].smooth()},isClockwise:function(){var e=this.getFirstChild();return e&&e.isClockwise()},setClockwise:function(e){this.isClockwise()!=!!e&&this.reverse()},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){var e=this._children,t=[];for(var n=0,r=e.length;n<r;n++)t=t.concat(e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getFirstCurve()},getArea:function(){var e=this._children,t=0;for(var n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getPathData:function(){var e=this._children,t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n].getPathData(arguments[0]));return t.join(" ")},_contains:function(e){var t=[];for(var n=0,r=this._children.length;n<r;n++){var i=this._children[n];i.contains(e)&&t.push(i)}return(t.length&1)==1&&t},_hitTest:function wt(t,n){var r=wt.base.call(this,t,e.merge(n,{fill:!1}));return!r&&n.fill&&this.hasFill()&&(r=this._contains(t),r=r?new T("fill",r[0]):null),r},_draw:function(e,t){var n=this._children,r=this._style;if(n.length===0)return;e.beginPath(),t=t.extend({compound:!0});for(var i=0,s=n.length;i<s;i++)n[i].draw(e,t);t.clip||(this._setStyles(e),r.getFillColor()&&e.fill(),r.getStrokeColor()&&e.stroke())}},new function(){function t(e){if(!e._children.length)throw new Error("Use a moveTo() command first");return e._children[e._children.length-1]}var n={moveTo:function(){var e=new O;this.addChild(e),e.moveTo.apply(e,arguments)},moveBy:function(){this.moveTo(t(this).getLastSegment()._point.add(u.read(arguments)))},closePath:function(){t(this).closePath()}};return e.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(e){n[e]=function(){var n=t(this);n[e].apply(n,arguments)}}),n}),_=e.extend({initialize:function(e){function s(e,t){var n=k.getValues(e,t);i.curves.push(n),i._computeParts(n,e._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;var t=e._segments,n=t[0],r,i=this;for(var o=1,u=t.length;o<u;o++)r=t[o],s(n,r),n=r;e._closed&&s(r,t[0])},_computeParts:function(e,t,n,r){if(r-n>1/32&&!k.isFlatEnough(e,.25)){var i=k.subdivide(e),s=(n+r)/2;this._computeParts(i[0],t,n,s),this._computeParts(i[1],t,s,r)}else{var o=e[6]-e[0],u=e[7]-e[1],a=Math.sqrt(o*o+u*u);a>1e-5&&(this.length+=a,this.parts.push({offset:this.length,value:r,index:t}))}},getParameterAt:function(e){var t,n=this.index;for(;;){t=n;if(n==0||this.parts[--n].offset<e)break}for(var r=this.parts.length;t<r;t++){var i=this.parts[t];if(i.offset>=e){this.index=t;var s=this.parts[t-1],o=s&&s.index==i.index?s.value:0,u=s?s.offset:0;return{value:o+(i.value-o)*(e-u)/(i.offset-u),index:i.index}}}var i=this.parts[this.parts.length-1];return{value:1,index:i.index}},evaluate:function(e,t){var n=this.getParameterAt(e);return k.evaluate(this.curves[n.index],n.value,t)},drawPart:function(e,t,n){t=this.getParameterAt(t),n=this.getParameterAt(n);for(var r=t.index;r<=n.index;r++){var i=k.getPart(this.curves[r],r==t.index?t.value:0,r==n.index?n.value:1);r==t.index&&e.moveTo(i[0],i[1]),e.bezierCurveTo.apply(e,i.slice(2))}}}),D=e.extend({initialize:function(e,t){this.points=[];var n=e._segments,r;for(var i=0,s=n.length;i<s;i++){var o=n[i].point.clone();if(!r||!r.equals(o))this.points.push(o),r=o}this.error=t},fit:function(){var e=this.points,t=e.length;return this.segments=t>0?[new N(e[0])]:[],t>1&&this.fitCubic(0,t-1,e[1].subtract(e[0]).normalize(),e[t-2].subtract(e[t-1]).normalize()),this.segments},fitCubic:function(e,t,n,r){if(t-e==1){var i=this.points[e],s=this.points[t],o=i.getDistance(s)/3;this.addCurve([i,i.add(n.normalize(o)),s.add(r.normalize(o)),s]);return}var u=this.chordLengthParameterize(e,t),a=Math.max(this.error,this.error*this.error),f;for(var l=0;l<=4;l++){var c=this.generateBezier(e,t,u,n,r),h=this.findMaxError(e,t,c,u);if(h.error<this.error){this.addCurve(c);return}f=h.index;if(h.error>=a)break;this.reparameterize(e,t,u,c),a=h.error}var p=this.points[f-1].subtract(this.points[f]),d=this.points[f].subtract(this.points[f+1]),v=p.add(d).divide(2).normalize();this.fitCubic(e,f,n,v),this.fitCubic(f,t,v.negate(),r)},addCurve:function(e){var t=this.segments[this.segments.length-1];t.setHandleOut(e[1].subtract(e[0])),this.segments.push(new N(e[3],e[2].subtract(e[3])))},generateBezier:function(e,t,n,r,i){var s=1e-11,o=this.points[e],u=this.points[t],a=[[0,0],[0,0]],f=[0,0];for(var l=0,c=t-e+1;l<c;l++){var h=n[l],p=1-h,d=3*h*p,v=p*p*p,m=d*p,g=d*h,y=h*h*h,b=r.normalize(m),w=i.normalize(g),E=this.points[e+l].subtract(o.multiply(v+m)).subtract(u.multiply(g+y));a[0][0]+=b.dot(b),a[0][1]+=b.dot(w),a[1][0]=a[0][1],a[1][1]+=w.dot(w),f[0]+=b.dot(E),f[1]+=w.dot(E)}var S=a[0][0]*a[1][1]-a[1][0]*a[0][1],x,T;if(Math.abs(S)>s){var N=a[0][0]*f[1]-a[1][0]*f[0],C=f[0]*a[1][1]-f[1]*a[0][1];x=C/S,T=N/S}else{var k=a[0][0]+a[0][1],L=a[1][0]+a[1][1];Math.abs(k)>s?x=T=f[0]/k:Math.abs(L)>s?x=T=f[1]/L:x=T=0}var A=u.getDistance(o);s*=A;if(x<s||T<s)x=T=A/3;return[o,o.add(r.normalize(x)),u.add(i.normalize(T)),u]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e])},findRoot:function(e,t,n){var r=[],i=[];for(var s=0;s<=2;s++)r[s]=e[s+1].subtract(e[s]).multiply(3);for(var s=0;s<=1;s++)i[s]=r[s+1].subtract(r[s]).multiply(2);var o=this.evaluate(3,e,n),u=this.evaluate(2,r,n),a=this.evaluate(1,i,n),f=o.subtract(t),l=u.dot(u)+f.dot(a);return Math.abs(l)<1e-5?n:n-f.dot(u)/l},evaluate:function(e,t,n){var r=t.slice();for(var i=1;i<=e;i++)for(var s=0;s<=e-i;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){var n=[0];for(var r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){var i=Math.floor((t-e+1)/2),s=0;for(var o=e+1;o<t;o++){var u=this.evaluate(3,n,r[o-e]),a=u.subtract(this.points[o]),f=a.x*a.x+a.y*a.y;f>=s&&(s=f,i=o)}return{error:s,index:i}}});A.inject(new function(){function e(e,t){e.sort(function(e,t){var n=e.getPath(),r=t.getPath();return n===r?e.getIndex()+e.getParameter()-(t.getIndex()+t.getParameter()):n._id-r._id});var n=t&&[];for(var r=e.length-1;r>=0;r--){var i=e[r],s=i.getIntersection(),o=i.divide(),u=o&&o.getSegment1()||i.getSegment();n&&n.push(s),u._intersection=s}return n}function t(e){if(e instanceof M){var t=e._children,n=t.length,r=new Array(n),i=new Array(n),s=t[0].isClockwise();for(var o=0;o<n;o++)r[o]=t[o].getBounds(),i[o]=0;for(var o=0;o<n;o++){for(var u=1;u<n;u++)o!==u&&r[o].contains(r[u])&&i[u]++;o>0&&i[o]%2===0&&t[o].setClockwise(s)}}return e}function n(n,i,s,o){n=t(n.clone(!1)),i=t(i.clone(!1));var a=n.isClockwise(),f=i.isClockwise(),l=n.getIntersections(i);e(e(l,!0)),o&&(i.reverse(),f=!f);var c=[].concat(n._children||[n]).concat(i._children||[i]),h=[],p=new M;for(var d=0,v=c.length;d<v;d++){var m=c[d],g=m._parent,y=m.isClockwise(),b=m._segments;m=g instanceof M?g:m;for(var w=b.length-1;w>=0;w--){var E=b[w],S=E.getCurve().getPoint(.5),x=m!==n&&n.contains(S)&&(y===a||o||!r(n,S)),T=m!==i&&i.contains(S)&&(y===f||!r(i,S));s(m===n,x,T)?E._invalid=!0:h.push(E)}}for(var d=0,v=h.length;d<v;d++){var E=h[d];if(E._visited)continue;var m=new O,C=E._intersection,k=C&&C.getSegment(!0);E.getPrevious()._invalid&&E.setHandleIn(k?k._handleIn:new u(0,0));do{E._visited=!0;if(E._invalid&&E._intersection){var L=E._intersection.getSegment(!0);m.add(new N(E._point,E._handleIn,L._handleOut)),L._visited=!0,E=L}else m.add(E.clone());E=E.getNext()}while(E&&!E._visited&&E!==k);var A=m._segments.length;A>1&&(A>2||!m.isPolygon())?(m.setClosed(!0),p.addChild(m,!0)):m.remove()}return n.remove(),i.remove(),p.reduce()}function r(e,t){var n=e.getCurves(),r=e.getBounds();if(r.contains(t))for(var i=0,s=n.length;i<s;i++){var o=n[i];if(o.getBounds().contains(t)&&o.getParameterOf(t))return!0}return!1}return{unite:function(e){return n(this,e,function(e,t,n){return t||n})},intersect:function(e){return n(this,e,function(e,t,n){return!t&&!n})},subtract:function(e){return n(this,e,function(e,t,n){return e&&n||!e&&!t},!0)},exclude:function(e){return new b([this.subtract(e),e.subtract(this)])},divide:function(e){return new b([this.subtract(e),this.intersect(e)])}}});var P=y.extend({_class:"TextItem",_boundsSelected:!0,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(n){this._content="",this._lines=[];var r=n&&e.isPlainObject(n)&&n.x===undefined&&n.y===undefined;this._initialize(r&&n,!r&&u.read(arguments))},_clone:function Et(e){return e.setContent(this._content),Et.base.call(this,e)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(69)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),H=P.extend({_class:"PointText",initialize:function(){P.apply(this,arguments)},clone:function(e){return this._clone(new H({insert:!1}),e)},getPoint:function(){var e=this._matrix.getTranslation();return new a(e.x,e.y,this,"setPoint")},setPoint:function(e){e=u.read(arguments),this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e){if(!this._content)return;this._setStyles(e);var t=this._style,n=this._lines,r=t.getLeading();e.font=t.getFontStyle(),e.textAlign=t.getJustification();for(var i=0,s=n.length;i<s;i++){var o=n[i];t.getFillColor()&&e.fillText(o,0,0),t.getStrokeColor()&&e.strokeText(o,0,0),e.translate(0,r)}}},new function(){var e=null;return{_getBounds:function(t,n){e||(e=G.getContext(1,1));var r=this._style,i=this._lines,s=i.length,o=r.getJustification(),u=r.getLeading(),a=0;e.font=r.getFontStyle();var f=0;for(var l=0;l<s;l++)f=Math.max(f,e.measureText(i[l]).width);o!=="left"&&(a-=f/(o==="center"?2:1));var c=new h(a,s?-0.75*u:0,f,s*u);return n?n._transformBounds(c,c):c}}}),B=e.extend(new function(){function o(e){var t=r[e];if(!t){i||(i=G.getContext(1,1),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=e,i.fillRect(0,0,1,1);var n=i.getImageData(0,0,1,1).data;t=r[e]=[n[0]/255,n[1]/255,n[2]/255]}return t.slice()}function a(e){var t=e.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(t.length>=4){var n=[0,0,0];for(var r=0;r<3;r++){var i=t[r+1];n[r]=parseInt(i.length==1?i+i:i,16)/255}return n}}var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={},i,f=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],l={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),s=r-i,o=s===0?0:(r==e?(t-n)/s+(t<n?6:0):r==t?(n-e)/s+2:(e-t)/s+4)*60;return[o,r===0?0:s/r,r]},"hsb-rgb":function(e,t,n){var e=e/60%6,r=Math.floor(e),i=e-r,r=f[r],s=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[s[r[0]],s[r[1]],s[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),s=r-i,o=s===0,u=o?0:(r==e?(t-n)/s+(t<n?6:0):r==t?(n-e)/s+2:(e-t)/s+4)*60,a=(r+i)/2,f=o?0:a<.5?s/(r+i):s/(2-r-i);return[u,f,a]},"hsl-rgb":function(e,t,n){e/=360;if(t===0)return[n,n,n];var r=[e+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,s=2*n-i,o=[];for(var u=0;u<3;u++){var a=r[u];a<0&&(a+=1),a>1&&(a-=1),o[u]=6*a<1?s+(i-s)*6*a:2*a<1?i:3*a<2?s+(i-s)*(2/3-a)*6:s}return o},"rgb-gray":function(e,t,n){return[e*.2989+t*.587+n*.114]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return e.each(t,function(r,i){n[i]=[],e.each(r,function(r,s){var o=e.capitalize(r),a=/^(hue|saturation)$/.test(r),f=n[i][s]=r==="gradient"?function(e){var t=this._components[0];return e=j.read(Array.isArray(e)?e:arguments,0,0,{readNull:!0}),t!==e&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:r==="hue"?function(e){return isNaN(e)?0:(e%360+360)%360}:i==="gradient"?function(){return u.read(arguments,0,0,{readNull:r==="highlight",clone:!0})}:function(e){return isNaN(e)?0:Math.min(Math.max(e,0),1)};this["get"+o]=function(){return this._type===i||a&&/^hs[bl]$/.test(this._type)?this._components[s]:this._convert(i)[s]},this["set"+o]=function(e){this._type!==i&&(!a||!/^hs[bl]$/.test(this._type))&&(this._components=this._convert(i),this._properties=t[i],this._type=i),e=f.call(this,e),e!=null&&(this._components[s]=e,this._changed())}},this)},{_class:"Color",_readIndex:!0,initialize:function c(e){var r=Array.prototype.slice,i=arguments,s=0,u=!0,f,l,h,p;Array.isArray(e)&&(i=e,e=i[0]);var d=e!=null&&typeof e;d==="string"&&e in t&&(f=e,e=i[1],Array.isArray(e)?(l=e,h=i[2]):(this.__read&&(s=1),i=r.call(i,1),d=typeof e));if(!l){u=!this.__options||!this.__options.dontParse,p=d==="number"?i:d==="object"&&e.length!=null?e:null;if(p){f||(f=p.length>=3?"rgb":"gray");var v=t[f].length;h=p[v],this.__read&&(s+=p===arguments?v+(h!=null?1:0):1),p.length>v&&(p=r.call(p,0,v))}else if(d==="string")l=e.match(/^#[0-9a-f]{3,6}$/i)?a(e):o(e),f="rgb";else if(d==="object")if(e.constructor===c){f=e._type,l=e._components.slice(),h=e._alpha;if(f==="gradient")for(var m=1,g=l.length;m<g;m++){var y=l[m];y&&(l[m]=y.clone())}}else if(e.constructor===j)f="gradient",p=i;else{f="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb";var b=t[f];E=u&&n[f],this._components=l=[];for(var m=0,g=b.length;m<g;m++){var w=e[b[m]];w==null&&m===0&&f==="gradient"&&"stops"in e&&(w={stops:e.stops,radial:e.radial}),u&&(w=E[m].call(this,w)),w!=null&&(l[m]=w)}h=e.alpha}this.__read&&f&&(s=1)}this._type=f||"rgb",f==="gradient"&&(this._id=c._id=(c._id||0)+1);if(!l){this._components=l=[];var E=n[this._type];for(var m=0,g=E.length;m<g;m++){var w=p&&p[m];u&&(w=E[m].call(this,w)),w!=null&&(l[m]=w)}}this._components=l,this._properties=t[this._type],this._alpha=h,this.__read&&(this.__read=s)},_serialize:function(t,n){var r=this.getComponents();return e.serialize(/^(gray|rgb)$/.test(this._type)?r:[this._type].concat(r),t,!0,n)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(17)},clone:function(){return new B(this._type,this._components.slice(),this._alpha)},_convert:function(e){var t;return this._type===e?this._components.slice():(t=l[this._type+"-"+e])?t.apply(this,this._components):l["rgb-"+e].apply(this,l[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new B(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return this._alpha!=null&&e.push(this._alpha),e},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(e){this._alpha=e==null?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(t){return e.isPlainValue(t)&&(t=B.read(arguments)),t===this||t&&this._type===t._type&&this._alpha===t._alpha&&e.equals(this._components,t._components)||!1},toString:function(){var e=this._properties,t=[],n=this._type==="gradient",r=s.instance;for(var i=0,o=e.length;i<o;i++){var u=this._components[i];u!=null&&t.push(e[i]+": "+(n?u:r.number(u)))}return this._alpha!=null&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||this._alpha==null?1:this._alpha;return t=[Math.round(t[0]*255),Math.round(t[1]*255),Math.round(t[2]*255)],n<1&&t.push(n),(t.length==4?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var t=this._components,n=t[0],r=n._stops,i=t[1],s=t[2],o;if(n._radial){var u=s.getDistance(i),a=t[3];if(a){var f=a.subtract(i);f.getLength()>u&&(a=i.add(f.normalize(u-.1)))}var l=a||i;o=e.createRadialGradient(l.x,l.y,0,i.x,i.y,u)}else o=e.createLinearGradient(i.x,i.y,s.x,s.y);for(var c=0,h=r.length;c<h;c++){var p=r[c];o.addColorStop(p._rampPoint,p._color.toCanvasStyle())}return this._canvasStyle=o},transform:function(e){if(this._type==="gradient"){var t=this._components;for(var n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new B(e(),e(),e())}}})},new function(){function t(e,t){return e<0?0:t&&e>360?360:!t&&e>1?1:e}var n={add:function(e,n,r){return t(e+n,r)},subtract:function(e,n,r){return t(e-n,r)},multiply:function(e,n,r){return t(e*n,r)},divide:function(e,n,r){return t(e/n,r)}};return e.each(n,function(e,t){var n={dontParse:/^(multiply|divide)$/.test(t)};this[t]=function(t){t=B.read(arguments,0,0,n);var r=this._type,i=this._properties,s=this._components,o=t._convert(r);for(var u=0,a=s.length;u<a;u++)o[u]=e(s[u],o[u],i[u]==="hue");return new B(r,o,this._alpha!=null?e(this._alpha,t.getAlpha()):null)}},{})});e.each(B._types,function(t,n){var r=this[e.capitalize(n)+"Color"]=function(e){var t=e!=null&&typeof e,r=t==="object"&&e.length!=null?e:t==="string"?null:arguments;return r?new B(n,r):new B(e)};if(n.length==3){var i=n.toUpperCase();B[i]=this[i+"Color"]=r}},e.exports);var j=e.extend({_class:"Gradient",initialize:function St(e,t){this._id=St._id=(St._id||0)+1,e&&this._set(e)&&(e=t=null),this._stops||this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof t=="string"&&t==="radial"||t||!1)},_serialize:function(t,n){return n.add(this,function(){return e.serialize([this._stops,this._radial],t,!0,n)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length===0&&delete this._owners)},clone:function(){var e=[];for(var t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new this.constructor(e)},getStops:function(){return this._stops},setStops:function(e){if(this.stops)for(var t=0,n=this._stops.length;t<n;t++)delete this._stops[t]._owner;if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=F.readAll(e,0,!1,!0);for(var t=0,n=this._stops.length;t<n;t++){var r=this._stops[t];r._owner=this,r._defaultRamp&&r.setRampPoint(t/(n-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e&&e.constructor==this.constructor&&this._stops.length==e._stops.length){for(var t=0,n=this._stops.length;t<n;t++)if(!this._stops[t].equals(e._stops[t]))return!1;return!0}return!1}}),F=e.extend({_class:"GradientStop",initialize:function(t,n){if(t){var r,i;n===undefined&&Array.isArray(t)?(r=t[0],i=t[1]):t.color?(r=t.color,i=t.rampPoint):(r=t,i=n),this.setColor(r),this.setRampPoint(i)}},clone:function(){return new F(this._color.clone(),this._rampPoint)},_serialize:function(t,n){return e.serialize([this._color,this._rampPoint],t,!0,n)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(e){this._defaultRamp=e==null,this._rampPoint=e||0,this._changed()},getColor:function(){return this._color},setColor:function(e){this._color=B.read(arguments),this._color===e&&(this._color=e.clone()),this._color._owner=this,this._changed()},equals:function(e){return e===this||e instanceof F&&this._color.equals(e._color)&&this._rampPoint==e._rampPoint||!1}}),I=e.extend(new function(){var t={fillColor:undefined,strokeColor:undefined,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[],shadowColor:undefined,shadowBlur:0,shadowOffset:new u,selectedColor:undefined,font:"sans-serif",fontSize:12,leading:null,justification:"left"},n={strokeWidth:25,strokeCap:25,strokeJoin:25,miterLimit:25,font:5,fontSize:5,leading:5,justification:5},r={},i={_defaults:t,_textDefaults:e.merge(t,{fillColor:new B})};return e.each(t,function(t,s){var o=/Color$/.test(s),u=e.capitalize(s),a=n[s],f="set"+u,l="get"+u;i[f]=function(e){var t=this._item&&this._item._children;if(t&&t.length>0&&this._item._type!=="compound-path")for(var n=0,r=t.length;n<r;n++)t[n]._style[f](e);else{var i=this._values[s];i!=e&&(o&&(i&&delete i._owner,e&&e.constructor===B&&(e._owner=this._item)),this._values[s]=e,this._item&&this._item._changed(a||17))}},i[l]=function(){var t,n=this._item&&this._item._children;if(!n||n.length===0||arguments[0]||this._item._type==="compound-path"){var t=this._values[s];return t===undefined?(t=this._defaults[s],t&&t.clone&&(t=t.clone()),this._values[s]=t):o&&(!t||t.constructor!==B)&&(this._values[s]=t=B.read([t],0,0,{readNull:!0,clone:!0}),t&&(t._owner=this._item)),t}for(var r=0,i=n.length;r<i;r++){var u=n[r]._style[l]();if(r===0)t=u;else if(!e.equals(t,u))return undefined}return t},r[l]=function(){return this._style[l]()},r[f]=function(e){this._style[f](e)}}),y.inject(r),i},{_class:"Style",initialize:function(t,n){this._values={},this._item=n,n instanceof P&&(this._defaults=this._textDefaults),t&&this.set(t)},set:function(e){var t=e instanceof I,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},getLeading:function xt(){var e=xt.base.call(this);return e!=null?e:this.getFontSize()*1.2},getFontStyle:function(){var e=this.getFontSize();return(/[a-z]/i.test(e)?e+" ":e+"px ")+this.getFont()}}),q=new function(){function i(t,n){var r=[];for(var s=0,o=t&&t.length;s<o;){var u=t[s++];if(typeof u=="string")u=document.createElement(u);else if(!u||!u.nodeType)continue;e.isPlainObject(t[s])&&q.set(u,t[s++]),Array.isArray(t[s])&&i(t[s++],u),n&&n.appendChild(u),r.push(u)}return r}var t=/^(checked|value|selected|disabled)$/i,n={text:"textContent",html:"innerHTML"},r={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(e,t){var n=Array.isArray(e),r=i(n?e:arguments,n?t:null);return r.length==1?r[0]:r},find:function(e,t){return(t||document).querySelector(e)},findAll:function(e,t){return(t||document).querySelectorAll(e)},get:function(e,r){return e?t.test(r)?r==="value"||typeof e[r]!="string"?e[r]:!0:r in n?e[n[r]]:e.getAttribute(r):null},set:function(e,r,i){if(typeof r!="string")for(var s in r)r.hasOwnProperty(s)&&this.set(e,s,r[s]);else{if(!e||i===undefined)return e;t.test(r)?e[r]=i:r in n?e[n[r]]=i:r==="style"?this.setStyle(e,i):r==="events"?R.add(e,i):e.setAttribute(r,i)}return e},getStyles:function(e){var t=e&&e.ownerDocument.defaultView;return t&&t.getComputedStyle(e,"")},getStyle:function(e,t){return e&&e.style[t]||this.getStyles(e)[t]||null},setStyle:function(e,t,n){if(typeof t!="string")for(var i in t)t.hasOwnProperty(i)&&this.setStyle(e,i,t[i]);else/^-?[\d\.]+$/.test(n)&&!(t in r)&&(n+="px"),e.style[t]=n;return e},hasClass:function(e,t){return(new RegExp("\\s*"+t+"\\s*")).test(e.className)},addClass:function(e,t){e.className=(e.className+" "+t).trim()},removeClass:function(e,t){e.className=e.className.replace(new RegExp("\\s*"+t+"\\s*")," ").trim()},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)},removeChildren:function(e){while(e.firstChild)e.removeChild(e.firstChild)},getBounds:function(e,t){var n=e.ownerDocument,r=n.body,i=n.documentElement,s;try{s=e.getBoundingClientRect()}catch(o){s={left:0,top:0,width:0,height:0}}var u=s.left-(i.clientLeft||r.clientLeft||0),a=s.top-(i.clientTop||r.clientTop||0);if(!t){var f=n.defaultView;u+=f.pageXOffset||i.scrollLeft||r.scrollLeft,a+=f.pageYOffset||i.scrollTop||r.scrollTop}return new h(u,a,s.width,s.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new h(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return this.getBounds(e,t).getPoint()},getSize:function(e){return this.getBounds(e,!0).getSize()},isInvisible:function(e){return this.getSize(e).equals(new f(0,0))},isInView:function(e){return!this.isInvisible(e)&&this.getViewportBounds(e).intersects(this.getBounds(e,!0))}}},R={add:function(e,t){for(var n in t){var r=t[n];e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r.bound=function(){r.call(e,window.event)})}},remove:function(e,t){for(var n in t){var r=t[n];e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent&&e.detachEvent("on"+n,r.bound)}},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new u(t.pageX||t.clientX+document.documentElement.scrollLeft,t.pageY||t.clientY+document.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getOffset:function(e,t){return R.getPoint(e).subtract(q.getOffset(t||R.getTarget(e)))},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},stop:function(e){R.stopPropagation(e),R.preventDefault(e)}};R.requestAnimationFrame=new function(){var e="equestAnimationFrame",t=window["r"+e]||window["webkitR"+e]||window["mozR"+e]||window["oR"+e]||window["msR"+e];t&&t(function(e){e==null&&(t=null)});var r=[],i=!0,s;return R.add(window,{focus:function(){i=!0},blur:function(){i=!1}}),function(e,o){if(t)return t(e,o);r.push([e,o]);if(s)return;s=setInterval(function(){for(var e=r.length-1;e>=0;e--){var t=r[e],s=t[0],o=t[1];if(!o||(n.getAttribute(o,"keepalive")=="true"||i)&&q.isInView(o))r.splice(e,1),s(Date.now())}},1e3/60)}};var U=e.extend(t,{_class:"View",initialize:function Tt(e){this._scope=paper,this._project=paper.project,this._element=e;var t;this._id=e.getAttribute("id"),this._id==null&&e.setAttribute("id",this._id="view-"+Tt._id++),R.add(e,this._viewHandlers);if(n.hasAttribute(e,"resize")){var r=q.getOffset(e,!0),i=this;t=q.getViewportBounds(e).getSize().subtract(r),this._windowHandlers={resize:function(){q.isInvisible(e)||(r=q.getOffset(e,!0)),i.setViewSize(q.getViewportBounds(e).getSize().subtract(r))}},R.add(window,this._windowHandlers)}else t=new f(parseInt(e.getAttribute("width"),10),parseInt(e.getAttribute("height"),10)),t.isNaN()&&(t=q.getSize(e));e.width=t.width,e.height=t.height;if(n.hasAttribute(e,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var s=this._stats.domElement,o=s.style,r=q.getOffset(e);o.position="absolute",o.left=r.x+"px",o.top=r.y+"px",document.body.appendChild(s)}Tt._views.push(this),Tt._viewsById[this._id]=this,this._viewSize=new c(t.width,t.height,this,"setViewSize"),this._matrix=new d,this._zoom=1,Tt._focused||(Tt._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(U._focused==this&&(U._focused=null),U._views.splice(U._views.indexOf(this),1),delete U._viewsById[this._id],this._project.view==this&&(this._project.view=null),R.remove(this._element,this._viewHandlers),R.remove(window,this._windowHandlers),this._element=this._project=null,this.detach("frame"),this._frameItems={},!0):!1},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._requestFrame())},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,_requestFrame:function(){var e=this;R.requestAnimationFrame(function(){e._requested=!1;if(!e._animate)return;e._requestFrame(),e._handleFrame()},this._element),this._requested=!0},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,n=this._before?t-this._before:0;this._before=t,this._handlingFrame=!0,this.fire("frame",e.merge({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.draw(!0)},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.attach("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var n in this._frameItems){var r=this._frameItems[n];r.item.fire("frame",e.merge(t,{time:r.time+=t.delta,count:r.count++}))}},_redraw:function(){this._project._needsRedraw=!0;if(this._handlingFrame)return;this._animate?this._handleFrame():this.draw()},_transform:function(e){this._matrix.concatenate(e),this._bounds=null,this._inverse=null,this._redraw()},getElement:function(){return this._element},getViewSize:function(){return this._viewSize},setViewSize:function(e){e=f.read(arguments);var t=e.subtract(this._viewSize);if(t.isZero())return;this._element.width=e.width,this._element.height=e.height,this._viewSize.set(e.width,e.height,!0),this._bounds=null,this.fire("resize",{size:e,delta:t}),this._redraw()},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new h(new u,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize(arguments[0])},getCenter:function(){return this.getBounds().getCenter(arguments[0])},setCenter:function(e){e=u.read(arguments),this.scrollBy(e.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(e){this._transform((new d).scale(e/this._zoom,this.getCenter())),this._zoom=e},isVisible:function(){return q.isInView(this._element)},scrollBy:function(){this._transform((new d).translate(u.read(arguments).negate()))},projectToView:function(){return this._matrix._transformPoint(u.read(arguments))},viewToProject:function(){return this._getInverse()._transformPoint(u.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.inverted()),this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e){return typeof e=="string"&&(e=document.getElementById(e)),new z(e)}}},new function(){function i(e){var t=R.getTarget(e);return t.getAttribute&&U._viewsById[t.getAttribute("id")]}function s(e,t){return e.viewToProject(R.getOffset(t,e._element))}function o(){if(!U._focused||!U._focused.isVisible())for(var e=0,t=U._views.length;e<t;e++){var r=U._views[e];if(r&&r.isVisible()){U._focused=n=r;break}}}function u(t){var n=U._focused=i(t),o=s(n,t);r=!0,n._onMouseDown&&n._onMouseDown(t,o),(e=n._scope._tool)&&e._onHandleEvent("mousedown",o,t),n.draw(!0)}function a(u){var a;r||(a=i(u),a?(t=U._focused,U._focused=n=a):n&&n==U._focused&&(U._focused=t,o()));if(!(a=a||U._focused))return;var f=u&&s(a,u);a._onMouseMove&&a._onMouseMove(u,f),(e=a._scope._tool)&&e._onHandleEvent(r&&e.responds("mousedrag")?"mousedrag":"mousemove",f,u)&&R.stop(u),a.draw(!0)}function f(t){var n=U._focused;if(!n||!r)return;var i=s(n,t);curPoint=null,r=!1,n._onMouseUp&&n._onMouseUp(t,i),e&&e._onHandleEvent("mouseup",i,t)&&R.stop(t),n.draw(!0)}function l(e){r&&R.stop(e)}var e,t,n,r=!1;return R.add(document,{mousemove:a,mouseup:f,touchmove:a,touchend:f,selectstart:l,scroll:o}),R.add(window,{load:o}),{_viewHandlers:{mousedown:u,touchstart:u,selectstart:l},statics:{updateFocus:o}}}),z=U.extend({_class:"CanvasView",initialize:function(t){if(!(t instanceof HTMLCanvasElement)){var n=f.read(arguments,1);n.isZero()&&(n=new f(1024,768)),t=G.getCanvas(n)}this._context=t.getContext("2d"),this._eventCounters={},U.call(this,t)},draw:function(e){if(e&&!this._project._needsRedraw)return!1;var t=this._context,n=this._viewSize;return t.clearRect(0,0,n._width+1,n._height+1),this._project.draw(t,this._matrix),this._project._needsRedraw=!1,!0}},new function(){function f(e,t,n,r,i,s){var o=r,u;while(o){if(o.responds(e)){u||(u=new $(e,t,n,r,i?n.subtract(i):null));if(o.fire(e,u)&&(!s||u._stopped))return!1}o=o.getParent()}return!0}function l(e,t,n,r,i){if(e._eventCounters[t]){var u=e._project,a=u.hitTest(r,{tolerance:u.options.hitTolerance||0,fill:!0,stroke:!0}),l=a&&a.item;if(l)return t==="mousemove"&&l!=s&&(i=r),(t!=="mousemove"||!o)&&f(t,n,r,l,i),l}}var e,t,n,r,i,s,o,u,a;return{_onMouseDown:function(s,f){var c=l(this,"mousedown",s,f);u=i==c&&Date.now()-a<300,r=i=c,e=t=n=f,o=r&&r.responds("mousedrag")},_onMouseUp:function(i,s){var c=l(this,"mouseup",i,s);o&&(t&&!t.equals(s)&&f("mousedrag",i,s,r,t),c!=r&&(n=s,f("mousemove",i,s,c,n))),c===r&&(a=Date.now(),(!u||f("doubleclick",i,e,c))&&f("click",i,e,c),u=!1),r=null,o=!1},_onMouseMove:function(e,i){r&&f("mousedrag",e,i,r,t);var o=l(this,"mousemove",e,i,n);t=n=i,o!==s&&(f("mouseleave",e,i,s),s=o,f("mouseenter",e,i,o))}}}),W=e.extend({_class:"Event",initialize:function(t){this.event=t},preventDefault:function(){this._prevented=!0,R.preventDefault(this.event)},stopPropagation:function(){this._stopped=!0,R.stopPropagation(this.event)},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return V.modifiers}}),X=W.extend({_class:"KeyEvent",initialize:function(t,n,r,i){W.call(this,i),this.type=t?"keydown":"keyup",this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),V=new function(){function o(e,n,r,s){var o=String.fromCharCode(r),u=t[n]||o.toLowerCase(),a=e?"keydown":"keyup",f=U._focused,l=f&&f.isVisible()&&f._scope,c=l&&l._tool;i[u]=e,c&&c.responds(a)&&(c.fire(a,new X(e,u,o,s)),f&&f.draw(!0))}var t={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},n=e.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),r={},i={},s;return R.add(document,{keydown:function(i){var u=i.which||i.keyCode,a=t[u],f;a?((f=e.camelize(a))in n&&(n[f]=!0),r[u]=0,o(!0,u,null,i)):s=u},keypress:function(e){if(s!=null){var t=e.which||e.keyCode;r[s]=t,o(!0,s,t,e),s=null}},keyup:function(i){var s=i.which||i.keyCode,u=t[s],a;u&&(a=e.camelize(u))in n&&(n[a]=!1),r[s]!=null&&(o(!1,s,r[s],i),delete r[s])}}),{modifiers:n,isDown:function(e){return!!i[e]}}},$=W.extend({_class:"MouseEvent",initialize:function(t,n,r,i,s){W.call(this,n),this.type=t,this.point=r,this.target=i,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}});e.extend(t,{_class:"Palette",_events:["onChange"],initialize:function(n,r,i){var s=q.find(".palettejs-panel")||q.find("body").appendChild(q.create("div",{"class":"palettejs-panel"}));this._element=s.appendChild(q.create("table",{"class":"palettejs-pane"})),this._title=n,i||(i={});for(var o in this._components=r){var u=r[o];u instanceof J||(u.value==null&&(u.value=i[o]),u.name=o,u=r[o]=new J(u)),this._element.appendChild(u._element),u._palette=this,i[o]===undefined&&(i[o]=u.value)}this._values=e.each(i,function(t,n){var s=r[n];s&&e.define(i,n,{enumerable:!0,configurable:!0,get:function(){return s._value},set:function(e){s.setValue(e)}})}),window.paper&&paper.palettes.push(this)},reset:function(){for(var e in this._components)this._components[e].reset()},remove:function(){q.remove(this._element)}});var J=e.extend(t,{_class:"Component",_events:["onChange","onClick"],_types:{"boolean":{type:"checkbox",value:"checked"},string:{type:"text"},number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){q.removeChildren(this._inputItem),q.create(e.each(this._options,function(e){this.push("option",{value:e,text:e})},[]),this._inputItem)}}},initialize:function(n){this._type=n.type in this._types?n.type:"options"in n?"list":"onClick"in n?"button":typeof n.value,this._info=this._types[this._type]||{type:this._type};var r=this,i=!1;this._inputItem=q.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){r.setValue(q.get(this,r._info.value||"value")),i&&(r._palette.fire("change",r,r.name,r._value),r.fire("change",r._value))},click:function(){r.fire("click")}}}),this._element=q.create("tr",[this._labelItem=q.create("td"),"td",[this._inputItem]]),e.each(n,function(e,t){this[t]=e},this),this._defaultValue=this._value,i=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(e){this._label=e,q.set(this._labelItem,"text",e+":")},getOptions:function(){return this._options},setOptions:function(e){this._options=e,this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(e){var t=this._info.value||"value";q.set(this._inputItem,t,e),e=q.get(this._inputItem,t),this._value=this._info.number?parseFloat(e,10):e},getRange:function(){return[parseFloat(q.get(this._inputItem,"min")),parseFloat(q.get(this._inputItem,"max"))]},setRange:function(e,t){var n=Array.isArray(e)?e:[e,t];q.set(this._inputItem,{min:n[0],max:n[1]})},getMin:function(){return this.getRange()[0]},setMin:function(e){this.setRange(e,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(e){this.setRange(this.getMin(),e)},getStep:function(){return parseFloat(q.get(this._inputItem,"step"))},setStep:function(e){q.set(this._inputItem,"step",e)},reset:function(){this.setValue(this._defaultValue)}}),K=W.extend({_class:"ToolEvent",_item:null,initialize:function(t,n,r){this.tool=t,this.type=n,this.event=r},_choosePoint:function(e,t){return e?e:t?t.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){var t=e.item,n=t._parent;while(/^(group|compound-path)$/.test(n._type))t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=r.extend({_class:"Tool",_list:"tools",_reference:"_tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){r.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,this._minDistance!=null&&this._maxDistance!=null&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&this._maxDistance!=null&&this._maxDistance<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=e,this._maxDistance=e},_updateEvent:function(e,t,n,r,i,s,o){if(!i){if(n!=null||r!=null){var u=n!=null?n:0,a=t.subtract(this._point),f=a.getLength();if(f<u)return!1;var l=r!=null?r:0;if(l!=0)if(f>l)t=this._point.add(a.normalize(l));else if(o)return!1}if(s&&t.equals(this._point))return!1}this._lastPoint=i&&e=="mousemove"?t:this._point,this._point=t;switch(e){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=i?0:this._count+1,!0},_fireEvent:function(e,t){var n=paper.project._removeSets;if(n){e==="mouseup"&&(n.mousedrag=null);var r=n[e];if(r){for(var i in r){var s=r[i];for(var o in n){var u=n[o];u&&u!=r&&delete u[s._id]}s.remove()}n[e]=null}}return this.responds(e)&&this.fire(e,new K(this,e,t))},_onHandleEvent:function(e,t,n){paper=this._scope;var r=!1;switch(e){case"mousedown":this._updateEvent(e,t,null,null,!0,!1,!1),r=this._fireEvent(e,n);break;case"mousedrag":var i=!1,s=!1;while(this._updateEvent(e,t,this.minDistance,this.maxDistance,!1,i,s))r=this._fireEvent(e,n)||r,i=!0,s=!0;break;case"mouseup":!t.equals(this._point)&&this._updateEvent("mousedrag",t,this.minDistance,this.maxDistance,!1,!1,!1)&&(r=this._fireEvent("mousedrag",n)),this._updateEvent(e,t,null,this.maxDistance,!1,!1,!1),r=this._fireEvent(e,n)||r,this._updateEvent(e,t,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":while(this._updateEvent(e,t,this.minDistance,this.maxDistance,this._firstMove,!0,!1))r=this._fireEvent(e,n)||r,this._firstMove=!1}return r}}),G={canvases:[],getCanvas:function(e,t){var n=t===undefined?e:new f(e,t),r,i=!0;this.canvases.length?r=this.canvases.pop():r=document.createElement("canvas");var s=r.getContext("2d");return s.save(),r.width===n.width&&r.height===n.height?i&&s.clearRect(0,0,n.width+1,n.height+1):(r.width=n.width,r.height=n.height),r},getContext:function(e,t){return this.getCanvas(e,t).getContext("2d")},release:function(e){var t=e.canvas?e.canvas:e;t.getContext("2d").restore(),this.canvases.push(t)}},Y=new function(){function v(e,t,n){return.2989*e+.587*t+.114*n}function m(e,r,i,s){var o=s-v(e,r,i);h=e+o,p=r+o,d=i+o;var s=v(h,p,d),u=t(h,p,d),a=n(h,p,d);if(u<0){var f=s-u;h=s+(h-s)*s/f,p=s+(p-s)*s/f,d=s+(d-s)*s/f}if(a>255){var l=255-s,c=a-s;h=s+(h-s)*l/c,p=s+(p-s)*l/c,d=s+(d-s)*l/c}}function g(e,r,i){return n(e,r,i)-t(e,r,i)}function y(e,r,i,s){var o=[e,r,i],u=n(e,r,i),a=t(e,r,i),f;a=a===e?0:a===r?1:2,u=u===e?0:u===r?1:2,f=t(a,u)===0?n(a,u)===1?2:1:0,o[u]>o[a]?(o[f]=(o[f]-o[a])*s/(o[u]-o[a]),o[u]=s):o[f]=o[u]=0,o[a]=0,h=o[0],p=o[1],d=o[2]}var t=Math.min,n=Math.max,r=Math.abs,i,s,o,u,a,f,l,c,h,p,d,b={multiply:function(){h=a*i/255,p=f*s/255,d=l*o/255},screen:function(){h=a+i-a*i/255,p=f+s-f*s/255,d=l+o-l*o/255},overlay:function(){h=a<128?2*a*i/255:255-2*(255-a)*(255-i)/255,p=f<128?2*f*s/255:255-2*(255-f)*(255-s)/255,d=l<128?2*l*o/255:255-2*(255-l)*(255-o)/255},"soft-light":function(){var e=i*a/255;h=e+a*(255-(255-a)*(255-i)/255-e)/255,e=s*f/255,p=e+f*(255-(255-f)*(255-s)/255-e)/255,e=o*l/255,d=e+l*(255-(255-l)*(255-o)/255-e)/255},"hard-light":function(){h=i<128?2*i*a/255:255-2*(255-i)*(255-a)/255,p=s<128?2*s*f/255:255-2*(255-s)*(255-f)/255,d=o<128?2*o*l/255:255-2*(255-o)*(255-l)/255},"color-dodge":function(){h=a===0?0:i===255?255:t(255,255*a/(255-i)),p=f===0?0:s===255?255:t(255,255*f/(255-s)),d=l===0?0:o===255?255:t(255,255*l/(255-o))},"color-burn":function(){h=a===255?255:i===0?0:n(0,255-(255-a)*255/i),p=f===255?255:s===0?0:n(0,255-(255-f)*255/s),d=l===255?255:o===0?0:n(0,255-(255-l)*255/o)},darken:function(){h=a<i?a:i,p=f<s?f:s,d=l<o?l:o},lighten:function(){h=a>i?a:i,p=f>s?f:s,d=l>o?l:o},difference:function(){h=a-i,h<0&&(h=-h),p=f-s,p<0&&(p=-p),d=l-o,d<0&&(d=-d)},exclusion:function(){h=a+i*(255-a-a)/255,p=f+s*(255-f-f)/255,d=l+o*(255-l-l)/255},hue:function(){y(i,s,o,g(a,f,l)),m(h,p,d,v(a,f,l))},saturation:function(){y(a,f,l,g(i,s,o)),m(h,p,d,v(a,f,l))},luminosity:function(){m(a,f,l,v(i,s,o))},color:function(){m(i,s,o,v(a,f,l))},add:function(){h=t(a+i,255),p=t(f+s,255),d=t(l+o,255)},subtract:function(){h=n(a-i,0),p=n(f-s,0),d=n(l-o,0)},average:function(){h=(a+i)/2,p=(f+s)/2,d=(l+o)/2},negation:function(){h=255-r(255-i-a),p=255-r(255-s-f),d=255-r(255-o-l)}},w=this.nativeModes=e.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){this[e]=!0},{}),E=G.getContext(1,1);e.each(b,function(e,t){E.save();var n=t==="darken",r=!1;E.fillStyle=n?"#300":"#a00",E.fillRect(0,0,1,1),E.globalCompositeOperation=t,E.globalCompositeOperation===t&&(E.fillStyle=n?"#a00":"#300",E.fillRect(0,0,1,1),r=E.getImageData(0,0,1,1).data[0]!==(n?170:51)),w[t]=r,E.restore()}),G.release(E),this.process=function(e,t,n,r,v){var m=t.canvas,g=e==="normal";if(g||w[e])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=r,g||(n.globalCompositeOperation=e),n.drawImage(m,v.x,v.y),n.restore();else{var y=b[e];if(!y)return;var E=n.getImageData(v.x,v.y,m.width,m.height),S=E.data,x=t.getImageData(0,0,m.width,m.height).data;for(var T=0,N=S.length;T<N;T+=4){i=x[T],a=S[T],s=x[T+1],f=S[T+1],o=x[T+2],l=S[T+2],u=x[T+3],c=S[T+3],y();var C=u*r/255,k=1-C;S[T]=C*h+k*a,S[T+1]=C*p+k*f,S[T+2]=C*d+k*l,S[T+3]=u*r+k*c}n.putImageData(E,v.x,v.y)}}},Z=e.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],font:["font-family","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},function(t,n){var r=e.capitalize(n),i=t[2];this[n]={type:t[1],property:n,attribute:t[0],toSVG:i,fromSVG:i&&e.each(i,function(e,t){this[e]=t},{}),get:"get"+r,set:"set"+r}},{}),et={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){function n(e,n){for(var r in n){var i=n[r],s=et[r];typeof i=="number"&&(i=t.number(i)),s?e.setAttributeNS(s,r,i):e.setAttribute(r,i)}return e}function r(e,t){return n(document.createElementNS("http://www.w3.org/2000/svg",e),t)}function u(e,t,n){return e[t]._point.getDistance(e[n]._point)}function a(e,n){var r=e._matrix,i=r.getTranslation(),s={};if(n){r=r.shiftless();var u=r._inverseTransform(i);s.x=u.x,s.y=u.y,i=null}if(r.isIdentity())return s;var a=r.decompose();if(a&&!a.shearing){var f=[],l=a.rotation,c=a.scaling;i&&!i.isZero()&&f.push("translate("+t.point(i)+")"),(!o.isZero(c.x-1)||!o.isZero(c.y-1))&&f.push("scale("+t.point(c)+")"),l&&f.push("rotate("+t.number(l)+")"),s.transform=f.join(" ")}else s.transform="matrix("+r.getValues().join(",")+")";return s}function f(e,t,n,r){var i=n==="rect"?t[1]._point.add(t[2]._point).divide(2):n==="roundrect"?t[3]._point.add(t[4]._point).divide(2):n==="circle"||n==="ellipse"?t[1]._point:null,s=i&&i.subtract(r).getAngle()+90;return o.isZero(s||0)?0:s}function c(e,t){function n(e,n){var r=t[e],i=r.getNext(),s=t[n],o=s.getNext();return r._handleOut.isZero()&&i._handleIn.isZero()&&s._handleOut.isZero()&&o._handleIn.isZero()&&i._point.subtract(r._point).isColinear(o._point.subtract(s._point))}function r(e){var n=t[e],r=n.getNext(),i=n._handleOut,s=r._handleIn,u=o.KAPPA;if(i.isOrthogonal(s)){var a=n._point,f=r._point,l=(new v(a,i,!0)).intersect(new v(f,s,!0),!0);return l&&o.isZero(i.getLength()/l.subtract(a).getLength()-u)&&o.isZero(s.getLength()/l.subtract(f).getLength()-u)}}if(e.isPolygon())return t.length===4&&e._closed&&n(0,2)&&n(1,3)?"rect":t.length===0?"empty":t.length>=3?e._closed?"polygon":"polyline":"line";if(e._closed){if(t.length===8&&r(0)&&r(2)&&r(4)&&r(6)&&n(1,5)&&n(3,7))return"roundrect";if(t.length===4&&r(0)&&r(1)&&r(2)&&r(3))return o.isZero(u(t,0,2)-u(t,1,3))?"circle":"ellipse"}return"path"}function h(e){var t=a(e),i=e._children,s=r("g",t);for(var o=0,u=i.length;o<u;o++){var f=i[o],l=A(f);if(l)if(f.isClipMask()){var c=r("clipPath");c.appendChild(l),k(f,c,"clip"),n(s,{"clip-path":"url(#"+c.id+")"})}else s.appendChild(l)}return s}function p(e){var t=a(e,!0),n=e.getSize();return t.x-=n.width/2,t.y-=n.height/2,t.width=n.width,t.height=n.height,t.href=e.toDataURL(),r("image",t)}function g(e){var n=e._segments,s=e.getPosition(!0),o=c(e,n),a=f(e,n,o,s),h;switch(o){case"empty":return null;case"path":var p=e.getPathData();h=p&&{d:p};break;case"polyline":case"polygon":var v=[];for(i=0,l=n.length;i<l;i++)v.push(t.point(n[i]._point));h={points:v.join(" ")};break;case"rect":var m=u(n,0,3),g=u(n,0,1),y=n[1]._point.rotate(-a,s);h={x:y.x,y:y.y,width:m,height:g};break;case"roundrect":o="rect";var m=u(n,1,6),g=u(n,0,3),b=(m-u(n,0,7))/2,w=(g-u(n,1,2))/2,E=n[3]._point,S=n[4]._point,y=E.subtract(S.subtract(E).normalize(b)).rotate(-a,s);h={x:y.x,y:y.y,width:m,height:g,rx:b,ry:w};break;case"line":var x=n[0]._point,T=n[n.length-1]._point;h={x1:x.x,y1:x.y,x2:T.x,y2:T.y};break;case"circle":var N=u(n,0,2)/2;h={cx:s.x,cy:s.y,r:N};break;case"ellipse":var b=u(n,2,0)/2,w=u(n,3,1)/2;h={cx:s.x,cy:s.y,rx:b,ry:w}}return a&&(h.transform="rotate("+t.number(a)+","+t.point(s)+")",e._gradientMatrix=(new d).rotate(-a,s)),r(o,h)}function b(e){var t=a(e,!0),n=e.getPathData();return n&&(t.d=n),r("path",t)}function w(e){var n=a(e,!0),i=e.getSymbol(),s=C(i,"symbol");return definition=i.getDefinition(),bounds=definition.getBounds(),s||(s=r("symbol",{viewBox:t.rectangle(bounds)}),s.appendChild(A(definition)),k(i,s,"symbol")),n.href="#"+s.id,n.x+=bounds.x,n.y+=bounds.y,n.width=t.number(bounds.width),n.height=t.number(bounds.height),r("use",n)}function E(e,t){var n=C(e,"color");if(!n){var i=e.getGradient(),s=i._radial,o=t._gradientMatrix,u=e.getOrigin().transform(o),a=e.getDestination().transform(o),f;if(s){f={cx:u.x,cy:u.y,r:u.getDistance(a)};var l=e.getHighlight();l&&(l=l.transform(o),f.fx=l.x,f.fy=l.y)}else f={x1:u.x,y1:u.y,x2:a.x,y2:a.y};f.gradientUnits="userSpaceOnUse",n=r((s?"radial":"linear")+"Gradient",f);var c=i._stops;for(var h=0,p=c.length;h<p;h++){var d=c[h],v=d._color,m=v.getAlpha();f={offset:d._rampPoint,"stop-color":v.toCSS(!0)},m<1&&(f["stop-opacity"]=m),n.appendChild(r("stop",f))}k(e,n,"color")}return"url(#"+n.id+")"}function S(e){var t=r("text",a(e,!0));return t.textContent=e._content,t}function T(r,i){var s={},o=r.getParent();return r._name!=null&&(s.id=r._name),e.each(Z,function(n){var i=n.get,u=n.type,a=r[i]();if(!o||!e.equals(o[i](),a)){if(u==="color"&&a!=null){var f=a.getAlpha();f<1&&(s[n.attribute+"-opacity"]=f)}s[n.attribute]=a==null?"none":u==="number"?t.number(a):u==="color"?a.gradient?E(a,r):a.toCSS(!0):u==="array"?a.join(","):u==="lookup"?n.toSVG[a]:a}}),s.opacity===1&&delete s.opacity,r._visibility!=null&&!r._visibility&&(s.visibility="hidden"),delete r._gradientMatrix,n(i,s)}function C(e,t){return N||(N={ids:{},svgs:{}}),e&&N.svgs[t+"-"+e._id]}function k(e,t,n){N||C();var r=N.ids[n]=(N.ids[n]||0)+1;t.id=n+"-"+r,N.svgs[n+"-"+e._id]=t}function L(e,t){if(!N)return e;var n=e.nodeName.toLowerCase()==="svg"&&e,i=null;for(var s in N.svgs)i||(n||(n=r("svg"),n.appendChild(e)),i=n.insertBefore(r("defs"),n.firstChild)),i.appendChild(N.svgs[s]);return N=null,t&&t.asString?(new XMLSerializer).serializeToString(n):n}function A(e){var t=x[e._type],n=t&&t(e,e._type);return n&&e._data&&n.setAttribute("data-paper-data",JSON.stringify(e._data)),n&&T(e,n)}function O(e){t=e&&e.precision?new s(e.precision):s.instance}var t,x={group:h,layer:h,raster:p,path:g,"compound-path":b,"placed-symbol":w,"point-text":S},N;y.inject({exportSVG:function(e){return O(e),L(A(this),e)}}),m.inject({exportSVG:function(e){O(e);var t=this.layers,n=this.view.getSize(),i=r("svg",{x:0,y:0,width:n.width,height:n.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"});for(var s=0,o=t.length;s<o;s++)i.appendChild(A(t[s]));return L(i,e)}})},new function(){function t(e,t,n,r){var i=et[t],s=i?e.getAttributeNS(i,t):e.getAttribute(t);return s==="null"&&(s=null),s==null?r?null:n?"":0:n?s:parseFloat(s)}function n(e,n,r,i){return n=t(e,n,!1,i),r=t(e,r,!1,i),i&&n==null&&r==null?null:new u(n||0,r||0)}function r(e,n,r,i){return n=t(e,n,!1,i),r=t(e,r,!1,i),i&&n==null&&r==null?null:new f(n||0,r||0)}function i(e,t,n){return e==="none"?null:t==="number"?parseFloat(e):t==="array"?e?e.split(/[\s,]+/g).map(parseFloat):[]:t==="color"?N(e)||e:t==="lookup"?n[e]:e}function s(e,t){var n=e.childNodes,r=t==="clippath",i=r?new M:new b,s=i._project,o=s._currentStyle,u=[];r||(i._transformContent=!1,i=x(i,e),s._currentStyle=i._style.clone());for(var a=0,f=n.length;a<f;a++){var l=n[a],c;l.nodeType==1&&(c=C(l))&&(r&&c instanceof M?(u.push.apply(u,c.removeChildren()),c.remove()):c instanceof g||u.push(c))}i.addChildren(u),r&&(i=x(i.reduce(),e)),s._currentStyle=o;if(r||t==="defs")i.remove(),i=null;return i}function o(e,t){var n=new O,r=e.points;n.moveTo(r.getItem(0));for(var i=1,s=r.numberOfItems;i<s;i++)n.lineTo(r.getItem(i));return t==="polygon"&&n.closePath(),n}function a(e){var t=e.getAttribute("d"),n=t.match(/m/gi).length>1?new M:new O;return n.setPathData(t),n}function l(e,r){var i=e.childNodes,s=[];for(var o=0,u=i.length;o<u;o++){var a=i[o];a.nodeType==1&&s.push(x(new F,a))}var f=r==="radialgradient",l=new j(s,f),c,h,p;return f?(c=n(e,"cx","cy"),h=c.add(t(e,"r"),0),p=n(e,"fx","fy",!0)):(c=n(e,"x1","y1"),h=n(e,"x2","y2")),x(new B(l,c,h,p),e),null}function p(e,t,n,r){var i=(r.getAttribute(n)||"").split(/\)\s*/g),s=new d;for(var o=0,u=i.length;o<u;o++){var a=i[o];if(!a)break;var f=a.split("("),l=f[0],c=f[1].split(/[\s,]+/g);for(var h=0,p=c.length;h<p;h++)c[h]=parseFloat(c[h]);switch(l){case"matrix":s.concatenate(new d(c[0],c[2],c[1],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":case"skewY":var t=Math.tan(c[0]*Math.PI/180),v=l=="skewX";s.shear(v?t:0,v?0:t)}}e.transform(s)}function v(e,t,n){var r=e[n==="fill-opacity"?"getFillColor":"getStrokeColor"]();r&&r.setAlpha(parseFloat(t))}function E(t,n,r){var i=t.attributes[n],s=i&&i.value;if(!s){var o=e.camelize(n);s=t.style[o],!s&&r.node[o]!==r.parent[o]&&(s=r.node[o])}return s?s==="none"?null:s:undefined}function x(t,n){var r={node:q.getStyles(n)||{},parent:q.getStyles(n.parentNode)||{}};return e.each(w,function(i,s){var o=E(n,s,r);o!==undefined&&(t=e.pick(i(t,o,s,n,r),t))}),t}function N(e){var t=e&&e.match(/\((?:#|)([^)']+)/);return t&&T[t[1]]}function C(e,t){typeof e=="string"&&(e=(new DOMParser).parseFromString(e,"image/svg+xml"));var n=e.nodeName.toLowerCase(),r=c[n],i=r&&r(e,n),s=e.getAttribute("data-paper-data");return i&&!(i instanceof b)&&(i=x(i,e)),i&&s&&(i._data=JSON.parse(s)),t&&(T={}),i}var c={g:s,svg:s,clippath:s,polygon:o,polyline:o,path:a,lineargradient:l,radialgradient:l,image:function(e){var i=new S(t(e,"href",!0));return i.attach("load",function(){var t=r(e,"width","height");this.setSize(t),this.translate(n(e,"x","y").add(t.divide(2)))}),i},symbol:function(e,t){return new g(s(e,t),!0)},defs:s,use:function(e){var r=(t(e,"href",!0)||"").substring(1),i=T[r],s=n(e,"x","y");return i?i instanceof g?i.place(s):i.clone().translate(s):null},circle:function(e){return new O.Circle(n(e,"cx","cy"),t(e,"r"))},ellipse:function(e){var t=n(e,"cx","cy"),i=r(e,"rx","ry");return new O.Ellipse(new h(t.subtract(i),t.add(i)))},rect:function(e){var t=n(e,"x","y"),i=r(e,"width","height"),s=r(e,"rx","ry");return new O.Rectangle(new h(t,i),s)},line:function(e){return new O.Line(n(e,"x1","y1"),n(e,"x2","y2"))},text:function(e){var t=new H(n(e,"x","y",!1).add(n(e,"dx","dy",!1)));return t.setContent(e.textContent.trim()||""),t}},w=e.merge(e.each(Z,function(e){this[e.attribute]=function(t,n){t[e.set](i(n,e.type,e.fromSVG))}},{}),{id:function(e,t){T[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=N(t);if(n){n=n.clone(),n.setClipMask(!0);if(!(e instanceof b))return new b(n,e);e.insertChild(0,n)}},gradientTransform:p,transform:p,"fill-opacity":v,"stroke-opacity":v,visibility:function(e,t){e.setVisible(t==="visible")},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){var n=t.match(/(.*)%$/);e.setRampPoint(n?n[1]/100:parseFloat(t))},viewBox:function(e,t,n,s,o){var u=new h(i(t,"array")),a=r(s,"width","height",!0);if(e instanceof b){var f=a?u.getSize().divide(a):1,l=(new d).translate(u.getPoint()).scale(f);e.transform(l.inverted())}else if(e instanceof g){a&&u.setSize(a);var c=E(s,"overflow",o)!="visible",p=e._definition;c&&!u.contains(p.getBounds())&&(c=(new O.Rectangle(u)).transform(p._matrix),c.setClipMask(!0),p.addChild(c))}}}),T={};y.inject({importSVG:function(e){return this.addChild(C(e,!0))}}),m.inject({importSVG:function(e){return this.activate(),C(e,!0)}})},paper=new(n.inject(e.merge(e.exports,{enumerable:!0,Base:e,Numerical:o,DomElement:q,DomEvent:R,Key:V}))),typeof define=="function"&&define.amd&&define(paper),paper};paper.PaperScope.prototype.PaperScript=function(root){function _$_(e,t,n){var r=binaryOperators[t];if(e&&e[r]){var i=e[r](n);return t==="!="?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function $_(e,t){var n=unaryOperators[e];if(n&&t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function compile(e){function n(e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i[0]>=e)break;e+=i[1]}return e}function r(t){return e.substring(n(t.range[0]),n(t.range[1]))}function i(r,i){var s=n(r.range[0]),o=n(r.range[1]),u=0;for(var a=t.length-1;a>=0;a--)if(s>t[a][0]){u=a+1;break}t.splice(u,0,[s,i.length-o+s]),e=e.substring(0,s)+i+e.substring(o)}function s(e){if(!e||e.type==="MemberExpression"&&e.computed)return;for(var t in e){if(t==="range")continue;var n=e[t];if(Array.isArray(n))for(var o=0,u=n.length;o<u;o++)s(n[o]);else n&&typeof n=="object"&&s(n)}switch(e&&e.type){case"BinaryExpression":if(e.operator in binaryOperators&&e.left.type!=="Literal"){var a=r(e.left),f=r(e.right);i(e,"_$_("+a+', "'+e.operator+'", '+f+")")}break;case"AssignmentExpression":if(/^.=$/.test(e.operator)&&e.left.type!=="Literal"){var a=r(e.left),f=r(e.right);i(e,a+" = _$_("+a+', "'+e.operator[0]+'", '+f+")")}break;case"UpdateExpression":if(!e.prefix){var l=r(e.argument);i(e,l+" = _$_("+l+', "'+e.operator[0]+'", 1)')}break;case"UnaryExpression":if(e.operator in unaryOperators&&e.argument.type!=="Literal"){var l=r(e.argument);i(e,'$_("'+e.operator+'", '+l+")")}}}var t=[];return s(scope.acorn.parse(e,{ranges:!0})),e}function evaluate(code,scope){paper=scope;var view=scope.project&&scope.project.view,res;with(scope)(function(){var onActivate,onDeactivate,onEditOptions,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize;res=eval(compile(code)),/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&Base.each(paper.Tool.prototype._events,function(key){var value=eval(key);value&&(scope.getTool()[key]=value)}),view&&(view.setOnResize(onResize),view.fire("resize",{size:view.size,delta:new Point}),view.setOnFrame(onFrame),view.draw())}).call(scope);return res}function request(e,t){var n=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){if(n.readyState===4)return evaluate(n.responseText,t)},n.send(null)}function load(){var e=document.getElementsByTagName("script");for(var t=0,n=e.length;t<n;t++){var r=e[t];if(/^text\/(?:x-|)paperscript$/.test(r.type)&&!r.getAttribute("data-paper-ignore")){var i=PaperScope.getAttribute(r,"canvas"),s=PaperScope.get(i)||(new PaperScope(r)).setup(i);r.src?request(r.src,s):evaluate(r.innerHTML,s),r.setAttribute("data-paper-ignore",!0)}}}var Base=paper.Base,PaperScope=paper.PaperScope,exports,define,scope=this;!function(e,t){return"object"==typeof exports&&"object"==typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(t(e.acorn||(e.acorn={})),void 0)}(this,function(e){"use strict";function t(e){ct=e||{};for(var t in vt)Object.prototype.hasOwnProperty.call(ct,t)||(ct[t]=vt[t]);dt=ct.sourceFile||null}function n(e,t){var n=mt(ht,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=gt,r}function r(e){function t(e){if(1==e.length)return n+="return str === "+JSON.stringify(e[0])+";";n+="switch(str){";for(var t=0;t<e.length;++t)n+="case "+JSON.stringify(e[t])+":";n+="return true}return false;"}e=e.split(" ");var n="",r=[];e:for(var i=0;i<e.length;++i){for(var s=0;s<r.length;++s)if(r[s][0].length==e[i].length){r[s].push(e[i]);continue e}r.push([e[i]])}if(r.length>3){r.sort(function(e,t){return t.length-e.length}),n+="switch(str.length){";for(var i=0;i<r.length;++i){var o=r[i];n+="case "+o[0].length+":",t(o)}n+="}"}else t(e);return new Function("str",n)}function i(){this.line=Nt,this.column=gt-Ct}function s(){Nt=1,gt=Ct=0,Tt=!0,f()}function o(e,t){bt=gt,ct.locations&&(Et=new i),St=e,f(),xt=t,Tt=e.beforeExpr}function u(){var e=ct.onComment&&ct.locations&&new i,t=gt,r=ht.indexOf("*/",gt+=2);if(-1===r&&n(gt-2,"Unterminated comment"),gt=r+2,ct.locations){Gn.lastIndex=t;for(var s;(s=Gn.exec(ht))&&s.index<gt;)++Nt,Ct=s.index+s[0].length}ct.onComment&&ct.onComment(!0,ht.slice(t+2,r),t,gt,e,ct.locations&&new i)}function a(){for(var e=gt,t=ct.onComment&&ct.locations&&new i,n=ht.charCodeAt(gt+=2);pt>gt&&10!==n&&13!==n&&8232!==n&&8329!==n;)++gt,n=ht.charCodeAt(gt);ct.onComment&&ct.onComment(!1,ht.slice(e+2,gt),e,gt,t,ct.locations&&new i)}function f(){for(;pt>gt;){var e=ht.charCodeAt(gt);if(32===e)++gt;else if(13===e){++gt;var t=ht.charCodeAt(gt);10===t&&++gt,ct.locations&&(++Nt,Ct=gt)}else if(10===e)++gt,++Nt,Ct=gt;else if(14>e&&e>8)++gt;else if(47===e){var t=ht.charCodeAt(gt+1);if(42===t)u();else{if(47!==t)break;a()}}else if(160===e)++gt;else{if(!(e>=5760&&Xn.test(String.fromCharCode(e))))break;++gt}}}function l(){var e=ht.charCodeAt(gt+1);return e>=48&&57>=e?T(!0):(++gt,o(En))}function c(){var e=ht.charCodeAt(gt+1);return Tt?(++gt,E()):61===e?w(Nn,2):w(xn,1)}function h(){var e=ht.charCodeAt(gt+1);return 61===e?w(Nn,2):w(jn,1)}function p(e){var t=ht.charCodeAt(gt+1);return t===e?w(124===e?An:On,2):61===t?w(Nn,2):w(124===e?Mn:Dn,1)}function d(){var e=ht.charCodeAt(gt+1);return 61===e?w(Nn,2):w(_n,1)}function v(e){var t=ht.charCodeAt(gt+1);return t===e?w(kn,2):61===t?w(Nn,2):w(Cn,1)}function m(e){var t=ht.charCodeAt(gt+1),n=1;return t===e?(n=62===e&&62===ht.charCodeAt(gt+2)?3:2,61===ht.charCodeAt(gt+n)?w(Nn,n+1):w(Bn,n)):(61===t&&(n=61===ht.charCodeAt(gt+2)?3:2),w(Hn,n))}function g(e){var t=ht.charCodeAt(gt+1);return 61===t?w(Pn,61===ht.charCodeAt(gt+2)?3:2):w(61===e?Tn:Ln,1)}function y(e){switch(e){case 46:return l();case 40:return++gt,o(mn);case 41:return++gt,o(gn);case 59:return++gt,o(bn);case 44:return++gt,o(yn);case 91:return++gt,o(hn);case 93:return++gt,o(pn);case 123:return++gt,o(dn);case 125:return++gt,o(vn);case 58:return++gt,o(wn);case 63:return++gt,o(Sn);case 48:var t=ht.charCodeAt(gt+1);if(120===t||88===t)return x();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return T(!1);case 34:case 39:return N(e);case 47:return c(e);case 37:case 42:return h();case 124:case 38:return p(e);case 94:return d();case 43:case 45:return v(e);case 60:case 62:return m(e);case 61:case 33:return g(e);case 126:return w(Ln,1)}return!1}function b(e){if(e?gt=yt+1:yt=gt,ct.locations&&(wt=new i),e)return E();if(gt>=pt)return o(Ft);var t=ht.charCodeAt(gt);if(Yn(t)||92===t)return L();var r=y(t);if(r===!1){var s=String.fromCharCode(t);if("\\"===s||Jn.test(s))return L();n(gt,"Unexpected character '"+s+"'")}return r}function w(e,t){var n=ht.slice(gt,gt+t);gt+=t,o(e,n)}function E(){for(var e,t,r="",i=gt;;){gt>=pt&&n(i,"Unterminated regular expression");var s=ht.charAt(gt);if(Qn.test(s)&&n(i,"Unterminated regular expression"),e)e=!1;else{if("["===s)t=!0;else if("]"===s&&t)t=!1;else if("/"===s&&!t)break;e="\\"===s}++gt}var r=ht.slice(i,gt);++gt;var u=k();return u&&!/^[gmsiy]*$/.test(u)&&n(i,"Invalid regexp flag"),o(Ht,new RegExp(r,u))}function S(e,t){for(var n=gt,r=0,i=0,s=null==t?1/0:t;s>i;++i){var o,u=ht.charCodeAt(gt);if(o=u>=97?u-97+10:u>=65?u-65+10:u>=48&&57>=u?u-48:1/0,o>=e)break;++gt,r=r*e+o}return gt===n||null!=t&&gt-n!==t?null:r}function x(){gt+=2;var e=S(16);return null==e&&n(yt+2,"Expected hexadecimal number"),Yn(ht.charCodeAt(gt))&&n(gt,"Identifier directly after number"),o(Pt,e)}function T(e){var t=gt,r=!1,i=48===ht.charCodeAt(gt);e||null!==S(10)||n(t,"Invalid number"),46===ht.charCodeAt(gt)&&(++gt,S(10),r=!0);var s=ht.charCodeAt(gt);(69===s||101===s)&&(s=ht.charCodeAt(++gt),(43===s||45===s)&&++gt,null===S(10)&&n(t,"Invalid number"),r=!0),Yn(ht.charCodeAt(gt))&&n(gt,"Identifier directly after number");var u,a=ht.slice(t,gt);return r?u=parseFloat(a):i&&1!==a.length?/[89]/.test(a)||_t?n(t,"Invalid number"):u=parseInt(a,8):u=parseInt(a,10),o(Pt,u)}function N(e){gt++;for(var t="";;){gt>=pt&&n(yt,"Unterminated string constant");var r=ht.charCodeAt(gt);if(r===e)return++gt,o(Bt,t);if(92===r){r=ht.charCodeAt(++gt);var i=/^[0-7]+/.exec(ht.slice(gt,gt+3));for(i&&(i=i[0]);i&&parseInt(i,8)>255;)i=i.slice(0,i.length-1);if("0"===i&&(i=null),++gt,i)_t&&n(gt-2,"Octal literal in strict mode"),t+=String.fromCharCode(parseInt(i,8)),gt+=i.length-1;else switch(r){case 110:t+="\n";break;case 114:t+="\r";break;case 120:t+=String.fromCharCode(C(2));break;case 117:t+=String.fromCharCode(C(4));break;case 85:t+=String.fromCharCode(C(8));break;case 116:t+="	";break;case 98:t+="\b";break;case 118:t+="";break;case 102:t+="\f";break;case 48:t+="\0";break;case 13:10===ht.charCodeAt(gt)&&++gt;case 10:ct.locations&&(Ct=gt,++Nt);break;default:t+=String.fromCharCode(r)}}else(13===r||10===r||8232===r||8329===r)&&n(yt,"Unterminated string constant"),t+=String.fromCharCode(r),++gt}}function C(e){var t=S(16,e);return null===t&&n(yt,"Bad character escape sequence"),t}function k(){In=!1;for(var e,t=!0,r=gt;;){var i=ht.charCodeAt(gt);if(Zn(i))In&&(e+=ht.charAt(gt)),++gt;else{if(92!==i)break;In||(e=ht.slice(r,gt)),In=!0,117!=ht.charCodeAt(++gt)&&n(gt,"Expecting Unicode escape sequence \\uXXXX"),++gt;var s=C(4),o=String.fromCharCode(s);o||n(gt-1,"Invalid Unicode escape"),(t?Yn(s):Zn(s))||n(gt-4,"Invalid Unicode escape"),e+=o}t=!1}return In?e:ht.slice(r,gt)}function L(){var e=k(),t=jt;return In||(Wn(e)?t=cn[e]:(ct.forbidReserved&&(3===ct.ecmaVersion?qn:Rn)(e)||_t&&Un(e))&&n(yt,"The keyword '"+e+"' is reserved")),o(t,e)}function A(){kt=yt,Lt=bt,At=Et,b()}function O(e){for(_t=e,gt=Lt;Ct>gt;)Ct=ht.lastIndexOf("\n",Ct-2)+1,--Nt;f(),b()}function M(){this.type=null,this.start=yt,this.end=null}function _(){this.start=wt,this.end=null,null!==dt&&(this.source=dt)}function D(){var e=new M;return ct.locations&&(e.loc=new _),ct.ranges&&(e.range=[yt,0]),e}function P(e){var t=new M;return t.start=e.start,ct.locations&&(t.loc=new _,t.loc.start=e.loc.start),ct.ranges&&(t.range=[e.range[0],0]),t}function H(e,t){return e.type=t,e.end=Lt,ct.locations&&(e.loc.end=At),ct.ranges&&(e.range[1]=Lt),e}function B(e){return ct.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function j(e){return St===e?(A(),!0):void 0}function F(){return!ct.strictSemicolons&&(St===Ft||St===vn||Qn.test(ht.slice(Lt,yt)))}function I(){j(bn)||F()||R()}function q(e){St===e?A():R()}function R(){n(yt,"Unexpected token")}function U(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&n(e.start,"Assigning to rvalue"),_t&&"Identifier"===e.type&&zn(e.name)&&n(e.start,"Assigning to "+e.name+" in strict mode")}function z(e){kt=Lt=gt,ct.locations&&(At=new i),Ot=_t=null,Mt=[],b();var t=e||D(),n=!0;for(e||(t.body=[]);St!==Ft;){var r=W();t.body.push(r),n&&B(r)&&O(!0),n=!1}return H(t,"Program")}function W(){St===xn&&b(!0);var e=St,t=D();switch(e){case It:case Ut:A();var r=e===It;j(bn)||F()?t.label=null:St!==jt?R():(t.label=lt(),I());for(var i=0;i<Mt.length;++i){var s=Mt[i];if(null==t.label||s.name===t.label.name){if(!(null==s.kind||!r&&"loop"!==s.kind))break;if(t.label&&r)break}}return i===Mt.length&&n(t.start,"Unsyntactic "+e.keyword),H(t,r?"BreakStatement":"ContinueStatement");case zt:return A(),I(),H(t,"DebuggerStatement");case Xt:return A(),Mt.push(er),t.body=W(),Mt.pop(),q(nn),t.test=X(),I(),H(t,"DoWhileStatement");case Jt:if(A(),Mt.push(er),q(mn),St===bn)return $(t,null);if(St===tn){var o=D();return A(),K(o,!0),1===o.declarations.length&&j(ln)?J(t,o):$(t,o)}var o=Q(!1,!0);return j(ln)?(U(o),J(t,o)):$(t,o);case Kt:return A(),at(t,!0);case Qt:return A(),t.test=X(),t.consequent=W(),t.alternate=j(Vt)?W():null,H(t,"IfStatement");case Gt:return Ot||n(yt,"'return' outside of function"),A(),j(bn)||F()?t.argument=null:(t.argument=Q(),I()),H(t,"ReturnStatement");case Yt:A(),t.discriminant=X(),t.cases=[],q(dn),Mt.push(tr);for(var u,a;St!=vn;)if(St===qt||St===Wt){var f=St===qt;u&&H(u,"SwitchCase"),t.cases.push(u=D()),u.consequent=[],A(),f?u.test=Q():(a&&n(kt,"Multiple default clauses"),a=!0,u.test=null),q(wn)}else u||R(),u.consequent.push(W());return u&&H(u,"SwitchCase"),A(),Mt.pop(),H(t,"SwitchStatement");case Zt:return A(),Qn.test(ht.slice(Lt,yt))&&n(Lt,"Illegal newline after throw"),t.argument=Q(),I(),H(t,"ThrowStatement");case en:if(A(),t.block=V(),t.handler=null,St===Rt){var l=D();A(),q(mn),l.param=lt(),_t&&zn(l.param.name)&&n(l.param.start,"Binding "+l.param.name+" in strict mode"),q(gn),l.guard=null,l.body=V(),t.handler=H(l,"CatchClause")}return t.guardedHandlers=Dt,t.finalizer=j($t)?V():null,t.handler||t.finalizer||n(t.start,"Missing catch or finally clause"),H(t,"TryStatement");case tn:return A(),t=K(t),I(),t;case nn:return A(),t.test=X(),Mt.push(er),t.body=W(),Mt.pop(),H(t,"WhileStatement");case rn:return _t&&n(yt,"'with' in strict mode"),A(),t.object=X(),t.body=W(),H(t,"WithStatement");case dn:return V();case bn:return A(),H(t,"EmptyStatement");default:var c=xt,h=Q();if(e===jt&&"Identifier"===h.type&&j(wn)){for(var i=0;i<Mt.length;++i)Mt[i].name===c&&n(h.start,"Label '"+c+"' is already declared");var p=St.isLoop?"loop":St===Yt?"switch":null;return Mt.push({name:c,kind:p}),t.body=W(),Mt.pop(),t.label=h,H(t,"LabeledStatement")}return t.expression=h,I(),H(t,"ExpressionStatement")}}function X(){q(mn);var e=Q();return q(gn),e}function V(e){var t,n=D(),r=!0,i=!1;for(n.body=[],q(dn);!j(vn);){var s=W();n.body.push(s),r&&e&&B(s)&&(t=i,O(i=!0)),r=!1}return i&&!t&&O(!1),H(n,"BlockStatement")}function $(e,t){return e.init=t,q(bn),e.test=St===bn?null:Q(),q(bn),e.update=St===gn?null:Q(),q(gn),e.body=W(),Mt.pop(),H(e,"ForStatement")}function J(e,t){return e.left=t,e.right=Q(),q(gn),e.body=W(),Mt.pop(),H(e,"ForInStatement")}function K(e,t){for(e.declarations=[],e.kind="var";;){var r=D();if(r.id=lt(),_t&&zn(r.id.name)&&n(r.id.start,"Binding "+r.id.name+" in strict mode"),r.init=j(Tn)?Q(!0,t):null,e.declarations.push(H(r,"VariableDeclarator")),!j(yn))break}return H(e,"VariableDeclaration")}function Q(e,t){var n=G(t);if(!e&&St===yn){var r=P(n);for(r.expressions=[n];j(yn);)r.expressions.push(G(t));return H(r,"SequenceExpression")}return n}function G(e){var t=Y(e);if(St.isAssign){var n=P(t);return n.operator=xt,n.left=t,A(),n.right=G(e),U(t),H(n,"AssignmentExpression")}return t}function Y(e){var t=Z(e);if(j(Sn)){var n=P(t);return n.test=t,n.consequent=Q(!0),q(wn),n.alternate=Q(!0,e),H(n,"ConditionalExpression")}return t}function Z(e){return et(tt(),-1,e)}function et(e,t,n){var r=St.binop;if(null!=r&&(!n||St!==ln)&&r>t){var i=P(e);i.left=e,i.operator=xt,A(),i.right=et(tt(),r,n);var i=H(i,/&&|\|\|/.test(i.operator)?"LogicalExpression":"BinaryExpression");return et(i,t,n)}return e}function tt(){if(St.prefix){var e=D(),t=St.isUpdate;return e.operator=xt,e.prefix=!0,A(),e.argument=tt(),t?U(e.argument):_t&&"delete"===e.operator&&"Identifier"===e.argument.type&&n(e.start,"Deleting local variable in strict mode"),H(e,t?"UpdateExpression":"UnaryExpression")}for(var r=nt();St.postfix&&!F();){var e=P(r);e.operator=xt,e.prefix=!1,e.argument=r,U(r),A(),r=H(e,"UpdateExpression")}return r}function nt(){return rt(it())}function rt(e,t){if(j(En)){var n=P(e);return n.object=e,n.property=lt(!0),n.computed=!1,rt(H(n,"MemberExpression"),t)}if(j(hn)){var n=P(e);return n.object=e,n.property=Q(),n.computed=!0,q(pn),rt(H(n,"MemberExpression"),t)}if(!t&&j(mn)){var n=P(e);return n.callee=e,n.arguments=ft(gn,!1),rt(H(n,"CallExpression"),t)}return e}function it(){switch(St){case on:var e=D();return A(),H(e,"ThisExpression");case jt:return lt();case Pt:case Bt:case Ht:var e=D();return e.value=xt,e.raw=ht.slice(yt,bt),A(),H(e,"Literal");case un:case an:case fn:var e=D();return e.value=St.atomValue,e.raw=St.keyword,A(),H(e,"Literal");case mn:var t=wt,n=yt;A();var r=Q();return r.start=n,r.end=bt,ct.locations&&(r.loc.start=t,r.loc.end=Et),ct.ranges&&(r.range=[n,bt]),q(gn),r;case hn:var e=D();return A(),e.elements=ft(pn,!0,!0),H(e,"ArrayExpression");case dn:return ot();case Kt:var e=D();return A(),at(e,!1);case sn:return st();default:R()}}function st(){var e=D();return A(),e.callee=rt(it(),!0),e.arguments=j(mn)?ft(gn,!1):Dt,H(e,"NewExpression")}function ot(){var e=D(),t=!0,r=!1;for(e.properties=[],A();!j(vn);){if(t)t=!1;else if(q(yn),ct.allowTrailingCommas&&j(vn))break;var i,s={key:ut()},o=!1;if(j(wn)?(s.value=Q(!0),i=s.kind="init"):ct.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=r=!0,i=s.kind=s.key.name,s.key=ut(),St!==mn&&R(),s.value=at(D(),!1)):R(),"Identifier"===s.key.type&&(_t||r))for(var u=0;u<e.properties.length;++u){var a=e.properties[u];if(a.key.name===s.key.name){var f=i==a.kind||o&&"init"===a.kind||"init"===i&&("get"===a.kind||"set"===a.kind);f&&!_t&&"init"===i&&"init"===a.kind&&(f=!1),f&&n(s.key.start,"Redefinition of property")}}e.properties.push(s)}return H(e,"ObjectExpression")}function ut(){return St===Pt||St===Bt?it():lt(!0)}function at(e,t){St===jt?e.id=lt():t?R():e.id=null,e.params=[];var r=!0;for(q(mn);!j(gn);)r?r=!1:q(yn),e.params.push(lt());var i=Ot,s=Mt;if(Ot=!0,Mt=[],e.body=V(!0),Ot=i,Mt=s,_t||e.body.body.length&&B(e.body.body[0]))for(var o=e.id?-1:0;o<e.params.length;++o){var u=0>o?e.id:e.params[o];if((Un(u.name)||zn(u.name))&&n(u.start,"Defining '"+u.name+"' in strict mode"),o>=0)for(var a=0;o>a;++a)u.name===e.params[a].name&&n(u.start,"Argument name clash in strict mode")}return H(e,t?"FunctionDeclaration":"FunctionExpression")}function ft(e,t,n){for(var r=[],i=!0;!j(e);){if(i)i=!1;else if(q(yn),t&&ct.allowTrailingCommas&&j(e))break;n&&St===yn?r.push(null):r.push(Q(!0))}return r}function lt(e){var t=D();return t.name=St===jt?xt:e&&!ct.forbidReserved&&St.keyword||R(),A(),H(t,"Identifier")}e.version="0.3.2";var ct,ht,pt,dt;e.parse=function(e,n){return ht=String(e),pt=ht.length,t(n),s(),z(ct.program)};var vt=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},mt=e.getLineInfo=function(e,t){for(var n=1,r=0;;){Gn.lastIndex=r;var i=Gn.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};e.tokenize=function(e,n){function r(e){return b(e),i.start=yt,i.end=bt,i.startLoc=wt,i.endLoc=Et,i.type=St,i.value=xt,i}ht=String(e),pt=ht.length,t(n),s();var i={};return r.jumpTo=function(e,t){if(gt=e,ct.locations){Nt=1,Ct=Gn.lastIndex=0;for(var n;(n=Gn.exec(ht))&&n.index<e;)++Nt,Ct=n.index+n[0].length}Tt=t,f()},r};var gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt=[],Pt={type:"num"},Ht={type:"regexp"},Bt={type:"string"},jt={type:"name"},Ft={type:"eof"},It={keyword:"break"},qt={keyword:"case",beforeExpr:!0},Rt={keyword:"catch"},Ut={keyword:"continue"},zt={keyword:"debugger"},Wt={keyword:"default"},Xt={keyword:"do",isLoop:!0},Vt={keyword:"else",beforeExpr:!0},$t={keyword:"finally"},Jt={keyword:"for",isLoop:!0},Kt={keyword:"function"},Qt={keyword:"if"},Gt={keyword:"return",beforeExpr:!0},Yt={keyword:"switch"},Zt={keyword:"throw",beforeExpr:!0},en={keyword:"try"},tn={keyword:"var"},nn={keyword:"while",isLoop:!0},rn={keyword:"with"},sn={keyword:"new",beforeExpr:!0},on={keyword:"this"},un={keyword:"null",atomValue:null},an={keyword:"true",atomValue:!0},fn={keyword:"false",atomValue:!1},ln={keyword:"in",binop:7,beforeExpr:!0},cn={"break":It,"case":qt,"catch":Rt,"continue":Ut,"debugger":zt,"default":Wt,"do":Xt,"else":Vt,"finally":$t,"for":Jt,"function":Kt,"if":Qt,"return":Gt,"switch":Yt,"throw":Zt,"try":en,"var":tn,"while":nn,"with":rn,"null":un,"true":an,"false":fn,"new":sn,"in":ln,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":on,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},hn={type:"[",beforeExpr:!0},pn={type:"]"},dn={type:"{",beforeExpr:!0},vn={type:"}"},mn={type:"(",beforeExpr:!0},gn={type:")"},yn={type:",",beforeExpr:!0},bn={type:";",beforeExpr:!0},wn={type:":",beforeExpr:!0},En={type:"."},Sn={type:"?",beforeExpr:!0},xn={binop:10,beforeExpr:!0},Tn={isAssign:!0,beforeExpr:!0},Nn={isAssign:!0,beforeExpr:!0},Cn={binop:9,prefix:!0,beforeExpr:!0},kn={postfix:!0,prefix:!0,isUpdate:!0},Ln={prefix:!0,beforeExpr:!0},An={binop:1,beforeExpr:!0},On={binop:2,beforeExpr:!0},Mn={binop:3,beforeExpr:!0},_n={binop:4,beforeExpr:!0},Dn={binop:5,beforeExpr:!0},Pn={binop:6,beforeExpr:!0},Hn={binop:7,beforeExpr:!0},Bn={binop:8,beforeExpr:!0},jn={binop:10,beforeExpr:!0};e.tokTypes={bracketL:hn,bracketR:pn,braceL:dn,braceR:vn,parenL:mn,parenR:gn,comma:yn,semi:bn,colon:wn,dot:En,question:Sn,slash:xn,eq:Tn,name:jt,eof:Ft,num:Pt,regexp:Ht,string:Bt};for(var Fn in cn)e.tokTypes["_"+Fn]=cn[Fn];var In,qn=r("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Rn=r("class enum extends super const export import"),Un=r("implements interface let package private protected public static yield"),zn=r("eval arguments"),Wn=r("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Xn=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,Vn="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",$n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Jn=new RegExp("["+Vn+"]"),Kn=new RegExp("["+Vn+$n+"]"),Qn=/[\n\r\u2028\u2029]/,Gn=/\r\n|[\n\r\u2028\u2029]/g,Yn=e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&Jn.test(String.fromCharCode(e))},Zn=e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&Kn.test(String.fromCharCode(e))},er={kind:"loop"},tr={kind:"switch"}});var binaryOperators={"+":"_add","-":"_subtract","*":"_multiply","/":"_divide","%":"_modulo","==":"equals","!=":"equals"},unaryOperators={"-":"_negate","+":null},fields=Base.each("add,subtract,multiply,divide,modulo,negate".split(","),function(e){this["_"+e]="#"+e},{});return paper.Point.inject(fields),paper.Size.inject(fields),paper.Color.inject(fields),document.readyState==="complete"?setTimeout(load):paper.DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load}}(this),"use strict";var TWEEN=TWEEN||function(){var e=[];return{REVISION:"10",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){t=e.indexOf(t),-1!==t&&e.splice(t,1)},update:function(t){if(0===e.length)return!1;for(var n=0,r=e.length,t=void 0!==t?t:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();n<r;)e[n].update(t)?n++:(e.splice(n,1),r--);return!0}}}();TWEEN.Tween=function(e){var t={},n={},r={},i=1e3,s=0,o=0,u=null,a=TWEEN.Easing.Linear.None,f=TWEEN.Interpolation.Linear,l=[],c=null,h=!1,p=null,d=null,v;for(v in e)t[v]=parseFloat(e[v],10);this.to=function(e,t){return void 0!==t&&(i=t),n=e,this},this.start=function(i){TWEEN.add(this),h=!1,u=void 0!==i?i:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),u+=o;for(var s in n){if(n[s]instanceof Array){if(0===n[s].length)continue;n[s]=[e[s]].concat(n[s])}t[s]=e[s],0==t[s]instanceof Array&&(t[s]*=1),r[s]=t[s]||0}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(e){return o=e,this},this.repeat=function(e){return s=e,this},this.easing=function(e){return a=e,this},this.interpolation=function(e){return f=e,this},this.chain=function(){return l=arguments,this},this.onStart=function(e){return c=e,this},this.onUpdate=function(e){return p=e,this},this.onComplete=function(e){return d=e,this},this.update=function(v){if(v<u)return!0;!1===h&&(null!==c&&c.call(e),h=!0);var m=(v-u)/i,m=1<m?1:m,y=a(m),w;for(w in n){var E=t[w]||0,S=n[w];S instanceof Array?e[w]=f(S,y):("string"==typeof S&&(S=E+parseFloat(S,10)),e[w]=E+(S-E)*y)}null!==p&&p.call(e,y);if(1==m){if(!(0<s)){null!==d&&d.call(e),m=0;for(y=l.length;m<y;m++)l[m].start(v);return!1}isFinite(s)&&s--;for(w in r)"string"==typeof n[w]&&(r[w]+=parseFloat(n[w],10)),t[w]=r[w];u=v+o}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-0.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4)))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4):.5*n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4)+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=TWEEN.Interpolation.Utils.Linear;return 0>t?s(e[0],e[1],r):1<t?s(e[n],e[n-1],n-r):s(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){var n=0,r=e.length-1,i=Math.pow,s=TWEEN.Interpolation.Utils.Bernstein,o;for(o=0;o<=r;o++)n+=i(1-t,r-o)*i(t,o)*e[o]*s(r,o);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>t&&(i=Math.floor(r=n*(1+t))),s(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):0>t?e[0]-(s(e[0],e[0],e[1],e[1],-r)-e[0]):1<t?e[n]-(s(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):s(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1,r;if(e[t])return e[t];for(r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,n,r,i){var e=.5*(n-e),r=.5*(r-t),s=i*i;return(2*t-2*n+e+r)*i*s+(-3*t+3*n-2*e-r)*s+e*i+t}}},!function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.1";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(null==t?x.identity:t);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i=null;return function(){var s=this,o=arguments,u=function(){i=null,n||(r=e.apply(s,o))},a=n&&!i;return clearTimeout(i),i=setTimeout(u,t),a&&(r=e.apply(s,o)),r}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){t.isFunction(r[e])&&r[e].apply(r,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views),r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){"use strict";var r={};return r.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;t.isObject(e)&&!t.isFunction(e)&&(r=e.context,e=e.callback),this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),r.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),r.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,r){var s=this.storage.getCommands(e);n.each(s.instances,function(e){t.apply(r,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,r=e.storageType||this.storageType;t=n.isFunction(r)?new r:r,this.storage=t}})}(r),r.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(r),r.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),r}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,n){"use strict";function r(e){return o.call(e)}function i(e,t){var n=Error(e);throw n.name=t||"Error",n}var s={};t.Marionette=s,s.$=t.$;var o=Array.prototype.slice;return s.extend=t.Model.extend,s.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},s.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,r=function(r){var i="on"+r.replace(t,e),s=this[i];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(s)?s.apply(this,n.tail(arguments)):void 0};return r}(),s.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,r(e)}function t(e){e._isRendered=!0,r(e)}function r(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,r,s){var o=s.split(/\s+/);n.each(o,function(n){var s=e[n];s||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,r,s,e)})}function r(e,t,n,r){e.listenTo(t,n,r,e)}function s(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i,e)})}function o(e,t,n,r){e.stopListening(t,n,r,e)}function u(e,t,r,i,s){t&&r&&(n.isFunction(r)&&(r=r.call(e)),n.each(r,function(r,o){n.isFunction(r)?i(e,t,o,r):s(e,t,o,r)}))}e.bindEntityEvents=function(e,n,i){u(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){u(e,t,n,o,s)}}(s),s.Callbacks=function(){this._deferred=s.$.Deferred(),this._callbacks=[]},n.extend(s.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,r){t&&(n=t),e.call(n,r)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=s.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.triggerMethod=s.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,n.extend(s.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),s.Region=function(e){if(this.options=e||{},this.el=s.getOption(this,"el"),!this.el){var t=Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(s.Region,{buildRegion:function(e,t){var r="string"==typeof e,i="string"==typeof e.selector,s=e.regionType===void 0,o="function"==typeof e;if(!o&&!r&&!i)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var u,a;r&&(u=e),e.selector&&(u=e.selector),o&&(a=e),!o&&s&&(a=t),e.regionType&&(a=e.regionType);var f=new a({el:u});return e.parentEl&&(f.getEl=function(t){var r=e.parentEl;return n.isFunction(r)&&(r=r()),r.find(t)}),f}}),n.extend(s.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),r=e!==this.currentView;r&&this.close(),e.render(),(r||t)&&this.open(e),this.currentView=e,s.triggerMethod.call(this,"show",e),s.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return s.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),s.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),s.Region.extend=s.extend,s.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var r={};return n.each(e,function(e,i){"string"==typeof e&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(i,e);r[i]=s},this),r},addRegion:function(t,r){var i,s=n.isObject(r),o=n.isString(r),u=!!r.selector;return i=o||s&&u?e.Region.buildRegion(r,e.Region):n.isFunction(r)?e.Region.buildRegion(r,e.Region):r,this._store(t,i),this.triggerMethod("region:add",t,i),i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(r,function(e){t.prototype[e]=function(){var t=n.values(this._regions),r=[t].concat(n.toArray(arguments));return n[e].apply(n,r)}}),t}(s),s.TemplateCache=function(e){this.templateId=e},n.extend(s.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new s.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=r(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=s.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),s.Renderer={render:function(e,t){if(!e){var n=Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var r;return r="function"==typeof e?e:s.TemplateCache.get(e),r(t)}},s.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:s.triggerMethod,getTemplate:function(){return s.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=s.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),s.bindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.bindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var r={},i=this.configureTriggers();n.extend(r,e,i),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),s.unbindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.unbindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),s.ItemView=s.View.extend({constructor:function(){s.View.prototype.constructor.apply(this,r(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=s.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,r(arguments)),this.triggerMethod("item:closed"))}}),s.CollectionView=s.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,r(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){s.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=s.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var e=s.getOption(this,"itemView");return e||i("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,r){var i=s.getOption(this,"itemViewOptions");n.isFunction(i)&&(i=i.call(this,e,r));var o=this.buildItemView(e,t,i);this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,r),this._isShown&&s.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o)},addChildViewEventForwarding:function(e){var t=s.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=r(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),s.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(e,t){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,r(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.prototype.constructor.apply(this,r(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var e=s.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return s.Renderer.render(t,e)},appendHtml:function(e,t){var n=this.getItemViewContainer(e);n.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,r=s.getOption(e,"itemViewContainer");if(r){var o=n.isFunction(r)?r():r;t=e.$(o),0>=t.length&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),s.Layout=s.ItemView.extend({regionType:s.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=s.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);s.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={regionType:s.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new s.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),s.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,r(arguments)),this.options=e||{};var n=s.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(t){var r=n.keys(t).reverse();n.each(r,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return s.getOption(this,"controller")},_addAppRoute:function(e,t,r){var i=e[r];if(!i)throw Error("Method '"+r+"' was not found on the controller");this.route(t,r,n.bind(i,e))}}),s.Application=function(e){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=s.triggerMethod},n.extend(s.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(){var e=r(arguments);return e.unshift(this),s.Module.create.apply(s.Module,e)},_initRegionManager:function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),s.Application.extend=s.extend,s.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=s.triggerMethod},n.extend(s.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,r){if(e){var i=n.flatten([this,this.app,t,s,s.$,n,r]);e.apply(this,i)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks}}),n.extend(s.Module,{create:function(e,t,i){var s=e,o=r(arguments);o.splice(0,3),t=t.split(".");var u=t.length,a=[];return a[u-1]=i,n.each(t,function(t,n){var r=s;s=this._getModule(r,t,e),this._addModuleDefinition(r,s,a[n],o)},this),s},_getModule:function(e,t,n){var r=e[t];return r||(r=new s.Module(t,n),e[t]=r,e.submodules[t]=r),r},_addModuleDefinition:function(e,t,r,i){var s,o;n.isFunction(r)?(s=r,o=!0):n.isObject(r)?(s=r.define,o=r.startWithParent):o=!0,s&&t.addDefinition(s,i),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),s}(this,Backbone,_);this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.removeEventListener=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent},t._listeners=null,t.initialize=function(){},t.addEventListener=function(e,t){var n=this._listeners;n?this.removeEventListener(e,t):n=this._listeners={};var r=n[e];return r||(r=n[e]=[]),r.push(t),t},t.removeEventListener=function(e,t){var n=this._listeners;if(n){var r=n[e];if(r)for(var i=0,s=r.length;i<s;i++)if(r[i]==t){1==s?delete n[e]:r.splice(i,1);break}}},t.removeAllEventListeners=function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null},t.dispatchEvent=function(e,t){var n=!1,r=this._listeners;if(e&&r){"string"==typeof e&&(e={type:e}),r=r[e.type];if(!r)return n;e.target=t||this;for(var r=r.slice(),i=0,s=r.length;i<s;i++)var o=r[i],n=o.handleEvent?n||o.handleEvent(e):n||o(e)}return!!n},t.hasEventListener=function(e){var t=this._listeners;return!!t&&!!t[e]},t.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.useRAF=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._listeners=null,e._pauseable=null,e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._rafActive=!1,e._timeoutID=null,e.addListener=function(t,n){null!=t&&(e.removeListener(t),e._pauseable[e._listeners.length]=null==n?!0:n,e._listeners.push(t))},e.init=function(){e._inited=!0,e._times=[],e._tickTimes=[],e._pauseable=[],e._listeners=[],e._times.push(e._lastTime=e._startTime=e._getTime()),e.setInterval(e._interval)},e.removeListener=function(t){var n=e._listeners;n&&(t=n.indexOf(t),-1!=t&&(n.splice(t,1),e._pauseable.splice(t,1)))},e.removeAllListeners=function(){e._listeners=[],e._pauseable=[]},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredFPS=function(t){return 2>e._times.length?-1:(null==t&&(t=e.getFPS()|0),t=Math.min(e._times.length-1,t),1e3/((e._times[0]-e._times[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleAF=function(){e._rafActive=!1,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleTimeout=function(){e.timeoutID=null,e._setupTick(),e._tick()},e._setupTick=function(){if(!e._rafActive&&null==e.timeoutID){if(e.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t){t(e._handleAF),e._rafActive=!0;return}}e.timeoutID=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime();e._ticks++;var n=t-e._lastTime,r=e._paused;r&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t;for(var i=e._pauseable,s=e._listeners.slice(),o=s?s.length:0,u=0;u<o;u++){var a=s[u];null==a||r&&i[u]||(a.tick?a.tick(n,r):a instanceof Function&&a(n,r))}e.dispatchEvent({type:"tick",paused:r,delta:n,time:t,runTime:t-e._pausedTime});for(e._tickTimes.unshift(e._getTime()-t);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(t);100<e._times.length;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},e.init(),createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u,a){this.initialize(e,t,n,r,i,s,o,u,a)},t=e.prototype;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.type=null,t.nativeEvent=null,t.onMouseMove=null,t.onMouseUp=null,t.target=null,t.pointerID=0,t.primary=!1,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.initialize=function(e,t,n,r,i,s,o,u,a){this.type=e,this.stageX=t,this.stageY=n,this.target=r,this.nativeEvent=i,this.pointerID=s,this.primary=o,this.rawX=null==u?t:u,this.rawY=null==a?n:a},t.clone=function(){return new e(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,r,i,s){return null!=e&&(this.a=e),this.b=t||0,this.c=n||0,null!=r&&(this.d=r),this.tx=i||0,this.ty=s||0,this},t.prepend=function(e,t,n,r,i,s){var o=this.tx;if(1!=e||0!=t||0!=n||1!=r){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,r,i,s,o,u,a,f){if(s%360){var l=s*e.DEG_TO_RAD;s=Math.cos(l),l=Math.sin(l)}else s=1,l=0;if(a||f)this.tx-=a,this.ty-=f;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(s*r,l*r,-l*i,s*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(s*r,l*r,-l*i,s*i,t,n),this},t.appendTransform=function(t,n,r,i,s,o,u,a,f){if(s%360){var l=s*e.DEG_TO_RAD;s=Math.cos(l),l=Math.sin(l)}else s=1,l=0;o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(s*r,l*r,-l*i,s*i,0,0)):this.append(s*r,l*r,-l*i,s*i,t,n);if(a||f)this.tx-=a*this.a+f*this.c,this.ty-=a*this.b+f*this.d;return this},t.rotate=function(e){var t=Math.cos(e);e=Math.sin(e);var n=this.a,r=this.c,i=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=r*t-this.d*e,this.d=r*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,0>this.a&&0<=this.d&&(t.rotation+=0>=t.rotation?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=o||1,this.shadow=u,this.compositeOperation=a,this},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){var t=new e(this.a,this.b,this.c,this.d,this.tx,this.ty);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e(1,0,0,1,0,0),createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){this.x=null==e?0:e,this.y=null==t?0:t},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,r){this.x=null==e?0:e,this.y=null==t?0:t,this.width=null==n?0:n,this.height=null==r?0:r},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o){this.initialize(e,t,n,r,i,s,o)},t=e.prototype;t.target=null,t.overLabel=null,t.outLabel=null,t.downLabel=null,t.play=!1,t._isPressed=!1,t._isOver=!1,t.initialize=function(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this.setEnabled(!0),this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))},t.setEnabled=function(e){var t=this.target;e?(t.addEventListener("mouseover",this),t.addEventListener("mouseout",this),t.addEventListener("mousedown",this)):(t.removeEventListener("mouseover",this),t.removeEventListener("mouseout",this),t.removeEventListener("mousedown",this))},t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t=this.target,n=e.type;"mousedown"==n?(e.addEventListener("mouseup",this),this._isPressed=!0,e=this.downLabel):"mouseup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"mouseover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?t.gotoAndPlay&&t.gotoAndPlay(e):t.gotoAndStop&&t.gotoAndStop(e)},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype;t.complete=!0,t.onComplete=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,r;if(null!=e){if(e.images&&0<(n=e.images.length)){r=this._images=[];for(t=0;t<n;t++){var i=e.images[t];if("string"==typeof i){var s=i,i=new Image;i.src=s}r.push(i),!i.getContext&&!i.complete&&(this._loadCount++,this.complete=!1,function(e){i.onload=function(){e._handleImageLoad()}}(this))}}if(null!=e.frames)if(e.frames instanceof Array){this._frames=[],r=e.frames,t=0;for(n=r.length;t<n;t++)s=r[t],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0})}else n=e.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(null!=(n=e.animations)){this._animations=[],this._data={};for(var o in n){e={name:o},s=n[o];if("number"==typeof s)r=e.frames=[s];else if(s instanceof Array)if(1==s.length)e.frames=[s[0]];else{e.frequency=s[3],e.next=s[2],r=e.frames=[];for(t=s[0];t<=s[1];t++)r.push(t)}else e.frequency=s.frequency,e.next=s.next,t=s.frames,r=e.frames="number"==typeof t?[t]:t.slice(0);e.next=2>r.length||0==e.next?null:null==e.next||1==e.next?o:e.next,e.frequency||(e.frequency=1),this._animations.push(o),this._data[o]=e}}}},t.getNumFrames=function(e){return null==e?this._frames?this._frames.length:this._numFrames:(e=this._data[e],null==e?0:e.frames.length)},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this.complete&&this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e){return(e=this.getFrame(e))?new createjs.Rectangle(-e.regX,-e.regY,e.rect.width,e.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,r=0,i=this._images;r<i.length;r++){for(var s=i[r],o=(s.width+1)/t|0,u=(s.height+1)/n|0,u=0<this._numFrames?Math.min(this._numFrames-e,o*u):o*u,a=0;a<u;a++)this._frames.push({image:s,rect:new createjs.Rectangle(a%o*t,(a/o|0)*n,t,n),regX:this._regX,regY:this._regY});e+=u}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=e&255,t=e>>8&255,e=e>>16&255),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},t.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"],t._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.beginCmd=new e(t._ctx.beginPath,[],!1),t.fillCmd=new e(t._ctx.fill,[],!1),t.strokeCmd=new e(t._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._ignoreScaleStroke=!1,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;n<r;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;r<i;r++)((t=n[r]).path||0==r)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},n.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,null==o&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},n.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},n.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},n.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(n){return this._active&&this._newPath(),this._fillInstructions=n?[new e(this._setProp,["fillStyle",n],!1),t.fillCmd]:null,this},n.beginLinearGradientFill=function(n,r,i,s,o,u){this._active&&this._newPath(),i=this._ctx.createLinearGradient(i,s,o,u),s=0;for(o=n.length;s<o;s++)i.addColorStop(r[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1),t.fillCmd],this},n.beginRadialGradientFill=function(n,r,i,s,o,u,a,f){this._active&&this._newPath(),i=this._ctx.createRadialGradient(i,s,o,u,a,f),s=0;for(o=n.length;s<o;s++)i.addColorStop(r[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1),t.fillCmd],this},n.beginBitmapFill=function(n,r,i){return this._active&&this._newPath(),n=this._ctx.createPattern(n,r||""),n=new e(this._setProp,["fillStyle",n],!1),this._fillInstructions=i?[n,new e(this._ctx.save,[],!1),new e(this._ctx.transform,[i.a,i.b,i.c,i.d,i.tx,i.ty],!1),t.fillCmd,new e(this._ctx.restore,[],!1)]:[n,t.fillCmd],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,r,i,s,o){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==n?"1":n],!1),new e(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:t.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",null==i?"miter":isNaN(i)?i:t.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._ignoreScaleStroke=o,this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginRadialGradientStroke=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},n.drawRoundRectComplex=function(t,n,r,i,s,o,u,a){var f=(r<i?r:i)/2,l=0,h=0,p=0,d=0;0>s&&(s*=l=-1),s>f&&(s=f),0>o&&(o*=h=-1),o>f&&(o=f),0>u&&(u*=p=-1),u>f&&(u=f),0>a&&(a*=d=-1),a>f&&(a=f),this._dirty=this._active=!0;var f=this._ctx.arcTo,v=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(f,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(v,[t+r,n+i-u]),new e(f,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(v,[t+a,n+i]),new e(f,[t-a*d,n+i+a*d,t,n+i-a,a]),new e(v,[t,n+s]),new e(f,[t-s*l,n-s*l,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},n.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=.5522848*(r/2),o=.5522848*(i/2),u=t+r,a=n+i;return r=t+r/2,i=n+i/2,this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,o=null==o?0:o/(180/Math.PI);var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var a=0;a<i;a++)o+=u,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=e.length,o=[],u=0,a=0,f=t.BASE_64;i<s;){var l=e.charAt(i),c=f[l],h=c>>3,p=n[h];if(!p||c&3)throw"bad path data (@"+i+"): "+l;l=r[h],h||(u=a=0),o.length=0,i++,c=(c>>2&1)+2;for(h=0;h<l;h++){var d=f[e.charAt(i)],v=d>>5?-1:1,d=(d&31)<<6|f[e.charAt(i+1)];3==c&&(d=d<<6|f[e.charAt(i+2)]),d=v*d/10,h%2?u=d+=u:a=d+=a,o[h]=d,i+=c}p.apply(this,o)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.setTransform,[1,0,0,1,0,0],!1),t.strokeCmd,new e(this._ctx.restore,[],!1)):this._instructions.push(t.strokeCmd))},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.suppressCrossDomainErrors=!1,e._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._hitTestCanvas.width=e._hitTestCanvas.height=1,e._hitTestContext=e._hitTestCanvas.getContext("2d"),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.onPress=null,t.onClick=null,t.onDoubleClick=null,t.onMouseOver=null,t.onMouseOut=null,t.onTick=null,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t.cursor=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},t.isVisible=function(){return!!this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(e){var t,n=this.mask;n&&n.graphics&&!n.graphics.isEmpty()&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e.transform(t.a,t.b,t.c,t.d,t.tx+.5|0,t.ty+.5|0):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.alpha,this.compositeOperation&&(e.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(e,this.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*i),this.cacheCanvas.height=Math.ceil(r*i),this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i||1,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas,r=this._cacheScale,i=this._cacheOffsetX*r,s=this._cacheOffsetY*r;if(!n)throw"cache() must be called before updateCache()";var o=n.getContext("2d");o.save(),t||o.clearRect(0,0,n.width+1,n.height+1),o.globalCompositeOperation=t,o.setTransform(r,0,0,r,-i,-s),this.draw(o,!0),this._applyFilters(),o.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){return e=this.localToGlobal(e,t),n.globalToLocal(e.x,e.y)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){return(e?e.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;null!=t;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation,this.cacheCanvas&&(e.cacheCanvas=this.cacheCanvas.cloneNode(!0),e.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){this.onTick&&this.onTick.apply(this,e);var t=this._listeners;t&&t.tick&&this.dispatchEvent({type:"tick",params:e})},t._testHit=function(t){try{var n=1<t.getImageData(0,0,1,1).data[3]}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;i<e;i++)this.filters[i].applyFilter(t,0,0,n,r)},t._hasMouseHandler=function(e){var t=this._listeners;return!!(e&1&&(this.onPress||this.onClick||this.onDoubleClick||t&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||e&2&&(this.onMouseOver||this.onMouseOut||this.cursor||t&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;r<i;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(1<t){for(var n=0;n<t;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(2<n){for(var i=0;i<n-1;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(1<t){for(var n=!0,r=0;r<t;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(this.children.indexOf(e))},t.removeChildAt=function(e){var t=arguments.length;if(1<t){for(var n=[],r=0;r<t;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;r<t;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;if(t=this.children[e])t.parent=null;return this.children.splice(e,1),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return this.children.indexOf(e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n=this.children,r,i,s=0,o=n.length;s<o&&(n[s]==e&&(r=s),n[s]==t&&(i=s),null==r||null==i);s++);s!=o&&(n[r]=t,n[i]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;i<r&&n[i]!=e;i++);i==r||i==t||(n.splice(i,1),t<i&&t--,n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.clone=function(t){var n=new e;this.cloneProps(n);if(t)for(var r=n.children=[],i=0,s=this.children.length;i<s;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;0<=t;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,r,i){var s=createjs.DisplayObject._hitTestContext,o=this._matrix,u=this._hasMouseHandler(i);if(!this.hitArea&&this.cacheCanvas&&u&&(this.getConcatenatedMatrix(o),s.setTransform(o.a,o.b,o.c,o.d,o.tx-t,o.ty-n),s.globalAlpha=o.alpha,this.draw(s),this._testHit(s)))return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),this;for(var a=this.children.length-1;0<=a;a--){var f=this.children[a],l=f.hitArea;if(f.visible&&!(!l&&!f.isVisible()||i&&!f.mouseEnabled)){var h=i&&f._hasMouseHandler(i);if(f instanceof e&&(!l||!h)){if(u){if(f=f._getObjectsUnderPoint(t,n))return this}else if(f=f._getObjectsUnderPoint(t,n,r,i),!r&&f)return f}else if(!i||u||h)if(f.getConcatenatedMatrix(o),l&&(o.appendTransform(l.x,l.y,l.scaleX,l.scaleY,l.rotation,l.skewX,l.skewY,l.regX,l.regY),o.alpha=l.alpha),s.globalAlpha=o.alpha,s.setTransform(o.a,o.b,o.c,o.d,o.tx-t,o.ty-n),(l||f).draw(s),this._testHit(s)){s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2);if(u)return this;if(!r)return f;r.push(f)}}}return null},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.onMouseMove=null,t.onMouseUp=null,t.onMouseDown=null,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},t.update=function(){if(this.canvas){this.autoClear&&this.clear(),e._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore()}},t.tick=t.update,t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){t||(t="image/png");var n=this.canvas.getContext("2d"),r=this.canvas.width,i=this.canvas.height,s;if(e){s=n.getImageData(0,0,r,i);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=e,n.fillRect(0,0,r,i)}var u=this.canvas.toDataURL(t);return e&&(n.clearRect(0,0,r+1,i+1),n.putImageData(s,0,0),n.globalCompositeOperation=o),u},t.enableMouseOver=function(e){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n=this._eventListeners;if(!e&&n){for(t in n)e=n[t],e.t.removeEventListener(t,e.f);this._eventListeners=null}else if(e&&!n&&this.canvas){e=window.addEventListener?window:document;var r=this,n=this._eventListeners={};n.mouseup={t:e,f:function(e){r._handleMouseUp(e)}},n.mousemove={t:e,f:function(e){r._handleMouseMove(e)}},n.dblclick={t:e,f:function(e){r._handleDoubleClick(e)}},n.mousedown={t:this.canvas,f:function(e){r._handleMouseDown(e)}};for(t in n)e=n[t],e.t.addEventListener(t,e.f)}},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getPointerData=function(e){var t=this._pointerData[e];return!t&&(t=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=e),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r){if(this.canvas){var i=this._getPointerData(e),s=i.inBounds;this._updatePointerPosition(e,n,r);if(s||i.inBounds||this.mouseMoveOutside){if(this.onMouseMove||this.hasEventListener("stagemousemove"))n=new createjs.MouseEvent("stagemousemove",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseMove&&this.onMouseMove(n),this.dispatchEvent(n);(r=i.event)&&(r.onMouseMove||r.hasEventListener("mousemove"))&&(n=new createjs.MouseEvent("mousemove",i.x,i.y,r.target,t,e,e==this._primaryPointerID,i.rawX,i.rawY),r.onMouseMove&&r.onMouseMove(n),r.dispatchEvent(n,r.target))}}},t._updatePointerPosition=function(e,t,n){var r=this._getElementRect(this.canvas);t-=r.left,n-=r.top;var i=this.canvas.width,s=this.canvas.height;t/=(r.right-r.left)/i,n/=(r.bottom-r.top)/s,r=this._getPointerData(e),(r.inBounds=0<=t&&0<=n&&t<=i-1&&n<=s-1)?(r.x=t,r.y=n):this.mouseMoveOutside&&(r.x=0>t?0:t>i-1?i-1:t,r.y=0>n?0:n>s-1?s-1:n),r.rawX=t,r.rawY=n,e==this._primaryPointerID&&(this.mouseX=r.x,this.mouseY=r.y,this.mouseInBounds=r.inBounds)},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle;e=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth);var o=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),u=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),s=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+e,right:t.right+r-u,top:t.top+i+o,bottom:t.bottom+i-s}},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var r=this._getPointerData(e),i;if(this.onMouseMove||this.hasEventListener("stagemouseup"))i=new createjs.MouseEvent("stagemouseup",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY),this.onMouseUp&&this.onMouseUp(i),this.dispatchEvent(i);var s=r.event;s&&(s.onMouseUp||s.hasEventListener("mouseup"))&&(i=new createjs.MouseEvent("mouseup",r.x,r.y,s.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onMouseUp&&s.onMouseUp(i),s.dispatchEvent(i,s.target)),(s=r.target)&&(s.onClick||s.hasEventListener("click"))&&this._getObjectsUnderPoint(r.x,r.y,null,!0,this._mouseOverIntervalID?3:1)==s&&(i=new createjs.MouseEvent("click",r.x,r.y,s,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onClick&&s.onClick(i),s.dispatchEvent(i)),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,!1)},t._handlePointerDown=function(e,t,n,r){var i=this._getPointerData(e);null!=r&&this._updatePointerPosition(e,n,r);if(this.onMouseDown||this.hasEventListener("stagemousedown"))n=new createjs.MouseEvent("stagemousedown",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseDown&&this.onMouseDown(n),this.dispatchEvent(n);if(r=this._getObjectsUnderPoint(i.x,i.y,null,this._mouseOverIntervalID?3:1))if(i.target=r,r.onPress||r.hasEventListener("mousedown"))if(n=new createjs.MouseEvent("mousedown",i.x,i.y,r,t,e,e==this._primaryPointerID,i.rawX,i.rawY),r.onPress&&r.onPress(n),r.dispatchEvent(n),n.onMouseMove||n.onMouseUp||n.hasEventListener("mousemove")||n.hasEventListener("mouseup"))i.event=n},t._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e=null;this.mouseInBounds&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var t=this._mouseOverTarget;if(t!=e){var n=this._getPointerData(-1);if(t&&(t.onMouseOut||t.hasEventListener("mouseout"))){var r=new createjs.MouseEvent("mouseout",n.x,n.y,t,null,-1,n.rawX,n.rawY);t.onMouseOut&&t.onMouseOut(r),t.dispatchEvent(r)}t&&(this.canvas.style.cursor=""),e&&(e.onMouseOver||e.hasEventListener("mouseover"))&&(r=new createjs.MouseEvent("mouseover",n.x,n.y,e,null,-1,n.rawX,n.rawY),e.onMouseOver&&e.onMouseOver(r),e.dispatchEvent(r)),e&&(this.canvas.style.cursor=e.cursor||""),this._mouseOverTarget=e}}},t._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,this._mouseOverIntervalID?3:1);n&&(n.onDoubleClick||n.hasEventListener("dblclick"))&&(evt=new createjs.MouseEvent("dblclick",t.x,t.y,n,e,-1,!0,t.rawX,t.rawY),n.onDoubleClick&&n.onDoubleClick(evt),n.dispatchEvent(evt))},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState);return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.onAnimationEnd=null,t.currentFrame=-1,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._advanceCount=0,t._animation=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.spriteSheet=e},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete&&0<=this.currentFrame;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n){var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0}},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},t.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%t&&this.advance(),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e=this._animation,t=this.currentFrame,n=this.paused,r;if(e)if(r=e.frames.length,this.currentAnimationFrame>=r){var i=e.next;this._dispatchAnimationEnd(e,t,n,i,r-1)||(i?this._goto(i):(this.paused=!0,this.currentAnimationFrame=e.frames.length-1,this.currentFrame=e.frames[this.currentAnimationFrame]))}else this.currentFrame=e.frames[this.currentAnimationFrame];else r=this.spriteSheet.getNumFrames(),t>=r&&!this._dispatchAnimationEnd(e,t,n,r-1)&&(this.currentFrame=0)},t._dispatchAnimationEnd=function(e,t,n,r,i){var s=e?e.name:null;return this.onAnimationEnd&&this.onAnimationEnd(this,s,r),this.dispatchEvent({type:"animationend",name:s,next:r}),!n&&this.paused&&(this.currentAnimationFrame=i),this.paused!=n||this._animation!=e||this.currentFrame!=t},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.onAnimationEnd=this.onAnimationEnd,e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.offset=this.offset,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame},t._goto=function(e){if(isNaN(e)){var t=this.spriteSheet.getAnimation(e);t&&(this.currentAnimationFrame=0,this._animation=t,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=e},createjs.BitmapAnimation=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){return t=new e(t&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(t),t},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject;e._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.text="",t.font=null,t.color="#000",t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=!1,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n?n:"#000"},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.outline?e.strokeStyle=this.color:e.fillStyle=this.color,e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",this._drawText(e),!0)},t.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},t.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},t.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._getWorkingContext=function(){var t=e._workingContext;return t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",t},t._drawText=function(e){var t=!!e;t||(e=this._getWorkingContext());for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),r=this.lineHeight||this.getMeasuredLineHeight(),i=0,s=0,o=n.length;s<o;s++){var u=e.measureText(n[s]).width;if(null==this.lineWidth||u<this.lineWidth)t&&this._drawTextLine(e,n[s],i*r);else{for(var u=n[s].split(/(\s)/),a=u[0],f=1,l=u.length;f<l;f+=2)e.measureText(a+u[f]+u[f+1]).width>this.lineWidth?(t&&this._drawTextLine(e,a,i*r),i++,a=u[f+1]):a+=u[f]+u[f+1];t&&this._drawTextLine(e,a,i*r)}i++}return i},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"};e._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._workingContext=e._workingCanvas.getContext("2d"),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;return s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r=new Image,r.src=s.toDataURL("image/png"),r},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,a=s.length/n,f=0;f<a;f++){var l=s[f];l.__tmp=f,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=l.width,o.height=l.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?l.width:0,i?l.height:0),u.drawImage(l,0,0);var h=new Image;h.src=o.toDataURL("image/png"),h.width=l.width,h.height=l.height,s.push(h)}u=t._frames,o=u.length/n;for(f=0;f<o;f++){var l=u[f],p=l.rect.clone(),h=s[l.image.__tmp+a*n],d={image:h,rect:p,regX:l.regX,regY:l.regY};r&&(p.x=h.width-p.x-p.width,d.regX=p.width-l.regX),i&&(p.y=h.height-p.y-p.height,d.regY=p.height-l.regY),u.push(d)}r="_"+(r?"h":"")+(i?"v":""),i=t._animations,t=t._data,s=i.length/n;for(f=0;f<s;f++){u=i[f],l=t[u],a={name:u+r,frequency:l.frequency,next:l.next,frames:[]},l.next&&(a.next+=r),u=l.frames,l=0;for(h=u.length;l<h;l++)a.frames.push(u[l]+o*n);t[a.name]=a,i.push(a.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t.timeSlice=.3,t.progress=-1,t.onComplete=null,t.onProgress=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;return n=n||t.bounds||t.nominalBounds,!n&&t.getBounds&&(n=t.getBounds()),n?(r=r||1,this._frames.push({source:t,sourceRect:n,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:n.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;!s&&t.getBounds&&(s=t.getBounds());if(!s&&!i)return null;n=this._frames.length;for(var o=t.timeline.duration,u=0;u<o;u++)this.addFrame(t,i&&i[u]?i[u]:s,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[u],t);u=t.timeline._labels,t=[];for(var a in u)t.push({index:u[a],label:a});if(t.length){t.sort(function(e,t){return e.index-t.index}),u=0;for(a=t.length;u<a;u++){r=t[u].label;for(var i=n+(u==a-1?o:t[u+1].index),s=[],f=n+t[u].index;f<i;f++)s.push(f);this.addAnimation(r,s,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();r.sort(function(e,t){return e.height<=t.height?-1:1});if(r[r.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);u.w>s&&(s=u.w),i+=u.h;if(!u.h||!r.length){var a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a.width=this._getSize(s,this.maxWidth),a.height=this._getSize(i,this.maxHeight),this._data.images[o]=a,u.h||(s=i=0,o++)}}},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight;n+=s;for(var u=u-n,a=s,f=0,l=t.length-1;0<=l;l--){var h=t[l],p=this._scale*h.scale,d=h.sourceRect,v=h.source,m=Math.floor(p*d.x-s),g=Math.floor(p*d.y-s),y=Math.ceil(p*d.height+2*s),d=Math.ceil(p*d.width+2*s);if(d>o)throw e.ERR_DIMENSIONS;y>u||a+d>o||(h.img=r,h.rect=new createjs.Rectangle(a,n,d,y),f=f||y,t.splice(l,1),i[h.index]=[a,n,d,y,r,Math.round(-m+p*v.regX-s),Math.round(-g+p*v.regY-s)],a+=d)}return{w:a,h:f}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.onComplete&&this.onComplete(this),this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-e)}e=this.progress=this._index/this._frames.length,this.onProgress&&this.onProgress(this,e),this.dispatchEvent({type:"progress",progress:e})},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),i.save(),i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.clip(),i.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),i.scale(t,t),e.source.draw(i),i.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._oldMtx=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e,e=e.style,e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){if(null!=this.htmlElement){var e=this.getConcatenatedMatrix(this._matrix),t=this.htmlElement.style;if(!this.visible)return!0;t.visibility="visible";var n=this._oldMtx||{};n.alpha!=e.alpha&&(t.opacity=""+e.alpha,n.alpha=e.alpha);if(n.tx!=e.tx||n.ty!=e.ty||n.a!=e.a||n.b!=e.b||n.c!=e.c||n.d!=e.d)t.transform=t.WebkitTransform=t.OTransform=t.msTransform=["matrix("+e.a,e.b,e.c,e.d,e.tx+.5|0,(e.ty+.5|0)+")"].join(),t.MozTransform=["matrix("+e.a,e.b,e.c,e.d,(e.tx+.5|0)+"px",(e.ty+.5|0)+"px)"].join(),this._oldMtx=e.clone();return!0}},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){this.htmlElement.style.visibility="hidden",this.DisplayObject__tick(e)},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},e.enable=function(t,n,r){return!t||!t.canvas||!e.isSupported()?!1:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0)},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;t&&(e=e.__touch.f,t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1))},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;i<s;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n)t.srcElement==e.canvas&&(i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY));else if(i[r])if("MSPointerMove"==n)this._handleMove(e,r,t,t.pageX,t.pageY);else if("MSPointerUp"==n||"MSPointerCancel"==n)delete i[r],this._handleEnd(e,r,t)}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),function(){var e=this.createjs=this.createjs||{},e=e.EaselJS=e.EaselJS||{};e.version="0.6.1",e.buildDate="Tue, 14 May 2013 21:43:02 GMT"}(),window.Modernizr=function(e,t,n){function r(e){d.cssText=e}function i(e,t){return r(prefixes.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}var a="2.6.2",f={},l=!0,c=t.documentElement,h="modernizr",p=t.createElement(h),d=p.style,v,m={}.toString,g={},y={},b={},w=[],E=w.slice,S,x=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,p=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:h+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),f.id=h,(l?f:p).innerHTML+=s,p.appendChild(f),l||(p.style.background="",p.style.overflow="hidden",a=c.style.overflow,c.style.overflow="hidden",c.appendChild(p)),o=n(f,e),l?f.parentNode.removeChild(f):(p.parentNode.removeChild(p),c.style.overflow=a),!!o},T=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return x("@media "+t+" { #"+h+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},N={}.hasOwnProperty,C;!s(N,"undefined")&&!s(N.call,"undefined")?C=function(e,t){return N.call(e,t)}:C=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=E.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(E.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(E.call(arguments)))};return r});for(var k in g)C(g,k)&&(S=k.toLowerCase(),f[S]=g[k](),w.push((f[S]?"":"no-")+S));return f.addTest=function(e,t){if(typeof e=="object")for(var r in e)C(e,r)&&f.addTest(r,e[r]);else{e=e.toLowerCase();if(f[e]!==n)return f;t=typeof t=="function"?t():t,typeof l!="undefined"&&l&&(c.className+=" officWithBackbone"+(t?"":"no-")+e),f[e]=t}return f},r(""),p=v=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),f._version=a,f.mq=T,f.testStyles=x,c.className=c.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(l?" officWithBackbonejs officWithBackbone"+w.join(" officWithBackbone"):""),f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},Handlebars.registerPartial=function(e,t){this.partials[e]=t},Handlebars.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},r=t.fn,i="",s=toString.call(e);s===functionType&&(e=e.call(this));if(e===!0)return r(this);if(e===!1||e==null)return n(this);if(s==="[object Array]"){if(e.length>0)for(var o=0,u=e.length;o<u;o++)i+=r(e[o]);else i=n(this);return i}return r(e)}),Handlebars.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[s]);else i=r(this);return i}),Handlebars.registerHelper("if",function(e,t){var n=toString.call(e);return n===functionType&&(e=e.call(this)),!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,Handlebars.helpers["if"].call(this,e,t)}),Handlebars.registerHelper("with",function(e,t){return t.fn(e)}),Handlebars.registerHelper("log",function(e){Handlebars.log(e)}),Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/&(?!\w+;)|[<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){options={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e),i[t](n,options)}},Handlebars.template=Handlebars.VM.template,function(e){e.extend(e.fx.step,{backgroundPosition:function(t){function s(e){e=e.replace(/center/g,"50%"),e=e.replace(/left|top/g,"0px"),e=e.replace(/right|bottom/g,"100%"),e=e.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var t=e.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(t[1],10),t[2],parseFloat(t[3],10),t[4]]}if(t.state===0&&typeof t.end=="string"){if(/MSIE (10\.\d+);/.test(navigator.userAgent)||/rv\:11\.\d+/.test(navigator.userAgent)){var n=e.curCSS(t.elem,"backgroundPositionX");n+=" ",n+=e.curCSS(t.elem,"backgroundPositionY")}else var n=e.curCSS(t.elem,"backgroundPosition");n=s(n),t.start=[n[0],n[2]];var r=s(t.end);t.end=[r[0],r[2]],t.unit=[r[1],r[3]]}var i=[];i[0]=(t.end[0]-t.start[0])*t.pos+t.start[0]+t.unit[0],i[1]=(t.end[1]-t.start[1])*t.pos+t.start[1]+t.unit[1],t.elem.style.backgroundPosition=i[0]+" "+i[1]}})}(jQuery)