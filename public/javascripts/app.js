(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o,t)}},u=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,o(e),r),r.exports},a=function(e,s){var o=i(e,".");s==null&&(s="/");if(r(n,o))return n[o].exports;if(r(t,o))return u(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a].exports;if(r(t,a))return u(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+s+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n},l=function(){var e=[];for(var n in t)r(t,n)&&e.push(n);return e};e.require=a,e.require.define=f,e.require.register=f,e.require.list=l,e.require.brunch=!0})(),require.register("application",function(e,t,n){var r=t("./controller/AppController"),i=t("./routes/router"),s=new Marionette.Application;s.addInitializer(function(){s.controller=new r,s.router=new i({controller:s.controller})}),s.on("initialize:after",function(){Backbone.history&&Backbone.history.start()}),n.exports=s}),require.register("controller/AppController",function(e,t,n){t("../lib/paper/init");var r=t("../lib/paper/paperSection"),i=t("../views/NavView"),s=t("../views/SliderView"),o=t("../views/ActivitiesView"),u=t("../views/FamilyView"),a=t("../views/ToolsView"),f=t("../views/ShareView"),l=t("../views/SceneViews/View0"),c=t("../views/SceneViews/View1"),h=t("../views/SceneViews/View2"),p=t("../views/SceneViews/View3"),d=t("../views/SceneViews/View4");n.exports=Marionette.Controller.extend({initialize:function(){var e=this;app.navView=null,app.allViews=[],app.currentView=0,app.allViewsWithPaper=[],app.pageScrollingCompleted=!0,app.scrollAwayTimeOut=null,app.isiPad=-1!==navigator.userAgent.toLowerCase().indexOf("ipad")?!0:!1,app.windowHeight=function(){if("number"==typeof window.innerWidth||"number"==typeof window.outerWidth)return navigator.userAgent.match(/(iPad);.*CPU.*OS 7_\d.*Safari/i)&&!navigator.userAgent.match(/crios/i)&&(90===window.orientation||-90===window.orientation)?692:window.innerHeight;if(document.documentElement&&document.documentElement.clientHeight)return document.documentElement.clientHeight;if(document.body&&document.body.clientHeight)return document.body.clientHeight},e.$hammer=$(window).hammer({drag_block_vertical:!0,swipe_velocity:.3}),_.bindAll(e,"swipeUpHandler","swipeDownHandler"),$(document).ready(function(){app.navView=new i({el:$("#nav")}),app.allViews=[new s({el:$("#slider"),subViews:[new l({el:$(".slide1")}),new c({el:$(".slide2")}),new h({el:$(".slide3")}),new p({el:$(".slide4")}),new d({el:$(".slide5")})]}),new o({el:$("#activities")}),new u({el:$("#family")}),new a({el:$("#tools")}),new f({el:$("#share")})],$(".container").each(function(e){$(this).hasClass("paper")?app.allViewsWithPaper[e]=!0:app.allViewsWithPaper[e]=!1}),$("#wrapper").css("top",0),$(window).scrollTo(0,1),e.$hammer.on("swipeup",e.swipeUpHandler).on("swipedown",e.swipeDownHandler),$(window).mousewheel(function(e,t){return e.stopPropagation(),e.preventDefault(),0!==t&&!0===app.pageScrollingCompleted&&(app.pageScrollingCompleted=!1,t<0?app.currentView<app.allViews.length-1?Backbone.history.navigate("!/feature/"+(app.currentView+1),{trigger:!0}):app.pageScrollingCompleted=!0:t>0&&(app.currentView>0?Backbone.history.navigate("!/feature/"+(app.currentView-1),{trigger:!0}):app.pageScrollingCompleted=!0)),!1}),$(window).on("ViewScrollComplete",function(){return clearTimeout(r.timeOut),r.timeOut=setTimeout(function(){$(window).trigger("stopScroll")},50),!1})})},swipeUpHandler:function(e){var t=this;"mouse"!==e.gesture.pointerType&&!0===app.pageScrollingCompleted&&app.currentView<app.allViews.length-1&&(app.pageScrollingCompleted=!1,Backbone.history.navigate("!/feature/"+(app.currentView+1),{trigger:!0}))},swipeDownHandler:function(e){var t=this;"mouse"!==e.gesture.pointerType&&!0===app.pageScrollingCompleted&&app.currentView>0&&(app.pageScrollingCompleted=!1,Backbone.history.navigate("!/feature/"+(app.currentView-1),{trigger:!0}))},_scrollViewUp:function(e){$("#wrapper").animate({top:"-="+100*e+"%"},350,"easeInQuart",function(){app.currentView++,app.vent.trigger("view:scrolling:up:completed",app.currentView),app.allViewsWithPaper[app.currentView]&&$(window).trigger("ViewScrollComplete");var e=setTimeout(function(){app.pageScrollingCompleted=!0,clearTimeout(e)},1e3)})},scrollViewUp:function(e){e=typeof e!="undefined"?e:1;var t=this,n=app.allViews[app.currentView].scrollAwayElementsDuration;app.currentView<app.allViews.length-1?(app.allViewsWithPaper[app.currentView+1]?r.scrollSpeed=60:r.scrollSpeed=0,app.vent.trigger("view:scrolling:up:start",app.currentView),app.scrollAwayTimeOut=setTimeout(function(){t._scrollViewUp(e),clearTimeout(app.scrollAwayTimeOut)},n)):app.pageScrollingCompleted=!0},_scrollViewDown:function(e){$("#wrapper").animate({top:"+="+100*e+"%"},350,"easeInQuart",function(){app.currentView--,app.vent.trigger("view:scrolling:down:completed",app.currentView),app.allViewsWithPaper[app.currentView]&&$(window).trigger("ViewScrollComplete");var e=setTimeout(function(){app.pageScrollingCompleted=!0,clearTimeout(e)},1e3)})},scrollViewDown:function(e){e=typeof e!="undefined"?e:1;var t=this,n=app.allViews[app.currentView].scrollAwayElementsDuration;app.currentView>0?(app.allViewsWithPaper[app.currentView-1]?r.scrollSpeed=-60:r.scrollSpeed=0,app.vent.trigger("view:scrolling:down:start",app.currentView),app.scrollAwayTimeOut=setTimeout(function(){t._scrollViewDown(e),clearTimeout(app.scrollAwayTimeOut)},n)):app.pageScrollingCompleted=!0},share:function(){var e=this;e.scrollTo(4)},scrollTo:function(e){var t=this,n=/^[0-4]$/g,r=0;n.test(e)?$(document).ready(function(){e=parseInt(e),r=e-app.currentView,app.pageScrollingCompleted=!1,0===e?Backbone.history.navigate("",{trigger:!1}):4===e&&Backbone.history.navigate("!/share",{trigger:!1}),r>0?(app.navView.navCurtainAnimation(app.currentView,e),app.currentView=e-1,t.scrollViewUp(r)):r<0&&(app.navView.navCurtainAnimation(app.currentView,e),app.currentView=e+1,t.scrollViewDown(-r))}):t.missing()},missing:function(){Backbone.history.navigate("",{trigger:!1}),location.reload()}})}),require.register("initialize",function(e,t,n){app=t("application"),app.start()}),require.register("lib/animations/cloud",function(e,t,n){var r="./sprites/cloud.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,219,260,0,0,0],[219,0,219,260,0,0,0],[438,0,219,260,0,0,0],[0,260,219,260,0,0,0],[219,260,219,260,0,0,0]],animations:{signal:{frames:[0,1,2,3,4],frequency:4,next:!0}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/animations/dinosaur",function(e,t,n){var r="./sprites/dinosaur.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,229,247,0,0,0],[229,0,229,247,0,0,0]],animations:{surrender:{frames:[0,1],frequency:3,next:!0},idle:{frames:[0],frequency:4,next:!0}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/animations/flame",function(e,t,n){var r="./sprites/fire.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,141,205,0,0,0],[141,0,141,205,0,0,0],[282,0,141,205,0,0,0],[0,205,141,205,0,0,0],[141,205,141,205,0,0,0],[282,205,141,205,0,0,0],[0,410,141,205,0,0,0]],animations:{startFire:{frames:[0,1,2,3],frequency:2,next:"fire1"},fire1:{frames:[4,5,6],frequency:3,next:"fire2"},fire2:{frames:[0,1,2],frequency:2,next:"fire3"},fire3:{frames:[1,0],frequency:3,next:"startFire"}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/animations/phone",function(e,t,n){var r="./sprites/phone.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,121,158,0,0,0],[121,0,121,158,0,0,0]],animations:{warning:{frames:[0,1,1,1,1,1,1,0],frequency:4,next:!0}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/animations/survivor",function(e,t,n){var r="./sprites/survivor.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,715,235,0,0,0],[715,0,715,235,0,0,0]],animations:{wave:{frames:[0,1,0,1,0,1,0,1,0,0,0],frequency:3,next:!0}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/animations/triceratops",function(e,t,n){var r="./sprites/triceratops.png",i=function(){this.initialize()};i._SpriteSheet=new createjs.SpriteSheet({images:[r],frames:[[0,0,214,233,0,0,0],[214,0,214,233,0,0,0],[428,0,214,233,0,0,0],[0,233,214,233,0,0,0],[214,233,214,233,0,0,0],[428,233,214,233,0,0,0],[0,466,214,233,0,0,0],[214,466,214,233,0,0,0]],animations:{dizzy:{frames:[0,1,2,3,4,5,6,7],frequency:2,next:!0}}});var s=i.prototype=new createjs.BitmapAnimation;s.BitmapAnimation_initialize=s.initialize,s.initialize=function(){this.BitmapAnimation_initialize(i._SpriteSheet),this.paused=!1},n.exports=i}),require.register("lib/paper/init",function(e,t,n){paper.install(window),Path.prototype.setWidth=function(e){return this.segments[3].point.x=this.segments[0].point.x+e,this.segments[2].point.x=this.segments[1].point.x+e},Path.prototype.setHeight=function(e){return this.segments[1].point.y=this.segments[0].point.y+e,this.segments[2].point.y=this.segments[3].point.y+e},Path.prototype.reset=function(){return this.setWidth(0),this.setHeight(0),this.smooth()}}),require.register("lib/paper/paperSection",function(e,t,n){n.exports={i:0,next:0,prev:0,stop:!1,timeOut:null,ff:typeof InstallTrigger!="undefined",win:navigator.appVersion.indexOf("Win")!==-1,scrollSpeed:0}}),require.register("lib/paper/sections",function(e,t,n){function i(e){var t,n,i,s,o;(s=this.contents)==null&&(this.contents=[]);for(t=i=o=e.sectionsCount-1;o<=0?i<=0:i>=0;t=o<=0?++i:--i)n=new r({view:e.view,$content:e.$content,$sections:e.$sections,offset:{x:e.offset[t].x,y:e.offset[t].y-5},size:{width:e.size[t].width+1,height:e.size[t].height+5},color:e.colors[t]}),n.index=t,this.contents.push(n)}var r=t("./ssection");i.prototype.update=function(){var e,t,n,r,i,s;i=this.contents,s=[];for(e=n=0,r=i.length;n<r;e=++n)t=i[e],s.push(t.update());return s},i.prototype.popSection=function(e){var t,n,r,i;TWEEN.removeAll(),i=[];for(t=n=r=this.contents.length-1;r<=0?n<=0:n>=0;t=r<=0?++n:--n)t>this.contents.length-e-1&&this.contents[t].popDOWN(),this.contents.length-e-1===t&&this.contents[t].pop(),t<this.contents.length-e-1?i.push(this.contents[t].popDOWN()):i.push(void 0);return i},i.prototype.teardown=function(){var e,t,n,r=[];for(e=t=n=this.contents.length-1;n<=0?t<=0:t>=0;e=n<=0?++t:--t)this.contents[e].base.remove(),this.contents[e].notListenToStop(),r.push(delete this.contents[e]);return r},n.exports=i}),require.register("lib/paper/ssection",function(e,t,n){function s(e){this.o=e,this.w=e.view.size.width,this.h=e.view.size.height,this.ph=60,this.sh=this.procent(this.h,this.ph),this.wh=1*this.w,this.gapSize=this.procent(this.h,(100-this.ph)/2),this.twns=[],this.getPrefix(),this.makeBase(),this.listenToStop(),r.timeOut=0}var r=t("./paperSection"),i=t("../slice");s.prototype.getPrefix=function(){var e,t;return t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||t.OLink===""&&["","o"])[1],this.prefix="-"+e+"-",this.transformPrefix=""+this.prefix+"transform"},s.prototype.listenToStop=function(){var e=this;return $(window).on("ViewScrollComplete",function(){return e.stop=!1,e.poped=!1,TWEEN.removeAll()}),$(window).on("stopScroll",function(){var t;return e.stop=!0,t=i(Math.abs(r.scrollSpeed*25),1400)||3e3,e.translatePointY({point:e.base.segments[1].handleOut,to:0,duration:t}).then(function(){return r.scrollSpeed=0}),e.translatePointY({point:e.base.segments[3].handleOut,to:0,duration:t})})},s.prototype.translateLine=function(e){var t=new $.Deferred,n=(new TWEEN.Tween(new Point(e.point))).to(new Point(e.to),e.duration),r=this,i=this;return n.easing(e.easing||TWEEN.Easing.Elastic.Out),n.onUpdate(e.onUpdate||function(t){var n;return e.point.y=this.y,(n=e.point2)!=null?n.y=this.y:void 0}),n.onComplete(function(){return t.resolve()}),n.start(),t.promise()},s.prototype.notListenToStop=function(){return $(window).off("stopScroll"),$(window).off("ViewScrollComplete")},s.prototype.translatePointY=function(e){var t=new $.Deferred,n=(new TWEEN.Tween(new Point(e.point))).to(new Point(e.to),e.duration),r=this,i=this;return n.easing(e.easing||TWEEN.Easing.Elastic.Out),n.onUpdate(e.onUpdate||function(t){return e.point.y=this.y,!i.poped&&r.o.$content.attr("style",""+i.transformPrefix+": translate3d(0,"+this.y/2+"px,0);transform: translate3d(0,"+this.y/2+"px,0);"),i.poped&&!i.popedCenter&&r.o.$sections.eq(i.index).attr("style",""+i.transformPrefix+": translate3d(0,"+this.y/2+"px,0);transform: translate3d(0,"+this.y/2+"px,0);")}),n.onComplete(function(){return t.resolve()}),n.start(),t.promise()},s.prototype.translatePointX=function(e){var t=new $.Deferred,n=(new TWEEN.Tween(new Point(e.point))).to(new Point(e.to),e.duration),r=this,i=this;return n.easing(e.easing||TWEEN.Easing.Elastic.Out),n.onUpdate(e.onUpdate||function(t){return e.point.x=this.x,i.poped&&!i.popedCenter&&r.o.$sections.eq(i.index).attr("style",""+i.transformPrefix+": translate3d("(this.x/2),+"px,0,0);transform: translate3d("(this.x/2),0/0)}),n.onComplete(function(){return t.resolve()}),n.start(),t.promise()},s.prototype.makeBase=function(){var e=this;return this.base=new Path.Rectangle(new Point(e.o.offset.x,e.o.offset.y),[e.o.size.width,e.o.size.height]),this.base.fillColor=this.o.color},s.prototype.toppie=function(e){return this.base.segments[1].handleOut.y=e,this.base.segments[1].handleOut.x=this.wh/5.5},s.prototype.bottie=function(e){return this.base.segments[3].handleOut.y=e,this.base.segments[3].handleOut.x=-this.wh/5.5},s.prototype.createPath=function(e){var t;return t=new Path(e.points),e.flatten&&t.flatten(e.flatten),t.fillColor=e.fillColor||"transparent",t},s.prototype.update=function(){return!this.stop&&!this.poped&&(this.toppie(r.scrollSpeed),this.bottie(r.scrollSpeed),this.o.$content.attr("style",""+this.transformPrefix+": translate3d(0,"+r.scrollSpeed/2+"px,0);transform: translate3d(0,"+r.scrollSpeed/2+"px,0);")),TWEEN.update()},s.prototype.procent=function(e,t){return e/100*t},s.prototype.pop=function(){var e=this;return this.poped=!0,this.popedCenter=!0,this.translatePointY({point:this.base.segments[1].handleOut,to:this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None}).then(function(){return e.translatePointY({point:e.base.segments[1].handleOut,to:0,$content:e.o.$content,$sections:e.o.$sections}).then(function(){}),e.translatePointY({point:e.base.segments[3].handleOut,to:0,$content:e.o.$content,$sections:e.o.$sections})}),this.translatePointY({point:this.base.segments[3].handleOut,to:this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None,$content:this.o.$content,$sections:this.o.$sections})},s.prototype.popUP=function(){var e=this;return this.poped=!0,this.popedCenter=!1,this.translatePointY({point:this.base.segments[1].handleOut,to:-this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None}).then(function(){return e.translatePointY({point:e.base.segments[1].handleOut,to:0}).then(function(){}),e.translatePointY({point:e.base.segments[3].handleOut,to:0})}),this.translatePointY({point:this.base.segments[3].handleOut,to:-this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None})},s.prototype.popDOWN=function(){var e=this;return this.poped=!0,this.popedCenter=!1,this.translatePointY({point:this.base.segments[1].handleOut,to:this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None}).then(function(){return e.translatePointY({point:e.base.segments[1].handleOut,to:0}).then(function(){}),e.translatePointY({point:e.base.segments[3].handleOut,to:0})}),this.translatePointY({point:this.base.segments[3].handleOut,to:this.o.size.height/5.75,duration:100,easing:TWEEN.Easing.Linear.None})},n.exports=s}),require.register("lib/share",function(e,t,n){n.exports={content:{title:"",body:"新发现一个极富创意的Office 365家庭高级版个人消费者网站，大家快来看看！参加#Office 全民创意总动员#活动，为自己创意网页署名并获得Office 365家庭高级版1年使用权和专属你的创意T-shirt！极富创意的你还等什么，标榜自己的时间到了！@微软NewOffice",url:"http://www.microsoft.com/china/officeconsumer/campaign?CR_CC=200327616"},getPicUrl:function(){return"http://www.microsoft.com/china/officeconsumer/campaign/images/share2Img.jpg"},sina:function(){var e=this;window.open("http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent([e.content.title,e.content.body].join(""))+"&url="+encodeURIComponent(e.content.url)+"&pic="+encodeURIComponent(e.getPicUrl()),"_blank")},renren:function(){var e=this;window.open("http://widget.renren.com/dialog/share?title="+encodeURIComponent(e.content.title)+"&description="+encodeURIComponent(e.content.body)+"&resourceUrl="+encodeURIComponent(e.content.url)+"&pic="+encodeURIComponent(e.getPicUrl()),"_blank")}}}),require.register("lib/slice",function(e,t,n){n.exports=function(e,t){return e>0&&e>t?Math.min(e,t):e<0&&e<t?Math.max(e,-t):e}}),require.register("routes/router",function(e,t,n){n.exports=Marionette.AppRouter.extend({appRoutes:{"!/feature/:id":"scrollTo","!/share":"share",":missing":"missing","!/:missing":"missing","!/:missing/:missing":"missing","!/:missing/:missing/:missing":"missing"}})}),require.register("views/ActivitiesView",function(e,t,n){n.exports=Marionette.ItemView.extend({viewId:1,scrollAwayElementsDuration:10,initialize:function(){var e=this,t=this.$el.children();_.bindAll(e,"adjustViewHeight","scrollElements","scrollAwayElements","scrollInElements"),e.adjustViewHeight(),$(window).resize(e.adjustViewHeight),e.scrollAwayElements(),app.vent.on("view:scrolling:up:start",function(t){e.adjustViewHeight(),e.viewId===t&&e.scrollAwayElements()}),app.vent.on("view:scrolling:down:start",function(t){e.adjustViewHeight(),e.viewId===t&&e.scrollAwayElements()}),app.vent.on("view:scrolling:up:completed",function(t){e.viewId===t&&e.scrollInElements()}),app.vent.on("view:scrolling:down:completed",function(t){e.viewId===t&&e.scrollInElements()})},adjustViewHeight:function(){var e=this,t=e.$el.parent();t.height(app.windowHeight()),e.$el.height(t.height()-$("#nav").height())},scrollElements:function(e,t,n,r,i,s,o,u,a,f,l,c){var h=this,p=this.$el.children();for(var d=0;d<3;d++)p.eq(d).stop().animate({backgroundPosition:"(50% "+e+")"},{duration:n,easing:r});h.$el.find("p").animate({top:t,"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+i*100+")",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+i*100+")",opacity:i},u),h.$el.find(".rightNowBtn").animate({bottom:f,"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+l*100+")",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+l*100+")",opacity:l},c),h.$(".guy").animate({bottom:s,"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+o*100+")",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+o*100+")",opacity:o},a)},scrollAwayElements:function(){return this.scrollElements("30%","30%",300,"easeOutQuart",0,"-3%",0,450,300,"6%",0,350)},scrollInElements:function(){return this.scrollElements("50%","10%",200,"easeOutQuart",1,0,1,100,100,"13%",1,100)}})}),require.register("views/FamilyView",function(e,t,n){var r=t("../lib/paper/sections"),i=t("../lib/paper/paperSection");n.exports=Marionette.ItemView.extend({viewId:2,scrollAwayElementsDuration:0,paper:null,sections:null,canvas:null,colors:["#88e4af","#3598db","#11507a","#2dcc70","#1bbc9b","#16a086"],sectionsCount:6,offset:[],size:[],modernPos:[0,1,2],modernGuysAnimationTimeIntervals:[0,0,0],tileExpandedStates:[!1,!1,!1,!1],tileHoveredStates:[!1,!1,!1,!1],resizeTimeOut:!1,events:{"mouseleave .tile":"hideTileIntro"},initialize:function(){var e=this,t=this.$el.children();_.bindAll(e,"adjustViewHeight","makeSections","_showTileTitle","showTileTitle","_showTileIntro","showTileIntro","_hideTileIntro","hideTileIntro","resetTiles","showTestimonies","cycle","_cycle","modernGuysWalkRight","modernGuysWalkLeft","learnMore"),e.adjustViewHeight(),e.resetTiles(),isMobile||(e.paper=new paper.PaperScope,e.canvas=document.getElementById("familyCanvas"),e.paper.setup(e.canvas),paper=e.paper,e.sectionsCount!==t.length&&(e.sectionsCount=t.length),e.makeSections(),e.paper.view.onFrame=function(t){return e.viewId===app.currentView?e.sections.update():!1}),$(window).resize(function(){e.adjustViewHeight(),e.resetTiles();if(!isMobile&&e.viewId===app.currentView){var n=e.$el.parent();paper.view.setViewSize(n.width(),n.height()),t.stop().fadeOut(200),$(e.canvas).stop().fadeOut(200),!1!==e.resizeTimeOut&&clearTimeout(e.resizeTimeOut),e.resizeTimeOut=setTimeout(function(){t.stop().fadeIn(200),e.makeSections(),$(e.canvas).stop().fadeIn(100)},400)}}),app.vent.on("view:scrolling:up:start",function(t){var n=e.$el.parent();e.adjustViewHeight();if(e.viewId-1===t){e.resetTiles();if(!isMobile)var r=setTimeout(function(){paper.view.setViewSize(n.width(),n.height()),e.makeSections(),clearTimeout(r)},100)}}),app.vent.on("view:scrolling:down:start",function(t){var n=e.$el.parent();e.adjustViewHeight();if(e.viewId+1===t){e.resetTiles();if(!isMobile)var r=setTimeout(function(){paper.view.setViewSize(n.width(),n.height()),e.makeSections(),clearTimeout(r)},100)}}),e.$el.hammer().on("touch",function(e){e.preventDefault(),e.stopPropagation(),e.gesture.stopPropagation(),e.gesture.preventDefault()}),e.$(".tile").hammer().on("tap",e.showTileIntro),e.$(".tile").bind("mousestop",e.showTileTitle),isMobile&&e.$el.find(".learnMore").hammer().on("tap",e.learnMore),e.$(".modern").on("tap",e.showTestimonies),e.cycle()},adjustViewHeight:function(){var e=this,t=e.$el.parent(),n=t.parent();n.height(app.windowHeight()),t.height(n.height()-$("#nav").height()),e.$el.height(t.height())},makeSections:function(){var e=this,t=e.$el.children();for(var n=0;n<t.length;n++)e.offset[n]={x:$(t[n]).position().left,y:$(t[n]).position().top},e.size[n]={width:$(t[n]).width(),height:$(t[n]).height()};delete e.sections,e.sections=new r({view:e.paper.view,$content:e.$el,$sections:t,sectionsCount:t.length,offset:e.offset,size:e.size,colors:e.colors})},_showTileTitle:function(e){var t=this,n=e.find(".tileFigure"),r=n.find(".tileTitle"),i=t.$(".tile").index(e);i<4&&!t.tileHoveredStates[i]&&(t.tileHoveredStates[i]=!0,n.animate({backgroundSize:"-=20%",backgroundPosition:"(center 30%)"},300,"easeOutBack"),r.animate({bottom:0},250,"easeOutQuart"))},showTileTitle:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=$(e.currentTarget);t._showTileTitle(n)},_showTileIntro:function(e,t,n){var r=this,i=e.find(".tileFigure"),s=e.find(".tileContent"),o=r.$(".tile").index(e),u={width:e.width()*.96,height:e.height()*.96};r.tileExpandedStates[o]||("Left2Right"===t?(u.left="+=1%",u.top="+=2%"):"Right2Left"===t&&(u.right="+=1%",u.top="+=2%"),i.animate(u,100,"easeOutQuart",function(){i.css({backgroundColor:n}),e.css({backgroundColor:"black","z-index":999}),e.animate({width:e.width()*2,left:0},100,"easeOutQuart",function(){s.show(),r.tileExpandedStates[o]=!0,r.$(".tile").hammer().on("tap",r.showTileIntro)})}))},showTileIntro:function(e){var t=this,n=$(e.currentTarget),r=t.$(".tile").index(n);e.stopPropagation(),e.preventDefault(),e.gesture.stopPropagation(),e.gesture.preventDefault(),r<4&&!t.tileExpandedStates[r]&&(t.$(".tile").hammer().off("tap"),"mouse"!==e.gesture.pointerType?t.resetTiles():t.tileExpandedStates[r]=!1,t._showTileTitle(n),0===r?t._showTileIntro(n,"Left2Right",t.colors[r]):1===r?t._showTileIntro(n,"Right2Left",t.colors[r]):2===r?t._showTileIntro(n,"Left2Right",t.colors[r]):3===r&&t._showTileIntro(n,"Right2Left",t.colors[r]))},_hideTileIntro:function(e,t,n){var r=this,i=r.$(".tile").index(e),s=r.$el.parent(),o=e.find(".tileFigure"),u=o.find(".tileTitle"),a=e.find(".tileContent"),f={width:e.width()/2,left:n},l={width:"100%",height:"100%",top:0};isMobile?l.backgroundColor=r.colors[i]:l.backgroundColor="transparent",r.tileExpandedStates[i]&&(r.tileExpandedStates[i]=!1,a.hide(),"Right2Left"===t?l.left=0:"Left2Right"===t&&(l.right=0),e.css({backgroundColor:"transparent","z-index":0}),e.animate(f,100,"easeOutQuart",function(){e.css({width:"33.33333%"}),o.css(l)})),r.tileHoveredStates[i]&&(r.tileHoveredStates[i]=!1,o.animate({backgroundSize:"+=20%",backgroundPosition:"(center center)"},70),u.animate({bottom:"-30%"},100))},hideTileIntro:function(e){var t=this,n=$(e.currentTarget),r=t.$(".tile").index(n);e.stopPropagation(),e.preventDefault(),0===r?t._hideTileIntro(n,"Right2Left",0):1===r?t._hideTileIntro(n,"Left2Right","33.33333%"):2===r?t._hideTileIntro(n,"Right2Left",0):3===r&&t._hideTileIntro(n,"Left2Right","33.33333%")},resetTiles:function(){var e=this;isMobile?(e.$(".tileFigure").each(function(t){$(this).css("backgroundColor",e.colors[t])}),e.$(".tile5").css("backgroundColor","#1bbc9b"),e.$(".tile6").css("backgroundColor","#16a086")):e.$(".tileFigure").css("backgroundColor","transparent"),e._hideTileIntro(e.$(".tile1"),"Right2Left",0),e._hideTileIntro(e.$(".tile2"),"Left2Right","33.33333%"),e._hideTileIntro(e.$(".tile3"),"Right2Left",0),e._hideTileIntro(e.$(".tile4"),"Left2Right","33.33333%")},showTestimonies:function(e){var t=this,n=e.currentTarget,r=t.$(".modern").index(e.currentTarget),i=t.$(".modern1"),s=t.$(".modern2"),o=t.$(".modern3");_.each(t.modernGuysAnimationTimeIntervals,function(e){clearInterval(e)}),0===t.modernPos[r]?(t.modernGuysWalkRight(i,400,570),t.modernGuysWalkRight(s,400,500),t.modernGuysWalkRight(o,400,430)):2===t.modernPos[r]&&(t.modernGuysWalkLeft(i,400,570),t.modernGuysWalkLeft(s,400,500),t.modernGuysWalkLeft(o,400,430)),t.cycle()},_cycle:function(e,t){var n=this,r=n.$(".modern").index(e);n.modernGuysAnimationTimeIntervals[r]=setInterval(function(){n.modernGuysWalkLeft(e,400,t)},5e3)},cycle:function(){var e=this,t=e.$(".modern1"),n=e.$(".modern2"),r=e.$(".modern3");e._cycle(t,570),e._cycle(n,500),e._cycle(r,430)},modernGuysWalkLeft:function(e,t,n){var r=this,i=r.$(".modern").index(e),s=r.$(".testimonies").eq(i);e.animate({right:"+=35%"},n,"easeInOutCirc",function(){r.modernPos[i]-=1,1===r.modernPos[i]?s.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1,left:"0"},t,"easeInOutCirc"):0===r.modernPos[i]&&s.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0,left:"-10%"},t,"easeInOutCirc"),-1===r.modernPos[i]&&(r.modernPos[i]=r.modernPos.length-1,e.css("right","-30%"),s.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0,left:"10%"}),e.animate({right:"+=35%"},180,"easeInOutCirc"))})},modernGuysWalkRight:function(e,t,n){var r=this,i=r.$(".modern").index(e),s=r.$(".testimonies").eq(i);e.animate({right:"-=35%"},n,"easeInOutCirc",function(){r.modernPos[i]+=1,1===r.modernPos[i]?s.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1,left:"0"},t,"easeInOutCirc"):r.modernPos.length-1===r.modernPos[i]&&s.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0,left:"10%"},t,"easeInOutCirc"),3===r.modernPos[i]&&(r.modernPos[i]=0,e.css("right","110%"),s.css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0,left:"-10%"}),e.animate({right:"-=35%"},180,"easeInOutCirc"))})},learnMore:function(e){window.open("http://office.microsoft.com/zh-cn/products/FX102853961.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_ConsTry_NA#SeeTopFeatures","_blank")}})}),require.register("views/NavView",function(e,t,n){n.exports=Marionette.ItemView.extend({events:{"tap .navItem":"scrollTo"},initialize:function(){var e=this;e.$(".navHomeCurtain").css({top:0}),_.bindAll(e,"hideNavBar","showNavBar","putNavBarTop","putNavBarBottom","navCurtainAnimation","scrollTo"),app.vent.on("view:scrolling:up:start",function(t){0===t?e.hideNavBar(e.putNavBarTop):1===t?e.showNavBar(50,e.putNavBarTop):2===t?e.showNavBar(50,e.putNavBarTop):3===t?e.showNavBar(50,e.putNavBarTop):4===t}),app.vent.on("view:scrolling:down:start",function(t){e.navCurtainAnimation(t,t-1),0!==t&&(1===t?e.hideNavBar(e.putNavBarBottom):2===t?e.showNavBar(50,e.putNavBarTop):3===t?e.showNavBar(50,e.putNavBarTop):4===t&&e.showNavBar(50,e.putNavBarTop))}),app.vent.on("view:scrolling:up:completed",function(t){0!==t&&(1===t?e.showNavBar(50,e.putNavBarTop):2===t?e.showNavBar(50,e.putNavBarTop):3===t?e.showNavBar(50,e.putNavBarTop):4===t&&e.showNavBar(50,e.putNavBarTop))}),app.vent.on("view:scrolling:down:completed",function(t){0===t?e.showNavBar(50,e.putNavBarBottom):1===t?e.showNavBar(50,e.putNavBarTop):2===t?e.showNavBar(50,e.putNavBarTop):3===t?e.showNavBar(50,e.putNavBarTop):4===t}),$(window).resize(function(){if(Modernizr.mq("all and (min-width: 1100px)")){var t=e.$(".navArrow").eq(app.currentView);t.show()}})},hideNavBar:function(e){var t=this;t.$el.animate({height:0},80,"easeInQuart",function(){e&&"function"==typeof e&&e()})},showNavBar:function(e,t){var n=this;n.$el.animate({height:e},80,"easeInQuart",function(){t&&"function"==typeof t&&t()})},putNavBarTop:function(){var e=this;0!==parseFloat(e.$el.css("top"))&&e.$el.css({top:0,bottom:"auto"})},putNavBarBottom:function(){var e=this;0!==parseFloat(e.$el.css("bottom"))&&e.$el.css({top:"auto",bottom:0})},navCurtainAnimation:function(e,t){var n=this,r=n.$(".navCurtain").eq(e),i=n.$(".navArrow").eq(e),s=n.$(".navCurtain").eq(t),o=n.$(".navArrow").eq(t);if(Modernizr.mq("all and (min-width: 1100px)")){if(0===parseFloat(r.css("top"))||0!==parseFloat(r.css("top"))&&4===e)i.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0,top:12},140,"easeInQuart"),r.animate({top:"100%"},150,"easeInQuart",function(){4!==t&&(o.animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",opacity:1,top:17},140,"easeInQuart"),s.animate({top:0},150,"easeOutQuart"))})}else Modernizr.mq("all and (max-width: 1099px)")&&(0===parseFloat(r.css("top"))||0!==parseFloat(r.css("top"))&&4===e)&&r.animate({top:"100%"},150,"easeInQuart",function(){4!==t&&s.animate({top:0},150,"easeOutQuart")})},scrollTo:function(e){var t=this,n=t.$(".navItem").index(e.currentTarget);4>n&&Backbone.history.navigate("!/feature/"+n,{trigger:!0})}})}),require.register("views/SceneViews/View0",function(e,t,n){n.exports=Marionette.ItemView.extend({sliderIndex:0,sceneNum:1,sceneCurIndex:0,slideAwayElementsDuration:0,initialize:function(){var e=this;_.bindAll(e,"slideAwaySceneElements","slideAwayElements","slideAwaySceneElements","slideInElements"),app.vent.on("view:slide:left:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:left:end",function(t){e.sliderIndex===t&&e.slideInElements()})},slideAwaySceneElements:function(){var e=this;e.$("h1").animate({left:"8%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},700,"easeInQuart",function(){$(this).css({left:"21.53%"})}),e.$("#cloud1").animate({left:"18%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},590,"easeInQuart",function(){$(this).css({left:"35%"})}),e.$("#cloud2").animate({left:"28%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},650,"easeInQuart",function(){$(this).css({left:"43.1%"})}),e.$("#mountain").animate({right:"50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},690,"easeInQuart",function(){$(this).css({right:"24%"})})},slideInElements:function(){var e=this;e.$("h1").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1}),e.$("#cloud1").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1}),e.$("#cloud2").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1}),e.$("#mountain").css({opacity:1})},slideAwayElements:function(){var e=this;e.slideAwaySceneElements()}})}),require.register("views/SceneViews/View1",function(e,t,n){var r=t("../../lib/animations/flame"),i=t("../../lib/animations/dinosaur");n.exports=Marionette.ItemView.extend({sliderIndex:1,sceneNum:2,sceneCurIndex:0,slideAwayElementsDuration:0,fire:0,dinosaur:0,fireStage:0,dinosaurStage:0,surrenderRandom:Math.floor(Math.random()*100+1),surrenderPedometer:0,idleRandom:Math.floor(Math.random()*3+1),idlePedometer:0,events:{"tap .howTo":"anwser","tap .solution":"jumpTo"},initialize:function(){var e=this;e.fire=new r,e.fireStage=new createjs.Stage($("#flame")[0]),e.fire.x=0,e.fire.y=0,e.fire.gotoAndPlay("startFire"),e.fireStage.addChild(e.fire),e.dinosaur=new i,e.dinosaurStage=new createjs.Stage($(".dinosaurSurrender")[0]),e.dinosaur.x=0,e.dinosaur.y=0,e.dinosaur.gotoAndPlay("surrender"),e.dinosaurStage.addChild(e.dinosaur),createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(15),createjs.Ticker.addListener(function(){e.surrenderPedometer!==e.surrenderRandom?(e.dinosaur.gotoAndPlay("surrender"),e.surrenderPedometer++):e.idlePedometer===e.surrenderRandom?(e.surrenderPedometer=0,e.surrenderRandom=Math.floor(Math.random()*100+1),e.idlePedometer=0,e.idleRandom=Math.floor(Math.random()*3+1)):(e.dinosaur.gotoAndPlay("idle"),e.idlePedometer++),e.fireStage.update(),e.dinosaurStage.update()}),_.bindAll(e,"slideAwayElements","slideAwayScene1Elements","slideAwayScene2Elements","slideInElements","anwser"),app.vent.on("view:slide:left:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:right:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:left:end",function(t){e.sliderIndex===t&&e.slideInElements()}),app.vent.on("view:slide:right:end",function(t){e.sliderIndex===t&&e.slideInElements()})},slideAwayScene1Elements:function(){var e=this;e.$(".howTo").animate({top:"15%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},660,"easeInQuart")},slideAwayScene2Elements:function(){var e=this;e.$(".solution").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".howTo").animate({left:"11.13%",top:"15%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},500,"easeOutQuart")}),e.$(".primitive").animate({right:"25%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},200,"easeInQuart"),e.$(".modern").animate({right:"10%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},500,"easeOutQuart"),e.$("#flame").animate({right:"27.20%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1}),e.$(".dinosaurSurrender").animate({right:"30%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},500,"easeOutQuart")},slideInElements:function(){var e=this,t=setTimeout(function(){e.$(".howTo").animate({top:"20%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},200),clearTimeout(t)},400)},slideAwayElements:function(){var e=this;0===e.sceneCurIndex?e.slideAwayScene1Elements():1===e.sceneCurIndex&&e.slideAwayScene2Elements()},anwser:function(){var e=this;e.sceneCurIndex=e.sceneCurIndex<e.sceneNum-1?e.sceneCurIndex+1:e.sceneNum-1,e.$el.stop().animate({backgroundPosition:"(58% 40%)"},{duration:680,easing:"easeOutQuart"}),e.$(".howTo").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".solution").animate({left:"11.13%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeOutQuart")}),e.$(".primitive").animate({right:"35%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},200,"easeInQuart"),e.$(".modern").animate({right:"22%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},500,"easeOutQuart"),e.$("#flame").animate({right:"13%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0}),e.$(".dinosaurSurrender").animate({right:"32.20%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},500,"easeOutQuart")},jumpTo:function(){Backbone.history.navigate("!/feature/2",{trigger:!0})}})}),require.register("views/SceneViews/View2",function(e,t,n){var r=t("../../lib/animations/triceratops"),i=t("../../lib/animations/phone");Cloud=t("../../lib/animations/cloud"),n.exports=Marionette.ItemView.extend({sliderIndex:2,sceneNum:2,sceneCurIndex:0,slideAwayElementsDuration:0,triceratops:0,phone:0,cloud:0,cloudStage:0,triceratopsStage:0,phoneStage:0,warningRandom:Math.floor(Math.random()*40+1),warningPedometer:0,idleRandom:Math.floor(Math.random()*3+1),idlePedometer:0,events:{"tap .howTo":"anwser","tap .solution":"jumpTo"},initialize:function(){var e=this;e.cloud=new Cloud,e.cloudStage=new createjs.Stage($(".cloudWithSignal")[0]),e.cloud.x=0,e.cloud.y=0,e.cloud.gotoAndPlay("signal"),e.cloudStage.addChild(e.cloud),e.phone=new i,e.phoneStage=new createjs.Stage($(".phone")[0]),e.phone.x=0,e.phone.y=0,e.phone.gotoAndPlay("warning"),e.phoneStage.addChild(e.phone),e.triceratops=new r,e.triceratopsStage=new createjs.Stage($(".triceratops")[0]),e.triceratops.x=0,e.triceratops.y=0,e.triceratops.gotoAndPlay("dizzy"),e.triceratopsStage.addChild(e.triceratops),createjs.Ticker.addListener(function(){e.cloudStage.update(),e.phoneStage.update(),e.triceratopsStage.update()}),_.bindAll(e,"slideAwayElements","slideAwayScene1Elements","slideAwayScene2Elements","slideInElements","anwser","jumpTo"),app.vent.on("view:slide:left:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:right:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:left:end",function(t){e.sliderIndex===t&&e.slideInElements()}),app.vent.on("view:slide:right:end",function(t){e.sliderIndex===t&&e.slideInElements()})},slideAwayScene1Elements:function(){var e=this;e.$(".howTo").animate({top:"15%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},660,"easeInQuart")},slideAwayScene2Elements:function(){var e=this;e.$(".solution").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".howTo").animate({left:"11.13%",top:"15%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},500,"easeOutQuart")}),e.$(".ready").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".cloudWithSignal").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".monster").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".go").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".phone").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".cloud").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".triceratops").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100)},slideInElements:function(){var e=this,t=setTimeout(function(){e.$(".howTo").animate({top:"20%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},200),clearTimeout(t)},400)},slideAwayElements:function(){var e=this;0===e.sceneCurIndex?e.slideAwayScene1Elements():1===e.sceneCurIndex&&e.slideAwayScene2Elements()},anwser:function(){var e=this;e.sceneCurIndex=e.sceneCurIndex<e.sceneNum-1?e.sceneCurIndex+1:e.sceneNum-1,e.$el.stop().animate({backgroundPosition:"(58% 40%)"},{duration:680,easing:"easeOutQuart"}),e.$(".howTo").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".solution").animate({left:"11.13%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeOutQuart")}),e.$(".ready").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".cloudWithSignal").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".monster").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".go").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".phone").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".cloud").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100),e.$(".triceratops").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},100)},jumpTo:function(){Backbone.history.navigate("!/feature/2",{trigger:!0})}})}),require.register("views/SceneViews/View3",function(e,t,n){var r=t("../../lib/animations/survivor");n.exports=Marionette.ItemView.extend({sliderIndex:3,sceneNum:2,sceneCurIndex:0,slideAwayElementsDuration:0,survivor:0,survivorStage:0,events:{"tap .howTo":"answer","tap .solution":"jumpTo"},initialize:function(){var e=this;e.survivor=new r,e.survivorStage=new createjs.Stage($(".survivor")[0]),e.survivor.x=0,e.survivor.y=0,e.survivor.gotoAndPlay("wave"),e.survivorStage.addChild(e.survivor),createjs.Ticker.addListener(function(){e.survivorStage.update()}),_.bindAll(e,"slideAwayScene1Elements","slideAwayScene2Elements","slideAwayElements","slideInElements","_lotusFloat","lotusFloat","answer","jumpTo"),app.vent.on("view:slide:left:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:right:start",function(t){e.sliderIndex===t&&e.slideAwayElements()}),app.vent.on("view:slide:left:end",function(t){e.sliderIndex===t&&e.slideInElements()}),app.vent.on("view:slide:right:end",function(t){e.sliderIndex===t&&e.slideInElements()}),e.lotusFloat()},slideAwayScene1Elements:function(){var e=this;e.$(".howTo").animate({top:"23%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},660,"easeInQuart")},slideAwayScene2Elements:function(){var e=this;e.$(".solution").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".howTo").animate({left:"11.13%",top:"23%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},500,"easeOutQuart")}),e.$(".lotus").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},100),e.$(".cat").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",opacity:1},100),e.$(".island").animate({right:"11.93%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeInQuart"),e.$(".survivor").animate({right:"6.93%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart")},slideInElements:function(){var e=this,t=setTimeout(function(){e.$(".howTo").animate({top:"28%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},200),clearTimeout(t)},400)},slideAwayElements:function(){var e=this;0===e.sceneCurIndex?e.slideAwayScene1Elements():1===e.sceneCurIndex&&e.slideAwayScene2Elements()},_lotusFloat:function(e,t,n){setInterval(function(){e.animate({left:t+1+"%"},n,function(){e.animate({left:t-1+"%"},n,function(){e.animate({left:t+"%"},n)})})},n*3+300)},lotusFloat:function(){var e=this,t=e.$(".lotus .apple"),n=e.$(".lotus .android"),r=e.$(".lotus .ms");e._lotusFloat(n,48.33,1300),e._lotusFloat(t,0,1200),e._lotusFloat(r,30.56,1e3)},answer:function(){var e=this;e.sceneCurIndex=e.sceneCurIndex<e.sceneNum-1?e.sceneCurIndex+1:e.sceneNum-1,e.$(".howTo").animate({left:"-50%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".solution").animate({left:"11.13%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeOutQuart")}),e.$(".cat").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart",function(){e.$(".island").animate({right:"15.93%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",opacity:0},400,"easeInQuart"),e.$(".survivor").animate({right:"11.93%","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeInQuart"),e.$(".lotus").animate({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",opacity:1},400,"easeInQuart")})},jumpTo:function(){Backbone.history.navigate("!/feature/2",{trigger:!0})}})}),require.register("views/SceneViews/View4",function(e,t,n){n.exports=Marionette.ItemView.extend({sliderIndex:4,sceneNum:1,sceneCurIndex:0,slideAwayElementsDuration:0,events:{"tap .joinUs":"joinUs"},joinUs:function(){window.open("http://e.weibo.com/msftoffice2010")}})}),require.register("views/ShareView",function(e,t,n){var r=t("../lib/share");n.exports=Marionette.ItemView.extend({viewId:4,scrollAwayElementsDuration:0,events:{"tap .sina":"shareToSina","tap .renren":"shareToRenren"},initialize:function(){var e=this,t=this.$el.children();_.bindAll(e,"adjustViewHeight"),e.adjustViewHeight(),$(window).resize(e.adjustViewHeight),app.vent.on("view:scrolling:up:start",function(){e.adjustViewHeight()}),app.vent.on("view:scrolling:down:start",function(){e.adjustViewHeight()})},adjustViewHeight:function(){var e=this,t=e.$el.parent();t.height(app.windowHeight()),e.$el.height(t.height()-$("#nav").height())},shareToSina:function(){r.sina()},shareToRenren:function(){r.renren()}})}),require.register("views/SliderView",function(e,t,n){n.exports=Marionette.ItemView.extend({viewId:0,scrollAwayElementsDuration:100,slideAwayTimeOut:0,subViews:[],curSubViewIndex:0,$hammer:null,events:{"tap .slideLeft":"slideToLeftHandler","tap .slideRight":"slideToRightHandler","tap .slideThumbnail":"slideTo"},initialize:function(e){var t=this;_.bindAll(t,"adjustViewHeight","_slideLeft","slideLeft","_slideRight","slideRight","slideToLeftHandler","slideToRightHandler","slideTo","swipeLeftHandler","swipeRightHandler"),t.adjustViewHeight(),$(window).resize(t.adjustViewHeight),t.subViews=e.subViews,t.curSubViewIndex=0,t.$hammer=t.$el.hammer({drag_block_vertical:!0,drag_block_horizontal:!0,swipe_velocity:.5}),app.vent.on("view:scrolling:up:start",function(){t.adjustViewHeight()}),t.$hammer.on("swipeleft",t.swipeLeftHandler),t.$hammer.on("swiperight",t.swipeRightHandler),t.$el.css({"-ms-touch-action":"pan-y","touch-action":"pan-y"})},adjustViewHeight:function(){var e=this,t=e.$el.parent();t.height(app.windowHeight()),e.$el.height(t.height()-$("#nav").height())},_slideLeft:function(e){var t=this,n=t.$(".slideThumbnail");if("undefined"==typeof e)t.curSubViewIndex>0?e=t.curSubViewIndex-1:e=0;else if(e<0||e>t.subViews.length||e>=t.curSubViewIndex)return!1;t.curSubViewIndex=e,n.eq(t.curSubViewIndex).attr("src","images/sliders/thumbnails/"+t.curSubViewIndex+"/active.png"),0===t.curSubViewIndex&&t.$(".slideLeft").stop().fadeOut(50),t.curSubViewIndex!==t.subViews.length-1&&"none"===t.$(".slideRight").css("display")&&t.$(".slideRight").stop().fadeIn("fast"),app.isiPad?t.$(".slide").eq(t.curSubViewIndex).css("left","-100%").animate({left:0},620,function(){app.vent.trigger("view:slide:left:end",t.curSubViewIndex)}):t.$(".slide").eq(t.curSubViewIndex).css("left","-100%").animate({left:0},650,"easeInQuart",function(){app.vent.trigger("view:slide:left:end",t.curSubViewIndex)})},slideLeft:function(e){var t=this,n=t.$(".slideThumbnail");app.vent.trigger("view:slide:left:start",t.curSubViewIndex),n.eq(t.curSubViewIndex).attr("src","images/sliders/thumbnails/"+t.curSubViewIndex+"/inactive.png"),app.isiPad?t.$(".slide").eq(t.curSubViewIndex).animate({left:"100%"},620):t.$(".slide").eq(t.curSubViewIndex).animate({left:"100%"},720,"easeInQuart"),t.slideAwayTimeOut=setTimeout(function(){t._slideLeft(e),clearTimeout(t.slideAwayTimeOut)},t.subViews[t.curSubViewIndex].slideAwayElementsDuration)},_slideRight:function(e){var t=this,n=t.$(".slideThumbnail");if("undefined"==typeof e)t.curSubViewIndex<t.subViews.length-1?e=t.curSubViewIndex+1:e=t.subViews.length-1;else if(e<0||e>t.subViews.length||e<=t.curSubViewIndex)return!1;t.curSubViewIndex=e,n.eq(t.curSubViewIndex).attr("src","images/sliders/thumbnails/"+t.curSubViewIndex+"/active.png"),0!==t.curSubViewIndex&&"none"===t.$(".slideLeft").css("display")&&t.$(".slideLeft").stop().fadeIn("fast"),t.curSubViewIndex===t.subViews.length-1&&t.$(".slideRight").stop().fadeOut(50),app.isiPad?t.$(".slide").eq(t.curSubViewIndex).css("left","100%").animate({left:0},620,function(){app.vent.trigger("view:slide:right:end",t.curSubViewIndex)}):t.$(".slide").eq(t.curSubViewIndex).css("left","100%").animate({left:0},650,"easeInQuart",function(){app.vent.trigger("view:slide:right:end",t.curSubViewIndex)})},slideRight:function(e){var t=this,n=t.$(".slideThumbnail");app.vent.trigger("view:slide:right:start",t.curSubViewIndex),n.eq(t.curSubViewIndex).attr("src","images/sliders/thumbnails/"+t.curSubViewIndex+"/inactive.png"),app.isiPad?t.$(".slide").eq(t.curSubViewIndex).animate({left:"-100%"},620):t.$(".slide").eq(t.curSubViewIndex).animate({left:"-100%"},720,"easeInQuart"),t.slideAwayTimeOut=setTimeout(function(){t._slideRight(e),clearTimeout(t.slideAwayTimeOut)},t.subViews[t.curSubViewIndex].slideAwayElementsDuration)},slideToLeftHandler:function(){var e=this;e.undelegateEvents(),e.slideLeft(),app.vent.on("view:slide:left:end",function(){e.delegateEvents()})},slideToRightHandler:function(){var e=this;e.undelegateEvents(),e.slideRight(),app.vent.on("view:slide:right:end",function(){e.delegateEvents()})},slideTo:function(e){var t=this,n=t.$(".slideThumbnail").index(e.currentTarget);if(n>=t.subViews.length||n<0)return!1;0!==n-t.curSubViewIndex&&t.undelegateEvents(),n-t.curSubViewIndex>0?t.slideRight(n):n-t.curSubViewIndex<0&&t.slideLeft(n),app.vent.on("view:slide:left:end",function(){t.delegateEvents()}),app.vent.on("view:slide:right:end",function(){t.delegateEvents()})},swipeLeftHandler:function(e){var t=this;if(t.curSubViewIndex>=t.subViews.length-1)return!1;"mouse"!==e.gesture.pointerType&&t.slideToRightHandler()},swipeRightHandler:function(e){var t=this;if(t.curSubViewIndex<=0)return!1;"mouse"!==e.gesture.pointerType&&t.slideToLeftHandler()}})}),require.register("views/ToolsView",function(e,t,n){n.exports=Marionette.ItemView.extend({viewId:3,scrollAwayElementsDuration:0,tileExpandedStates:[!1,!1,!1,!1,!1,!1],tileHoveredStates:[!1,!1,!1,!1,!1,!1],events:{"mouseleave .tile":"hideTileIntro"},initialize:function(){var e=this;_.bindAll(e,"adjustViewHeight","scrollElements","scrollAwayElements","scrollInElements","_showTileIntro","showTileIntro","_showTileTitle","showTileTitle","_hideTileIntro","hideTileIntro","resetTiles","learnMore"),e.adjustViewHeight(),$(window).resize(function(){e.resetTiles(),e.adjustViewHeight()}),e.scrollAwayElements(),app.vent.on("view:scrolling:up:start",function(t){e.adjustViewHeight(),e.viewId-1===t?e.resetTiles():e.viewId===t&&e.scrollAwayElements()}),app.vent.on("view:scrolling:down:start",function(t){e.adjustViewHeight(),e.viewId+1===t?e.resetTiles():e.viewId===t&&e.scrollAwayElements()}),app.vent.on("view:scrolling:up:completed",function(t){e.viewId===t&&e.scrollInElements()}),app.vent.on("view:scrolling:down:completed",function(t){e.viewId===t&&e.scrollInElements()}),e.$el.hammer().on("touch",function(e){e.preventDefault(),e.stopPropagation(),e.gesture.stopPropagation(),e.gesture.preventDefault()}),e.$(".tile").bind("mousestop",e.showTileTitle),e.$(".tile").hammer().on("tap",e.showTileIntro),isMobile&&e.$el.find(".learnMore").hammer().on("tap",e.learnMore)},adjustViewHeight:function(){var e=this,t=e.$el.parent();t.height(app.windowHeight()),e.$el.height(t.height()-$("#nav").height())},scrollElements:function(e,t,n,r){var i=this,s=this.$el.children();if(e.length!==s.length||t.length!==s.length)return console.error("there are "+s.length+' children within <div id="'+this.$el.attr("id")+"\">, you haven't provided enough background-poistions for them:)"),!1;for(var o=0;o<s.length;o++)s.eq(o).find(".tileFigure").stop().animate({backgroundPosition:"("+e[o]+" "+t[o]+")"},{duration:n,easing:r})},scrollAwayElements:function(){var e=["left","50%","50%","50%","50%","50%"],t=["5%","70%","60%","60%","60%","60%"],n=200,r="easeInQuart";return this.scrollElements(e,t,n,r)},scrollInElements:function(){var e=["left","50%","50%","50%","50%","50%"],t=["10%","60%","50%","50%","50%","50%"],n=200,r="easeOutQuart";return this.scrollElements(e,t,n,r)},_showTileTitle:function(e,t){var n=this,r=e.find(".tileFigure"),i=r.find(".tileTitle"),s=n.$(".tile").index(e);n.tileHoveredStates[s]||(n.tileHoveredStates[s]=!0,r.animate({backgroundSize:"-=20%",backgroundPosition:t},300,"easeOutBack"),i.animate({bottom:0},250,"easeOutQuart"))},showTileTitle:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=$(e.currentTarget),r=t.$(".tile").index(n);0===r?t._showTileTitle(n,"(10% 10%)"):1===r?t._showTileTitle(n,"(center 50%)"):2===r?t._showTileTitle(n,"(center center)"):3===r?t._showTileTitle(n,"(center center)"):4===r?t._showTileTitle(n,"(center center)"):5===r&&t._showTileTitle(n,"(center center)")},_showTileIntro:function(e,t){var n=this,r=e.find(".tileFigure"),i=e.find(".tileContent"),s=n.$(".tile").index(e),o={},u={width:e.width()*.96,height:e.height()*.96};n.tileExpandedStates[s]||("Left2Right"===t?(o.width=e.width()*2,o.left=0,u.left="+=1%",u.top="+=2%"):"Right2Left"===t?(o.width=e.width()*2,o.right=0,u.right="+=1%",u.top="+=2%"):"Top2Bottom"===t?(o.height=e.height()*2,o.top=0,u.left="+=2%",u.top="+=1%"):"Bottom2Top"===t&&(o.height=e.height()*2,o.top=0,u.left="+=2%",u.bottom="+=1%"),r.animate(u,100,"easeOutQuart",function(){e.css({"z-index":999}),e.animate(o,100,"easeOutQuart",function(){i.show(),n.tileExpandedStates[s]=!0,n.$(".tile").hammer().on("tap",n.showTileIntro)})}))},showTileIntro:function(e){var t=this,n=$(e.currentTarget),r=t.$(".tile").index(n);e.stopPropagation(),e.preventDefault(),e.gesture.stopPropagation(),e.gesture.preventDefault(),t.tileExpandedStates[r]||(t.$(".tile").hammer().off("tap"),"mouse"!==e.gesture.pointerType?t.resetTiles():t.tileExpandedStates[r]=!1,t._showTileTitle(n),0===r?t._showTileIntro(n,"Left2Right"):1===r?t._showTileIntro(n,"Top2Bottom"):2===r?t._showTileIntro(n,"Right2Left"):3===r?t._showTileIntro(n,"Left2Right"):4===r?t._showTileIntro(n,"Bottom2Top"):5===r&&t._showTileIntro(n,"Right2Left"))},_hideTileIntro:function(e,t,n){var r=this,i=r.$(".tile").index(e),s=e.find(".tileFigure"),o=s.find(".tileTitle"),u=e.find(".tileContent"),a={},f={width:"100%",height:"100%"};r.tileExpandedStates[i]&&(r.tileExpandedStates[i]=!1,u.hide(),"Right2Left"===t?(a.width=e.width()/2,a.left=0,f.left=0,f.top=0):"Left2Right"===t?(a.width=e.width()/2,a.right=0,f.right=0,f.top=0):"Bottom2Top"===t?(a.height=e.height()/2,a.top=0,f.top=0,f.left=0):"Top2Bottom"===t&&(a.height=e.height()/2,a.top="49.99999%",f.bottom=0,f.left=0),e.css({"z-index":0}),e.animate(a,50,"easeOutQuart",function(){e.css({width:"33.33333%",height:"49.99999%"}),s.css(f)})),r.tileHoveredStates[i]&&(r.tileHoveredStates[i]=!1,s.animate({backgroundSize:"+=20%",backgroundPosition:n},70),o.animate({bottom:"-30%"},100))},hideTileIntro:function(e){var t=this,n=$(e.currentTarget),r=t.$(".tile").index(n);e.stopPropagation(),e.preventDefault(),0===r?t._hideTileIntro(n,"Right2Left","(0 0)"):1===r?t._hideTileIntro(n,"Bottom2Top","(center 60%)"):2===r?t._hideTileIntro(n,"Left2Right","(center center)"):3===r?t._hideTileIntro(n,"Right2Left","(center center)"):4===r?t._hideTileIntro(n,"Top2Bottom","(center center)"):5===r&&t._hideTileIntro(n,"Left2Right","(center center)")},resetTiles:function(){var e=this;e._hideTileIntro(e.$(".tile1"),"Right2Left","(0 0)"),e._hideTileIntro(e.$(".tile2"),"Bottom2Top","(center 60%)"),e._hideTileIntro(e.$(".tile3"),"Left2Right","(center center)"),e._hideTileIntro(e.$(".tile4"),"Right2Left","(center center)"),e._hideTileIntro(e.$(".tile5"),"Top2Bottom","(center center)"),e._hideTileIntro(e.$(".tile6"),"Left2Right","(center center)")},learnMore:function(e){var t=this,n=$(e.currentTarget),r=t.$el.find(".learnMore").index(n);e.stopPropagation(),e.preventDefault(),0===r?window.open("http://office.microsoft.com/zh-cn/powerpoint-help/HA102749750.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_PPTHA_705","_blank"):1===r?window.open("http://office.microsoft.com/zh-cn/powerpoint-help/VA103988959.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_PPTVA_959","_blank"):2===r?window.open("http://office.microsoft.com/zh-cn/powerpoint-help/HA102840202.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_PPTHA_202","_blank"):3===r?window.open("http://office.microsoft.com/zh-cn/excel-help/HA102809330.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_XLHA_330","_blank"):4===r?window.open("http://office.microsoft.com/zh-cn/support/VA102834142.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_OneVA_142","_blank"):5===r&&window.open("http://office.microsoft.com/zh-cn/powerpoint-help/HA102809628.aspx?WT.mc_id=Soc_WeiBo_Q1Jul_PPTHA_628","_blank")}})})